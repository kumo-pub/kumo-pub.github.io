<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-cpp/base/testing/kt/advanced" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">ktest é«˜çº§æ•™ç¨‹ | Kumo AI</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://kumo-pub.github.io/img/kumo_logo.svg"><meta data-rh="true" name="twitter:image" content="https://kumo-pub.github.io/img/kumo_logo.svg"><meta data-rh="true" property="og:url" content="https://kumo-pub.github.io/docs/next/cpp/base/testing/kt/advanced"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ktest é«˜çº§æ•™ç¨‹ | Kumo AI"><meta data-rh="true" name="description" content="ä»‹ç»"><meta data-rh="true" property="og:description" content="ä»‹ç»"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://kumo-pub.github.io/docs/next/cpp/base/testing/kt/advanced"><link data-rh="true" rel="alternate" href="https://kumo-pub.github.io/docs/next/cpp/base/testing/kt/advanced" hreflang="en"><link data-rh="true" rel="alternate" href="https://kumo-pub.github.io/docs/next/cpp/base/testing/kt/advanced" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Kumo AI RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Kumo AI Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Kumo AI JSON Feed">


<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-E5CR2Q1NRE"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-E5CR2Q1NRE",{})</script>


<link rel="alternate" type="application/rss+xml" href="/changelog/rss.xml" title="Docusaurus changelog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/changelog/atom.xml" title="Docusaurus changelog Atom Feed">
<link rel="alternate" type="application/json" href="/changelog/feed.json" title="Docusaurus changelog JSON Feed">



<link rel="icon" href="/img/favicon.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/favicon.png">
<link rel="mask-icon" href="/img/favicon.png" color="rgb(62, 204, 94)">
<meta name="msapplication-TileImage" content="/img/favicon.png">
<meta name="msapplication-TileColor" content="#000">



<link rel="alternate" type="application/rss+xml" href="/tests/blog/rss.xml" title="Docusaurus Tests Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/tests/blog/atom.xml" title="Docusaurus Tests Blog Atom Feed">
<link rel="alternate" type="application/json" href="/tests/blog/feed.json" title="Docusaurus Tests Blog JSON Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Kumo AI" href="/opensearch.xml">

<link rel="stylesheet" href="/katex/katex.min.css"><link rel="stylesheet" href="/assets/css/styles.21fbef88.css">
<script src="/assets/js/runtime~main.dbfb52d2.js" defer="defer"></script>
<script src="/assets/js/main.94389b5b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme-b4f")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss-b4f")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">ğŸ‰ï¸ <b><a target="_blank" href="https://docusaurus.io/blog/releases/1.1">Kumo v1.1</a> is out!</b> ğŸ¥³ï¸</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/kumo_logo.svg" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE" height="48" width="128"><img src="/img/kumo_logo_white.svg" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="48" width="128"></div><b class="navbar__title text--truncate">ä¸»é¡µ</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/next">æ–‡æ¡£</a><a class="navbar__item navbar__link" href="/docs/next/category/kmsearch">API</a><a class="navbar__item navbar__link" href="/blog">åšå®¢</a><a class="navbar__item navbar__link" href="/changelog">å‘å¸ƒ</a><a class="navbar__item navbar__link" href="/showcase">åº”ç”¨æ¡ˆä¾‹</a><a class="navbar__item navbar__link" href="/community/support">æ”¯æŒä¸èµ„æº</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/next/cpp/base/testing/kt/advanced">nightly ğŸš§</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/next/cpp/base/testing/kt/advanced">nightly ğŸš§</a></li><li><a class="dropdown__link" href="/docs/cpp/base/testing/kt/advanced">1.1.1</a></li><li><hr class="dropdown-separator"></li><li class="dropdown-archived-versions"><b>Archived versions</b></li><li><a href="https://docusaurus-archive-october-2023.netlify.app/docs/2.3.1" target="_blank" rel="noopener noreferrer" class="dropdown__link">1.0.1<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://v1.docusaurus.io" target="_blank" rel="noopener noreferrer" class="dropdown__link">1.x.x<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><hr class="dropdown-separator"></li><li><a class="dropdown__link" href="/versions">All versions</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/next/cpp/base/testing/kt/advanced" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><hr style="margin: 0.3rem 0;"></li><li><a href="https://github.com/facebook/docusaurus/issues/3526" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help Us Translate<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/kumo_logo.svg" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE" height="48" width="128"><img src="/img/kumo_logo_white.svg" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="48" width="128"><b>ä¸»é¡µ</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next">æ¦‚è¿°</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/next/category/åŸºç¡€å‡†å¤‡">åŸºç¡€å‡†å¤‡</a><button aria-label="Collapse sidebar category &#x27;åŸºç¡€å‡†å¤‡&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/env_prepare_be">åç«¯å¼€å‘ç¯å¢ƒ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/env_prepare_fe">å‰ç«¯å¼€å‘ç¯å¢ƒ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/next/category/æŒç»­é›†æˆ----kmpkg">æŒç»­é›†æˆ -- kmpkg</a><button aria-label="Expand sidebar category &#x27;æŒç»­é›†æˆ -- kmpkg&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/next/category/æœåŠ¡ç«¯å¼€å‘">æœåŠ¡ç«¯å¼€å‘</a><button aria-label="Collapse sidebar category &#x27;æœåŠ¡ç«¯å¼€å‘&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cpp/overview">æ¦‚è¿°</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/next/category/è§„èŒƒé”™è¯¯ä¸é”™è¯¯è¿”å›å€¼">è§„èŒƒé”™è¯¯ä¸é”™è¯¯è¿”å›å€¼</a><button aria-label="Expand sidebar category &#x27;è§„èŒƒé”™è¯¯ä¸é”™è¯¯è¿”å›å€¼&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/next/category/æ€§èƒ½æµ‹è¯•ä¸å•å…ƒæµ‹è¯•">æ€§èƒ½æµ‹è¯•ä¸å•å…ƒæµ‹è¯•</a><button aria-label="Collapse sidebar category &#x27;æ€§èƒ½æµ‹è¯•ä¸å•å…ƒæµ‹è¯•&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cpp/base/testing/overview">æ¦‚è¿°</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/next/category/doctestå•å…ƒæµ‹è¯•">doctestå•å…ƒæµ‹è¯•</a><button aria-label="Expand sidebar category &#x27;doctestå•å…ƒæµ‹è¯•&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/next/category/kumo-test">Kumo test</a><button aria-label="Collapse sidebar category &#x27;Kumo test&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cpp/base/testing/kt/quickstart">å¿«é€Ÿå¼€å§‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cpp/base/testing/kt/primer">ktest å…¥é—¨</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cpp/base/testing/kt/reference/testing">æµ‹è¯•å‚è€ƒ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cpp/base/testing/kt/reference/assertions">æ–­è¨€å‚è€ƒ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/next/cpp/base/testing/kt/advanced">ktest é«˜çº§æ•™ç¨‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cpp/base/testing/kt/samples">ktest ç¤ºä¾‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cpp/base/testing/kt/faq">ktest FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cpp/base/testing/kt/kmock_for_dummies">kMock å…¥é—¨ç‰ˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cpp/base/testing/kt/kmock_cook_book">kmock æ•™ç¨‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cpp/base/testing/kt/kmock_cheat_sheet">kmock å¤‡å¿˜å½•</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cpp/base/testing/kt/kmock_faq">kMock å¸¸è§é—®é¢˜è§£ç­”</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/cpp/base/testing/benchmark">google benchmark</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/next/category/åŸºç¡€åº”ç”¨">åŸºç¡€åº”ç”¨</a><button aria-label="Expand sidebar category &#x27;åŸºç¡€åº”ç”¨&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/next/category/å¤šæ ¸ç¼–ç¨‹">å¤šæ ¸ç¼–ç¨‹</a><button aria-label="Expand sidebar category &#x27;å¤šæ ¸ç¼–ç¨‹&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/next/category/logæ—¥å¿—åº“">logæ—¥å¿—åº“</a><button aria-label="Expand sidebar category &#x27;logæ—¥å¿—åº“&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/next/category/krpcæ•™ç¨‹">krpcæ•™ç¨‹</a><button aria-label="Expand sidebar category &#x27;krpcæ•™ç¨‹&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/next/category/æœç´¢åº”ç”¨å¼€å‘">æœç´¢åº”ç”¨å¼€å‘</a><button aria-label="Expand sidebar category &#x27;æœç´¢åº”ç”¨å¼€å‘&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/next/category/å‘é‡æ•°æ®åº“æ•™ç¨‹">å‘é‡æ•°æ®åº“æ•™ç¨‹</a><button aria-label="Expand sidebar category &#x27;å‘é‡æ•°æ®åº“æ•™ç¨‹&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/next/category/åˆ†å¸ƒå¼æ•°æ®åº“">åˆ†å¸ƒå¼æ•°æ®åº“</a><button aria-label="Expand sidebar category &#x27;åˆ†å¸ƒå¼æ•°æ®åº“&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/next/category/æœç´¢ç»Ÿä¸€æ‰§è¡Œå¼•æ“">æœç´¢ç»Ÿä¸€æ‰§è¡Œå¼•æ“</a><button aria-label="Expand sidebar category &#x27; æœç´¢ç»Ÿä¸€æ‰§è¡Œå¼•æ“&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/next/category/æœç´¢-ui">æœç´¢ UI</a><button aria-label="Expand sidebar category &#x27;æœç´¢ UI&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Kumo AI<!-- --> <b>nightly ğŸš§</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/cpp/base/testing/kt/advanced">latest version</a></b> (<!-- -->1.1.1<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/next/category/æœåŠ¡ç«¯å¼€å‘"><span itemprop="name">æœåŠ¡ç«¯å¼€å‘</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/next/category/æ€§èƒ½æµ‹è¯•ä¸å•å…ƒæµ‹è¯•"><span itemprop="name">æ€§èƒ½æµ‹è¯•ä¸å•å…ƒæµ‹è¯•</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/next/category/kumo-test"><span itemprop="name">Kumo test</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">ktest é«˜çº§æ•™ç¨‹</span><meta itemprop="position" content="4"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: nightly ğŸš§</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ktest é«˜çº§æ•™ç¨‹</h1></header>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="introduction">ä»‹ç»<a href="#introduction" class="hash-link" aria-label="Direct link to ä»‹ç»" title="Direct link to ä»‹ç»">â€‹</a></h2>
<p>ç°åœ¨æ‚¨å·²ç»é˜…è¯»äº† <a href="/docs/next/cpp/base/testing/kt/primer">kumotest Primer</a> å¹¶äº†è§£äº†å¦‚ä½•ä½¿ç”¨ kumotest ç¼–å†™æµ‹è¯•ï¼Œæ˜¯æ—¶å€™å­¦ä¹ ä¸€äº›æ–°æŠ€å·§äº†ã€‚æœ¬æ–‡ä»¶
å°†å‘æ‚¨å±•ç¤ºæ›´å¤šæ–­è¨€ä»¥åŠå¦‚ä½•æ„å»ºå¤æ‚çš„å¤±è´¥æ¶ˆæ¯ï¼Œä¼ æ’­è‡´å‘½æ•…éšœï¼Œé‡ç”¨å¹¶åŠ é€Ÿæ‚¨çš„æµ‹è¯•è£…ç½®ï¼Œä»¥åŠ
åœ¨æµ‹è¯•ä¸­ä½¿ç”¨å„ç§æ ‡å¿—ã€‚</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="more-assertions">æ›´å¤šæ–­è¨€<a href="#more-assertions" class="hash-link" aria-label="Direct link to æ›´å¤šæ–­è¨€" title="Direct link to æ›´å¤šæ–­è¨€">â€‹</a></h2>
<p>æœ¬èŠ‚æ¶µç›–äº†ä¸€äº›ä¸å¤ªå¸¸ç”¨ä½†ä»ç„¶å¾ˆé‡è¦çš„å†…å®¹ï¼Œæ–­è¨€ã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="explicit-success-and-failure">æ˜ç¡®çš„æˆåŠŸå’Œå¤±è´¥<a href="#explicit-success-and-failure" class="hash-link" aria-label="Direct link to æ˜ç¡®çš„æˆåŠŸå’Œå¤±è´¥" title="Direct link to æ˜ç¡®çš„æˆåŠŸå’Œå¤±è´¥">â€‹</a></h3>
<p>è¯·å‚é˜…<a href="/docs/next/cpp/base/testing/kt/reference/assertions#success-failure">æ˜¾å¼æˆåŠŸå’Œå¤±è´¥</a>æ–­è¨€å‚è€ƒã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exception-assertions">å¼‚å¸¸æ–­è¨€<a href="#exception-assertions" class="hash-link" aria-label="Direct link to å¼‚å¸¸æ–­è¨€" title="Direct link to å¼‚å¸¸æ–­è¨€">â€‹</a></h3>
<p>è¯·å‚é˜…æ–­è¨€ä¸­çš„<a href="/docs/next/cpp/base/testing/kt/reference/assertions#exceptions">å¼‚å¸¸æ–­è¨€</a>å‚è€ƒã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="predicate-assertions-for-better-error-messages">è°“è¯æ–­è¨€ä»¥è·å¾—æ›´å¥½çš„é”™è¯¯æ¶ˆæ¯<a href="#predicate-assertions-for-better-error-messages" class="hash-link" aria-label="Direct link to è°“è¯æ–­è¨€ä»¥è·å¾—æ›´å¥½çš„é”™è¯¯æ¶ˆæ¯" title="Direct link to è°“è¯æ–­è¨€ä»¥è·å¾—æ›´å¥½çš„é”™è¯¯æ¶ˆæ¯">â€‹</a></h3>
<p>å°½ç®¡ kumotest æœ‰ä¸€å¥—ä¸°å¯Œçš„æ–­è¨€ï¼Œä½†å®ƒä»¬æ°¸è¿œä¸å¯èƒ½å®Œæ•´ï¼Œå› ä¸ºä¸å¯èƒ½ï¼ˆä¹Ÿä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼‰é¢„æµ‹ç”¨æˆ·å¯èƒ½å‡ºç°çš„æ‰€æœ‰åœºæ™¯
é‡åˆ°ã€‚å› æ­¤ï¼Œæœ‰æ—¶ç”¨æˆ·å¿…é¡»ä½¿ç”¨<code>EXPECT_TRUE()</code>æ¥æ£€æŸ¥å¤æ‚çš„è¡¨è¾¾ï¼Œç¼ºä¹æ›´å¥½çš„å®ã€‚è¿™æœ‰ä¸€ä¸ªé—®é¢˜ä¸
å‘æ‚¨æ˜¾ç¤ºè¡¨è¾¾å¼å„éƒ¨åˆ†çš„å€¼ï¼Œä½¿å…¶å¾ˆéš¾äº†è§£å‡ºäº†ä»€ä¹ˆé—®é¢˜ã€‚ä½œä¸ºè§£å†³æ–¹æ³•ï¼Œä¸€äº›ç”¨æˆ·é€‰æ‹©æ„å»º
å¤±è´¥æ¶ˆæ¯æœ¬èº«ï¼Œå°†å…¶æµå¼ä¼ è¾“åˆ°<code>EXPECT_TRUE()</code>ã€‚ç„¶è€Œï¼Œè¿™å¾ˆå°´å°¬ï¼Œå°¤å…¶æ˜¯å½“è¡¨è¾¾å¼æœ‰å‰¯ä½œç”¨æˆ–æˆæœ¬é«˜æ˜‚æ—¶
è¯„ä»·ã€‚</p>
<p>kumotest ä¸ºæ‚¨æä¾›äº†ä¸‰ç§ä¸åŒçš„é€‰é¡¹æ¥è§£å†³æ­¤é—®é¢˜ï¼š</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="using-an-existing-boolean-function">ä½¿ç”¨ç°æœ‰çš„å¸ƒå°”å‡½æ•°<a href="#using-an-existing-boolean-function" class="hash-link" aria-label="Direct link to ä½¿ç”¨ç°æœ‰çš„å¸ƒå°”å‡½æ•°" title="Direct link to ä½¿ç”¨ç°æœ‰çš„å¸ƒå°”å‡½æ•°">â€‹</a></h4>
<p>å¦‚æœæ‚¨å·²ç»æœ‰ä¸€ä¸ªè¿”å›<code>bool</code>çš„å‡½æ•°æˆ–å‡½å­ï¼ˆæˆ–ä¸€ä¸ªç±»å‹ï¼‰å¯ä»¥éšå¼è½¬æ¢ä¸º <code>bool</code>)ï¼Œæ‚¨å¯ä»¥åœ¨ <em>è°“è¯ä¸­ä½¿ç”¨å®ƒ
æ–­è¨€</em> å…è´¹æ‰“å°å‡½æ•°å‚æ•°ã€‚çœ‹æ–­è¨€ä¸­çš„ <a href="/docs/next/cpp/base/testing/kt/reference/assertions#EXPECT_PRED"><code>EXPECT_PRED*</code></a>
è¯¦ç»†å‚è€ƒã€‚</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="using-a-function-that-returns-an-assertionresult">ä½¿ç”¨è¿”å› AssertionResult çš„å‡½æ•°<a href="#using-a-function-that-returns-an-assertionresult" class="hash-link" aria-label="Direct link to ä½¿ç”¨è¿”å› AssertionResult çš„å‡½æ•°" title="Direct link to ä½¿ç”¨è¿”å› AssertionResult çš„å‡½æ•°">â€‹</a></h4>
<p>è™½ç„¶<code>EXPECT_PRED*()</code>å’Œæœ‹å‹å¯ä»¥æ–¹ä¾¿åœ°å¿«é€Ÿå®Œæˆå·¥ä½œï¼Œä½†è¯­æ³•å¹¶ä¸ä»¤äººæ»¡æ„ï¼šæ‚¨å¿…é¡»å¯¹ä¸åŒçš„å‚æ•°ä½¿ç”¨ä¸åŒçš„å®ï¼Œå¹¶ä¸”å®ƒ
æ„Ÿè§‰æ›´åƒ Lisp è€Œä¸æ˜¯ C++ã€‚ <code>::testing::AssertionResult</code> ç±»è§£å†³äº†
è¿™ä¸ªé—®é¢˜ã€‚</p>
<p><code>AssertionResult</code> å¯¹è±¡è¡¨ç¤ºæ–­è¨€çš„ç»“æœï¼ˆæ— è®ºæ˜¯æˆåŠŸæˆ–å¤±è´¥ï¼Œä»¥åŠç›¸å…³æ¶ˆæ¯ï¼‰ã€‚æ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ª
<code>AssertionResult</code> ä½¿ç”¨ä»¥ä¸‹å·¥å‚å‡½æ•°ä¹‹ä¸€ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">namespace testing {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Returns an AssertionResult object to indicate that an assertion has</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// succeeded.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AssertionResult AssertionSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Returns an AssertionResult object to indicate that an assertion has</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// failed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AssertionResult AssertionFailure();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ç„¶åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>&lt;&lt;</code>è¿ç®—ç¬¦å°†æ¶ˆæ¯æµå¼ä¼ è¾“åˆ°<code>AssertionResult</code>ç›®çš„ã€‚</p>
<p>ä¸ºäº†åœ¨å¸ƒå°”æ–­è¨€ä¸­æä¾›æ›´å…·å¯è¯»æ€§çš„æ¶ˆæ¯ï¼ˆä¾‹å¦‚<code>EXPECT_TRUE()</code>ï¼‰ï¼Œ
ç¼–å†™ä¸€ä¸ªè¿”å› <code>AssertionResult</code> è€Œä¸æ˜¯ <code>bool</code> çš„è°“è¯å‡½æ•°ã€‚ä¸ºäº†
ä¾‹å¦‚ï¼Œå¦‚æœå°† <code>IsEven()</code> å®šä¹‰ä¸ºï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">testing::AssertionResult IsEven(int n) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if ((n % 2) == 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return testing::AssertionSuccess();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return testing::AssertionFailure() &lt;&lt; n &lt;&lt; &quot; is odd&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>è€Œä¸æ˜¯ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bool IsEven(int n) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return (n % 2) == 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å¤±è´¥çš„æ–­è¨€<code>EXPECT_TRUE(IsEven(Fib(4)))</code>å°†æ‰“å°ï¼š</p>
<div class="language-none codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-none codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Value of: IsEven(Fib(4))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Actual: false (3 is odd)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Expected: true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>è€Œä¸æ˜¯æ›´ä¸é€æ˜çš„</p>
<div class="language-none codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-none codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Value of: IsEven(Fib(4))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Actual: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Expected: true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å¦‚æœæ‚¨è¿˜æƒ³è¦<code>EXPECT_FALSE</code>å’Œ<code>ASSERT_FALSE</code>ä¸­çš„ä¿¡æ¯æ€§æ¶ˆæ¯
ï¼ˆKumo ä»£ç åº“ä¸­ä¸‰åˆ†ä¹‹ä¸€çš„å¸ƒå°”æ–­è¨€æ˜¯è´Ÿæ–­è¨€ï¼‰ï¼Œä»¥åŠ
åœ¨æˆåŠŸçš„æƒ…å†µä¸‹å¯ä»¥è®©è°“è¯å˜æ…¢ï¼Œä½ å¯ä»¥æä¾›
æˆåŠŸæ¶ˆæ¯ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">testing::AssertionResult IsEven(int n) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if ((n % 2) == 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return testing::AssertionSuccess() &lt;&lt; n &lt;&lt; &quot; is even&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return testing::AssertionFailure() &lt;&lt; n &lt;&lt; &quot; is odd&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ç„¶åå°†æ‰“å°è¯­å¥<code>EXPECT_FALSE(IsEven(Fib(6)))</code></p>
<div class="language-none codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-none codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  Value of: IsEven(Fib(6))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     Actual: true (8 is even)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Expected: false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="using-a-predicate-formatter">ä½¿ç”¨è°“è¯æ ¼å¼åŒ–ç¨‹åº<a href="#using-a-predicate-formatter" class="hash-link" aria-label="Direct link to ä½¿ç”¨è°“è¯æ ¼å¼åŒ–ç¨‹åº" title="Direct link to ä½¿ç”¨è°“è¯æ ¼å¼åŒ–ç¨‹åº">â€‹</a></h4>
<p>å¦‚æœæ‚¨å‘ç°ç”Ÿæˆçš„é»˜è®¤æ¶ˆæ¯
<a href="/docs/next/cpp/base/testing/kt/reference/assertions#EXPECT_PRED"><code>EXPECT_PRED*</code></a> å’Œ
<a href="/docs/next/cpp/base/testing/kt/reference/assertions#EXPECT_TRUE"><code>EXPECT_TRUE</code></a> ä¸æ»¡æ„ï¼Œæˆ–è€…æœ‰äº›
æ‚¨çš„è°“è¯çš„å‚æ•°ä¸æ”¯æŒæµå¼ä¼ è¾“åˆ°<code>ostream</code>ï¼Œæ‚¨å¯ä»¥
ç›¸åï¼Œä½¿ç”¨<em>è°“è¯æ ¼å¼åŒ–ç¨‹åºæ–­è¨€</em>æ¥<em>å®Œå…¨</em>è‡ªå®šä¹‰
æ¶ˆæ¯å·²æ ¼å¼åŒ–ã€‚çœ‹
<a href="/docs/next/cpp/base/testing/kt/reference/assertions#EXPECT_PRED_FORMAT"><code>EXPECT_PRED_FORMAT*</code></a> åœ¨
æ–­è¨€å‚è€ƒäº†è§£è¯¦ç»†ä¿¡æ¯ã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="floating-point-comparison">æµ®ç‚¹æ¯”è¾ƒ<a href="#floating-point-comparison" class="hash-link" aria-label="Direct link to æµ®ç‚¹æ¯”è¾ƒ" title="Direct link to æµ®ç‚¹æ¯”è¾ƒ">â€‹</a></h3>
<p>è¯·å‚é˜… <a href="/docs/next/cpp/base/testing/kt/reference/assertions#floating-point">æµ®ç‚¹æ¯”è¾ƒ</a>æ–­è¨€å‚è€ƒã€‚</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="floating-point-predicate-format-functions">æµ®ç‚¹è°“è¯æ ¼å¼å‡½æ•°<a href="#floating-point-predicate-format-functions" class="hash-link" aria-label="Direct link to æµ®ç‚¹è°“è¯æ ¼å¼å‡½æ•°" title="Direct link to æµ®ç‚¹è°“è¯æ ¼å¼å‡½æ•°">â€‹</a></h4>
<p>ä¸€äº›æµ®ç‚¹è¿ç®—å¾ˆæœ‰ç”¨ï¼Œä½†ä¸å¸¸ç”¨ã€‚ä¸ºäº†é¿å…æ–°å®çš„çˆ†ç‚¸ï¼Œæˆ‘ä»¬å°†å®ƒä»¬ä½œä¸ºè°“è¯æ ¼å¼å‡½æ•°æä¾›
å¯ä»¥åœ¨è°“è¯æ–­è¨€å®ä¸­ä½¿ç”¨
<a href="/docs/next/cpp/base/testing/kt/reference/assertions#EXPECT_PRED_FORMAT"><code>EXPECT_PRED_FORMAT2</code></a>ï¼Œå¯¹äº
ä¾‹å­ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using ::testing::FloatLE;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using ::testing::DoubleLE;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EXPECT_PRED_FORMAT2(FloatLE, val1, val2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EXPECT_PRED_FORMAT2(DoubleLE, val1, val2);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ä¸Šé¢çš„ä»£ç éªŒè¯<code>val1</code>å°äºæˆ–å¤§çº¦ç­‰äº<code>val2</code>ã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="asserting-using-kmock-matchers">ä½¿ç”¨ kMock åŒ¹é…å™¨è¿›è¡Œæ–­è¨€<a href="#asserting-using-kmock-matchers" class="hash-link" aria-label="Direct link to ä½¿ç”¨ kMock åŒ¹é…å™¨è¿›è¡Œæ–­è¨€" title="Direct link to ä½¿ç”¨ kMock åŒ¹é…å™¨è¿›è¡Œæ–­è¨€">â€‹</a></h3>
<p>è¯·å‚é˜…æ–­è¨€ä¸­çš„ <a href="/docs/next/cpp/base/testing/kt/reference/assertions#EXPECT_THAT"><code>EXPECT_THAT</code></a>
å‚è€ƒã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="more-string-assertions">æ›´å¤šå­—ç¬¦ä¸²æ–­è¨€<a href="#more-string-assertions" class="hash-link" aria-label="Direct link to æ›´å¤šå­—ç¬¦ä¸²æ–­è¨€" title="Direct link to æ›´å¤šå­—ç¬¦ä¸²æ–­è¨€">â€‹</a></h3>
<p>ï¼ˆè¯·å…ˆé˜…è¯»<a href="#asserting-using-kmock-matchers">ä¸Šä¸€ç¯‡</a>éƒ¨åˆ†ï¼Œå¦‚æœä½ æ²¡æœ‰ã€‚ï¼‰</p>
<p>æ‚¨å¯ä»¥ä½¿ç”¨ kMock <a href="/docs/next/cpp/base/testing/kt/reference/matchers#string-matchers">å­—ç¬¦ä¸²åŒ¹é…å™¨</a>
ä½¿ç”¨ <a href="/docs/next/cpp/base/testing/kt/reference/assertions#EXPECT_THAT"><code>EXPECT_THAT</code></a> æ‰§è¡Œæ›´å¤šå­—ç¬¦ä¸²
æ¯”è¾ƒæŠ€å·§ï¼ˆå­å­—ç¬¦ä¸²ã€å‰ç¼€ã€åç¼€ã€æ­£åˆ™è¡¨è¾¾å¼ç­‰ï¼‰ã€‚ä¸ºäº†ä¾‹å­ï¼Œ</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using ::testing::HasSubstr;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using ::testing::MatchesRegex;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ASSERT_THAT(foo_string, HasSubstr(&quot;needle&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  EXPECT_THAT(bar_string, MatchesRegex(&quot;\\w*\\d+&quot;));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="windows-HRESULT-assertions">Windows HRESULT æ–­è¨€<a href="#windows-HRESULT-assertions" class="hash-link" aria-label="Direct link to Windows HRESULT æ–­è¨€" title="Direct link to Windows HRESULT æ–­è¨€">â€‹</a></h3>
<p>è¯·å‚é˜… <a href="/docs/next/cpp/base/testing/kt/reference/assertions#HRESULT">Windows HRESULT æ–­è¨€</a>æ–­è¨€å‚è€ƒã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="type-assertions">ç±»å‹æ–­è¨€<a href="#type-assertions" class="hash-link" aria-label="Direct link to ç±»å‹æ–­è¨€" title="Direct link to ç±»å‹æ–­è¨€">â€‹</a></h3>
<p>æ‚¨å¯ä»¥è°ƒç”¨è¯¥å‡½æ•°</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">::testing::StaticAssertTypeEq&lt;T1, T2&gt;();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æ–­è¨€ç±»å‹<code>T1</code>å’Œ<code>T2</code>æ˜¯ç›¸åŒçš„ã€‚è¯¥å‡½æ•°ä¸æ‰§è¡Œä»»ä½•æ“ä½œï¼Œå¦‚æœæ–­è¨€å¾—åˆ°æ»¡è¶³ã€‚å¦‚æœç±»å‹ä¸åŒï¼Œå‡½æ•°è°ƒç”¨å°†
ç¼–è¯‘å¤±è´¥ï¼Œç¼–è¯‘å™¨é”™è¯¯ä¿¡æ¯ä¼šè¯´<code>T1å’ŒT2ä¸æ˜¯ç›¸åŒç±»å‹</code>å¹¶ä¸”æœ€æœ‰å¯èƒ½ï¼ˆå–å†³äºç¼–è¯‘å™¨ï¼‰å‘æ‚¨æ˜¾ç¤ºå®é™…çš„
<code>T1</code>å’Œ<code>T2</code>çš„å€¼ã€‚è¿™ä¸»è¦åœ¨æ¨¡æ¿ä»£ç ä¸­æœ‰ç”¨ã€‚</p>
<p><strong>è­¦å‘Š</strong>ï¼šåœ¨ç±»æ¨¡æ¿æˆ–å‡½æ•°çš„æˆå‘˜å‡½æ•°å†…éƒ¨ä½¿ç”¨æ—¶
æ¨¡æ¿ä¸­ï¼Œ <code>StaticAssertTypeEq&lt;T1, T2&gt;()</code> ä»…å½“å‡½æ•°ä¸º
å®ä¾‹åŒ–ã€‚ä¾‹å¦‚ï¼Œç»™å®šï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">template &lt;typename T&gt; class Foo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  void Bar() { testing::StaticAssertTypeEq&lt;int, T&gt;(); }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ä»£ç ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void Test1() { Foo&lt;bool&gt; foo; }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ä¸ä¼šç”Ÿæˆç¼–è¯‘å™¨é”™è¯¯ï¼Œå› ä¸º <code>Foo&lt;bool&gt;::Bar()</code> å®é™…ä¸Šæ°¸è¿œä¸ä¼š
å®ä¾‹åŒ–ã€‚ç›¸åï¼Œæ‚¨éœ€è¦ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void Test2() { Foo&lt;bool&gt; foo; foo.Bar(); }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>to cause a compiler error.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="assertion-placement">æ–­è¨€æ”¾ç½®<a href="#assertion-placement" class="hash-link" aria-label="Direct link to æ–­è¨€æ”¾ç½®" title="Direct link to æ–­è¨€æ”¾ç½®">â€‹</a></h3>
<p>æ‚¨å¯ä»¥åœ¨ä»»ä½• C++ å‡½æ•°ä¸­ä½¿ç”¨æ–­è¨€ã€‚ç‰¹åˆ«æ˜¯ï¼Œå®ƒä¸å¿…æ˜¯
æµ‹è¯•å¤¹å…·ç±»çš„æ–¹æ³•ã€‚ä¸€ä¸ªé™åˆ¶æ˜¯æ–­è¨€
ç”Ÿæˆè‡´å‘½æ•…éšœï¼ˆ<code>FAIL*</code>å’Œ<code>ASSERT_*</code>ï¼‰åªèƒ½ç”¨äº
è¿”å› void çš„å‡½æ•°ã€‚è¿™æ˜¯ Kumo ä¸ä½¿ç”¨çš„ç»“æœ
ä¾‹å¤–æƒ…å†µã€‚é€šè¿‡å°†å…¶æ”¾åœ¨é void å‡½æ•°ä¸­ï¼Œæ‚¨å°†å¾—åˆ°ä»¤äººå›°æƒ‘çš„ç¼–è¯‘
é”™è¯¯å°±åƒ<code>&quot;error: void value not ignored as it ought to be&quot;</code> æˆ– <code>&quot;cannot initialize return object of type &#x27;bool&#x27; with an rvalue of type &#x27;void&#x27;&quot;</code> æˆ–è€…
<code>&quot;error: no viable conversion from &#x27;void&#x27; to &#x27;string&#x27;&quot;</code>ã€‚</p>
<p>å¦‚ æœæ‚¨éœ€è¦åœ¨è¿”å›é void çš„å‡½æ•°ä¸­ä½¿ç”¨è‡´å‘½æ–­è¨€ï¼Œåˆ™ä¸€
é€‰é¡¹æ˜¯è®©å‡½æ•°è¿”å›è¾“å‡ºå‚æ•°ä¸­çš„å€¼ã€‚ä¸ºäº†
ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å°† <code>T2 Foo(T1 x)</code> é‡å†™ä¸º <code>void Foo(T1 x, T2* result)</code>ã€‚ä½ 
éœ€è¦ç¡®ä¿â€œ*ç»“æœâ€åŒ…å«ä¸€äº›åˆç†çš„å€¼ï¼Œå³ä½¿
å‡½æ•°æå‰è¿”å›ã€‚ç”±äºè¯¥å‡½æ•°ç°åœ¨è¿”å› <code>void</code>ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨
å…¶ä¸­çš„ä»»ä½•æ–­è¨€ã€‚</p>
<p>å¦‚æœæ— æ³•æ›´æ”¹å‡½æ•°çš„ç±»å‹ï¼Œåˆ™åº”è¯¥ä½¿ç”¨æ–­è¨€äº§ç”Ÿéè‡´å‘½æ•…éšœï¼Œä¾‹å¦‚<code>ADD_FAILURE*</code>å’Œ<code>EXPECT_*</code>ã€‚</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>æ³¨æ„ï¼šæ„é€ å‡½æ•°å’Œææ„å‡½æ•°ä¸è¢«è§†ä¸ºè¿”å› void çš„å‡½æ•°ï¼Œ
æ ¹æ®C++è¯­è¨€è§„èŒƒï¼Œæ‰€ä»¥ä½ ä¸èƒ½ä½¿ç”¨ fatal
å…¶ä¸­çš„æ–­è¨€ï¼›å¦‚æœä½ å°è¯•çš„è¯ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªç¼–è¯‘é”™è¯¯ã€‚ç›¸åï¼Œè¦ä¹ˆ
è°ƒç”¨<code>abort</code>å¹¶ä½¿æ•´ä¸ªæµ‹è¯•å¯æ‰§è¡Œæ–‡ä»¶å´©æºƒï¼Œæˆ–è€…å°†è‡´å‘½æ–­è¨€æ”¾å…¥
<code>SetUp</code>/<code>TearDown</code> å‡½æ•°ï¼›çœ‹
<a href="/docs/next/cpp/base/testing/kt/faq#CtorVsSetUp">æ„é€ å‡½æ•°/ææ„å‡½æ•°ä¸ <code>SetUp</code>/<code>TearDown</code></a></p></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>è­¦å‘Šï¼šè¾…åŠ©å‡½æ•°ä¸­çš„è‡´å‘½æ–­è¨€ï¼ˆç§æœ‰ void è¿”å›æ–¹æ³•ï¼‰
ä»æ„é€ å‡½æ•°æˆ–ææ„å‡½æ•°è°ƒç”¨ä¸ä¼šç»ˆæ­¢å½“å‰æµ‹è¯•ï¼Œå› ä¸º
ä½ çš„ç›´è§‰å¯èƒ½ä¼šå»ºè®®ï¼šå®ƒåªæ˜¯ä»æ„é€ å‡½æ•°è¿”å›æˆ–
å°½æ—©ææ„å‡½æ•°ï¼Œå¯èƒ½ä¼šå°†æ‚¨çš„å¯¹è±¡ç•™åœ¨éƒ¨åˆ†æ„é€ æˆ–
éƒ¨åˆ†ç ´åçŠ¶æ€ï¼æ‚¨å‡ ä¹è‚¯å®šæƒ³è¦<code>abort</code>æˆ–ä½¿ç”¨
æ”¹ä¸º<code>SetUp</code>/<code>TearDown</code>ã€‚</p></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="skipping-test-execution">è·³è¿‡æµ‹è¯•æ‰§è¡Œ<a href="#skipping-test-execution" class="hash-link" aria-label="Direct link to è·³è¿‡æµ‹è¯•æ‰§è¡Œ" title="Direct link to è·³è¿‡æµ‹è¯•æ‰§è¡Œ">â€‹</a></h2>
<p>ä¸æ–­è¨€<code>SUCCEED()</code>å’Œ<code>FAIL()</code>ç›¸å…³ï¼Œæ‚¨å¯ä»¥é˜»æ­¢è¿›ä¸€æ­¥çš„æµ‹è¯•åœ¨è¿è¡Œæ—¶ä½¿ç”¨<code>KTEST_SKIP()</code>å®æ‰§è¡Œã€‚å½“ä½ éœ€è¦æ—¶è¿™å¾ˆæœ‰ç”¨
åœ¨è¿è¡Œæ—¶æ£€æŸ¥è¢«æµ‹ç³»ç»Ÿçš„å…ˆå†³æ¡ä»¶å¹¶è·³è¿‡ä»¥æœ‰æ„ä¹‰çš„æ–¹å¼è¿›è¡Œæµ‹è¯•ã€‚</p>
<p><code>KTEST_SKIP()</code> å¯ä»¥åœ¨å•ç‹¬çš„æµ‹è¯•ç”¨ä¾‹æˆ– <code>SetUp()</code> æ–¹æ³•ä¸­ä½¿ç”¨ä» <code>::testing::Environment</code> æˆ– <code>::testing::Test</code> æ´¾ç”Ÿçš„ç±»ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">TEST(SkipTest, DoesSkip) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  KTEST_SKIP() &lt;&lt; &quot;Skipping single test&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  EXPECT_EQ(0, 1);  // Won&#x27;t fail; it won&#x27;t be executed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SkipFixture : public ::testing::Test {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> protected:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  void SetUp() override {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    KTEST_SKIP() &lt;&lt; &quot;Skipping all tests for this fixture&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Tests for SkipFixture won&#x27;t be executed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(SkipFixture, SkipsOneTest) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  EXPECT_EQ(5, 7);  // Won&#x27;t fail</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ä¸æ–­è¨€å®ä¸€æ ·ï¼Œæ‚¨å¯ä»¥å°†è‡ªå®šä¹‰æ¶ˆæ¯æµå¼ ä¼ è¾“åˆ°<code>KTEST_SKIP()</code>ä¸­ã€‚</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="teaching-kumotest-how-to-print-your-values">æŒ‡å¯¼ kumotest å¦‚ä½•æ‰“å°ä½ çš„ä»·å€¼<a href="#teaching-kumotest-how-to-print-your-values" class="hash-link" aria-label="Direct link to æŒ‡å¯¼ kumotest å¦‚ä½•æ‰“å°ä½ çš„ä»·å€¼" title="Direct link to æŒ‡å¯¼ kumotest å¦‚ä½•æ‰“å°ä½ çš„ä»·å€¼">â€‹</a></h2>
<p>å½“è¯¸å¦‚<code>EXPECT_EQ</code>ä¹‹ç±»çš„æµ‹è¯•æ–­è¨€å¤±è´¥æ—¶ï¼Œkumotest ä¼šæ‰“å°å‚æ•°å€¼æ¥å¸®åŠ©æ‚¨è°ƒè¯•ã€‚å®ƒä½¿ç”¨ç”¨æˆ·å¯æ‰©å±•çš„ä»·å€¼æ‰“å°æœºæ¥å®Œæˆæ­¤æ“ä½œã€‚</p>
<p>è¯¥æ‰“å°æœºçŸ¥é“å¦‚ä½•æ‰“å°å†…ç½® C++ ç±»å‹ã€æœ¬æœºæ•°ç»„ã€STLå®¹å™¨ä»¥åŠä»»ä½•æ”¯æŒ <code>&lt;&lt;</code> è¿ç®—ç¬¦çš„ç±»å‹ã€‚å¯¹äºå…¶ä»–ç±»å‹ï¼Œå®ƒ
æ‰“å°å€¼ä¸­çš„åŸå§‹å­—èŠ‚ï¼Œå¹¶å¸Œæœ›ç”¨æˆ·èƒ½å¤Ÿå¼„æ¸…æ¥šã€‚</p>
<p>å¦‚å‰æ‰€è¿°ï¼Œæ‰“å°æœºæ˜¯<em>å¯æ‰©å±•çš„</em>ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥æ•™å®ƒæ¯”è½¬å‚¨å­—èŠ‚æ›´å¥½åœ°æ‰“å°æ‚¨çš„ç‰¹å®šç±»å‹ã€‚åˆ°ä¸ºæ­¤ï¼Œä¸ºæ‚¨çš„ç±»å‹å®šä¹‰<code>&lt;&lt;</code>ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;ostream&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace foo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Bar {  // We want kumotest to be able to print instances of this.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Create a free inline friend function.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Bar&amp; bar) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return os &lt;&lt; bar.DebugString();  // whatever needed to print bar to os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// If you can&#x27;t declare the function in the class it&#x27;s important that the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// &lt;&lt; operator is defined in the SAME namespace that defines Bar.  C++&#x27;s look-up</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// rules rely on that.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Bar&amp; bar) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return os &lt;&lt; bar.DebugString();  // whatever needed to print bar to os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}  // namespace foo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æœ‰æ—¶ï¼Œè¿™å¯èƒ½ä¸æ˜¯ä¸€ä¸ªé€‰æ‹©ï¼šæ‚¨çš„å›¢é˜Ÿå¯èƒ½è®¤ä¸ºè¿™æ ·åšæ˜¯ä¸å¥½çš„é£æ ¼å¯¹äº<code>Bar</code>æœ‰ä¸€ä¸ª<code>&lt;&lt;</code>è¿ç®—ç¬¦ï¼Œæˆ–è€…<code>Bar</code>å¯èƒ½å·²ç»æœ‰ä¸€ä¸ª<code>&lt;&lt;</code>è¿ç®—ç¬¦
ä¸åšä½ æƒ³åšçš„äº‹ï¼ˆè€Œä¸”ä½ æ— æ³•æ”¹å˜å®ƒï¼‰ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œæ‚¨å¯ä»¥æ”¹ä¸ºå®šä¹‰ä¸€ä¸ª <code>PrintTo()</code> å‡½æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#include &lt;ostream&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace foo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Bar {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  friend void PrintTo(const Bar&amp; bar, std::ostream* os) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    *os &lt;&lt; bar.DebugString();  // whatever needed to print bar to os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// If you can&#x27;t declare the function in the class it&#x27;s important that PrintTo()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// is defined in the SAME namespace that defines Bar.  C++&#x27;s look-up rules rely</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// on that.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void PrintTo(const Bar&amp; bar, std::ostream* os) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  *os &lt;&lt; bar.DebugString();  // whatever needed to print bar to os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}  // namespace foo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å¦‚æœæ‚¨åŒæ—¶å®šä¹‰äº† <code>&lt;&lt;</code> å’Œ <code>PrintTo()</code>ï¼Œåˆ™åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å°†ä½¿ç”¨åè€…kumotest å¾ˆå…³å¿ƒã€‚è¿™å…è®¸æ‚¨è‡ªå®šä¹‰å€¼çš„æ˜¾ç¤ºæ–¹å¼
kumotest çš„è¾“å‡ºä¸ä¼šå½±å“ä¾èµ–äºå…¶è¡Œä¸ºçš„ä»£ç <code>&lt;&lt;</code> è¿ç®—ç¬¦ã€‚</p>
<p>å¦‚æœæ‚¨æƒ³è‡ªå·±ä½¿ç”¨ kumotest çš„å€¼æ‰“å°æœºæ‰“å°å€¼<code>x</code>ï¼Œåªéœ€è°ƒç”¨<code>::testing::PrintToString(x)</code>ï¼Œå®ƒè¿”å›ä¸€ä¸ª<code>std::string</code>ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vector&lt;pair&lt;Bar, int&gt; &gt; bar_ints = GetBarIntVector();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EXPECT_TRUE(IsCorrectBarIntVector(bar_ints))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;&lt; &quot;bar_ints = &quot; &lt;&lt; testing::PrintToString(bar_ints);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="death-tests">æ­»äº¡æµ‹è¯•<a href="#death-tests" class="hash-link" aria-label="Direct link to æ­»äº¡æµ‹è¯•" title="Direct link to æ­»äº¡æµ‹è¯•">â€‹</a></h2>
<p>åœ¨è®¸å¤šåº”ç”¨ç¨‹åºä¸­ï¼Œå¦‚æœå­˜åœ¨æ–­è¨€ï¼Œåˆ™å¯èƒ½ä¼šå¯¼è‡´åº”ç”¨ç¨‹åºå¤±è´¥
ä¸æ»¡è¶³æ¡ä»¶ã€‚è¿™äº›ä¸€è‡´æ€§æ£€æŸ¥å¯ç¡®ä¿ç¨‹åº
å¤„äºå·²çŸ¥çš„è‰¯å¥½çŠ¶æ€ï¼Œä¹‹åæ˜¯å¦ä¼šå°½æ—©å‡ºç°æ•…éšœ
æŸäº›ç¨‹åºçŠ¶æ€å·²æŸåã€‚å¦‚æœæ–­è¨€æ£€æŸ¥äº†é”™è¯¯çš„æ¡ä»¶ï¼Œ
é‚£ä¹ˆç¨‹åºå¯èƒ½ä¼šåœ¨é”™è¯¯çš„çŠ¶æ€ä¸‹ç»§ç»­è¿è¡Œï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´å†…å­˜
è…è´¥ã€å®‰å…¨æ¼æ´æˆ–æ›´ç³Ÿã€‚å› æ­¤ï¼Œæµ‹è¯•è¿™ä¸€ç‚¹è‡³å…³é‡è¦
è¿™æ ·çš„æ–­è¨€è¯­å¥æŒ‰é¢„æœŸå·¥ä½œã€‚</p>
<p>ç”±äºè¿™äº›å‰ææ¡ä»¶æ£€æŸ¥ä¼šå¯¼è‡´è¿›ç¨‹ç»ˆæ­¢ï¼Œå› æ­¤æˆ‘ä»¬å°†æ­¤ç±»æµ‹è¯•ç§°ä¸º
<em>æ­»äº¡æµ‹è¯•</em>ã€‚æ›´ä¸€èˆ¬åœ°è¯´ï¼Œä»»ä½•æ£€æŸ¥ç¨‹åºæ˜¯å¦ç»ˆæ­¢çš„æµ‹è¯•
ï¼ˆé™¤äº†æŠ›å‡ºå¼‚å¸¸ï¼‰ä»¥é¢„æœŸçš„æ–¹å¼ä¹Ÿæ˜¯ä¸€ä¸ªæ­»äº¡æµ‹è¯•ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œå¦‚æœä¸€æ®µä»£ç æŠ›å‡ºå¼‚å¸¸ï¼Œæˆ‘ä»¬ä¸è®¤ä¸ºå®ƒæ˜¯â€œæ­»äº¡â€
å‡ºäºæ­»äº¡æµ‹è¯•çš„ç›®çš„ï¼Œå› ä¸ºä»£ç çš„è°ƒç”¨è€…å¯ä»¥æ•è·
å¼‚å¸¸å¹¶é¿å…å´©æºƒã€‚å¦‚æœä½ æƒ³éªŒè¯ä½ çš„æŠ›å‡ºçš„å¼‚å¸¸
ä»£ç ï¼Œè¯·å‚é˜…<a href="#exception-assertions">å¼‚å¸¸æ–­è¨€</a>ã€‚</p>
<p>å¦‚æœæ‚¨æƒ³åœ¨æµ‹è¯•ä»£ç ä¸­æµ‹è¯•<code>EXPECT_*()/ASSERT_*()</code>å¤±è´¥ï¼Œè¯·å‚é˜…<a href="#catching-failures"><code>æ•æ‰</code>å¤±è´¥</a>ã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-to-write-a-death-test">å¦‚ä½•ç¼–å†™æ­»äº¡æµ‹è¯•<a href="#how-to-write-a-death-test" class="hash-link" aria-label="Direct link to å¦‚ä½•ç¼–å†™æ­»äº¡æµ‹è¯•" title="Direct link to å¦‚ä½•ç¼–å†™æ­»äº¡æµ‹è¯•">â€‹</a></h3>
<p>KumoTest æä¾›æ–­è¨€å®æ¥æ”¯æŒæ­»äº¡æµ‹è¯•ã€‚çœ‹æ–­è¨€å‚è€ƒä¸­çš„ <a href="/docs/next/cpp/base/testing/kt/reference/assertions#death">æ­»äº¡æ–­è¨€</a>
äº†è§£è¯¦æƒ…ã€‚</p>
<p>è¦ç¼–å†™æ­»äº¡æµ‹è¯•ï¼Œåªéœ€ä½¿ç”¨æµ‹è¯•å‡½æ•°ä¸­çš„å®ä¹‹ä¸€å³å¯ã€‚
ä¾‹å¦‚ï¼Œ</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">TEST(MyDeathTest, Foo) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // This death test uses a compound statement.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ASSERT_DEATH({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    int n = 5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Foo(&amp;n);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }, &quot;Error on line .* of Foo()&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST(MyDeathTest, NormalExit) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  EXPECT_EXIT(NormalExit(), testing::ExitedWithCode(0), &quot;Success&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST(MyDeathTest, KillProcess) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  EXPECT_EXIT(KillProcess(), testing::KilledBySignal(SIGKILL),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;Sending myself unblockable signal&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>éªŒè¯ï¼š</p>
<ul>
<li>è°ƒç”¨ <code>Foo(5)</code> ä¼šå¯¼è‡´è¿›ç¨‹ç»ˆæ­¢å¹¶æ˜¾ç¤ºç»™å®šçš„é”™è¯¯æ¶ˆæ¯ï¼Œ</li>
<li>è°ƒç”¨ <code>NormalExit()</code> ä¼šå¯¼è‡´è¿›ç¨‹å°† <code>&quot;Success&quot;</code> æ‰“å°åˆ° stderr å¹¶ä»¥é€€å‡ºä»£ç  0 é€€å‡ºï¼Œå¹¶ä¸”</li>
<li>è°ƒç”¨ <code>KillProcess()</code> é€šè¿‡ä¿¡å· <code>SIGKILL</code> ç»ˆæ­¢è¿›ç¨‹ã€‚</li>
</ul>
<p>æµ‹è¯•å‡½æ•°ä½“è¿˜å¯ä»¥åŒ…å«å…¶ä»–æ–­è¨€å’Œè¯­å¥ï¼Œå¦‚æœå¿…è¦çš„ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œæ­»äº¡æµ‹è¯•åªå…³å¿ƒä¸‰ä»¶äº‹ï¼š</p>
<p>1.<code>statement</code>æ˜¯å¦ä¸­æ­¢æˆ–é€€å‡ºè¿›ç¨‹ï¼Ÿ
2.ï¼ˆåœ¨<code>ASSERT_EXIT</code>å’Œ<code>EXPECT_EXIT</code>çš„æƒ…å†µä¸‹ï¼‰æ‰§è¡Œé€€å‡ºçŠ¶æ€æ»¡è¶³<code>è°“è¯</code>ï¼Ÿæˆ–è€…ï¼ˆåœ¨<code>ASSERT_DEATH</code>å’Œ<code>EXPECT_DEATH</code>çš„æƒ…å†µä¸‹ï¼‰
é€€å‡ºçŠ¶æ€éé›¶å—ï¼Ÿå’Œ
3. stderr è¾“å‡ºæ˜¯å¦ä¸<code>matcher</code>åŒ¹é…ï¼Ÿ</p>
<p>ç‰¹åˆ«æ˜¯ï¼Œå¦‚æœ<code>statement</code>ç”Ÿæˆ<code>ASSERT_*</code>æˆ–<code>EXPECT_*</code>å¤±è´¥ï¼Œåˆ™å®ƒä¸ä¼š**å¯¼è‡´æ­»äº¡æµ‹è¯•å¤±è´¥ï¼Œå› ä¸º kumotest æ–­è¨€ä¸ä¼šä¸­æ­¢
çš„è¿‡ç¨‹ã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="death-test-naming">æ­»äº¡æµ‹è¯•å‘½å<a href="#death-test-naming" class="hash-link" aria-label="Direct link to æ­»äº¡æµ‹è¯•å‘½å" title="Direct link to æ­»äº¡æµ‹è¯•å‘½å">â€‹</a></h3>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>é‡è¦æç¤º</div><div class="admonitionContent_BuS1"><p>æˆ‘ä»¬å¼ºçƒˆå»ºè®®æ‚¨éµå¾ªå‘½åçº¦å®š
<strong>æµ‹è¯•å¥—ä»¶</strong>ï¼ˆä¸æ˜¯æµ‹è¯•ï¼‰<em><code>DeathTest</code></em>ï¼Œå½“å®ƒåŒ…å«æ­»äº¡æµ‹è¯•æ—¶ï¼Œå¦‚
åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­æ¼”ç¤ºäº†ã€‚è¿™
ä¸‹é¢çš„<a href="#death-tests-and-threads">æ­»äº¡æµ‹è¯•å’Œçº¿ç¨‹</a> éƒ¨åˆ†è§£é‡Šäº†åŸå› ã€‚</p></div></div>
<p>å¦‚æœæ­£å¸¸æµ‹è¯•å’Œæ­»äº¡æµ‹è¯•å…±äº«ä¸€ä¸ªæµ‹è¯•å¤¹å…·ç±»ï¼Œåˆ™å¯ä»¥ä½¿ç”¨
<code>using</code> æˆ– <code>typedef</code> ä¸ºå¤¹å…·ç±»å¼•å…¥åˆ«åå¹¶é¿å…
å¤åˆ¶å…¶ä»£ç ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class FooTest : public testing::Test { ... };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using FooDeathTest = FooTest;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(FooTest, DoesThis) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // normal test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(FooDeathTest, DoesThat) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // death test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="regular-expression-syntax">æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•<a href="#regular-expression-syntax" class="hash-link" aria-label="Direct link to æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•" title="Direct link to æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•">â€‹</a></h3>
<p>å¯¹äº POSIX ç³»ç»Ÿï¼ˆLinuxã€Cygwinã€Macï¼‰ï¼Œkumotest ä½¿ç”¨
<a href="http://www.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap09.html#tag_09_04" target="_blank" rel="noopener noreferrer">POSIXæ‰©å±•æ­£åˆ™è¡¨è¾¾å¼</a>
å¥æ³•ã€‚è¦äº†è§£ POSIX è¯­æ³•ï¼Œæ‚¨å¯èƒ½éœ€è¦é˜…è¯»æ­¤å†…å®¹
<a href="http://en.wikipedia.org/wiki/Regular_expression#POSIX_Extended_Regular_Expressions" target="_blank" rel="noopener noreferrer">ç»´åŸºç™¾ç§‘æ¡ç›®</a>ã€‚</p>
<p>åœ¨ Windows ä¸Šï¼Œkumotest ä½¿ç”¨è‡ªå·±çš„ç®€å•æ­£åˆ™è¡¨è¾¾å¼å®ç°ã€‚å®ƒç¼ºä¹è®¸å¤šåŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä¸æ”¯æŒ union (<code>&quot;x|y&quot;</code>)ã€åˆ†ç»„
(<code>&quot;(xy)&quot;</code>)  ã€æ‹¬å· (<code>&quot;[xy]&quot;</code>) å’Œé‡å¤æ¬¡æ•° (<code>&quot;x{5,7}&quot;</code>)ï¼Œå…¶ä¸­å…¶ä»–çš„ã€‚ä»¥ä¸‹æ˜¯æˆ‘ä»¬æ”¯æŒçš„å†…å®¹ï¼ˆâ€œAâ€è¡¨ç¤ºæ–‡å­—å­—ç¬¦ï¼Œå¥ç‚¹
(<code>.</code>)ï¼Œæˆ–å•ä¸ª <code>\\</code> è½¬ä¹‰åºåˆ—ï¼› <code>x</code> å’Œ <code>y</code> è¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼ã€‚ï¼‰ï¼š</p>
<table><thead><tr><th>è¡¨è¾¾å¼</th><th>æ„ä¹‰</th></tr></thead><tbody><tr><td><code>c</code></td><td>åŒ¹é…ä»»ä½•æ–‡å­—å­—ç¬¦â€œcâ€</td></tr><tr><td><code>\\d</code></td><td>åŒ¹é…ä»»ä½•åè¿›åˆ¶æ•°å­—</td></tr><tr><td><code>\\D</code></td><td>åŒ¹é…ä»»ä½•éåè¿›åˆ¶æ•°å­—çš„å­—ç¬¦</td></tr><tr><td><code>\\f</code></td><td>åŒ¹é…<code>\f</code></td></tr><tr><td><code>\\n</code></td><td>åŒ¹é… <code>\n</code></td></tr><tr><td><code>\\r</code></td><td>åŒ¹é… <code>\r</code></td></tr><tr><td><code>\\s</code></td><td>åŒ¹é…ä»»ä½• ASCII ç©ºæ ¼ï¼ŒåŒ…æ‹¬ <code>\n</code></td></tr><tr><td><code>\\S</code></td><td>åŒ¹é…ä»»ä½•ä¸æ˜¯ç©ºæ ¼çš„å­—ç¬¦</td></tr><tr><td><code>\\t</code></td><td>åŒ¹é… <code>\t</code></td></tr><tr><td><code>\\v</code></td><td>åŒ¹é… <code>\v</code></td></tr><tr><td><code>\\w</code></td><td>åŒ¹é…ä»»ä½•å­—æ¯ã€<code>_</code>æˆ–åè¿›åˆ¶æ•°å­—</td></tr><tr><td><code>\\W</code></td><td>åŒ¹é…<code>\\w</code>ä¸åŒ¹é…çš„ä»»ä½•å­—ç¬¦</td></tr><tr><td><code>\\c</code></td><td>åŒ¹é…ä»»ä½•æ–‡å­—å­—ç¬¦<code>c</code>ï¼Œå®ƒå¿…é¡»æ˜¯æ ‡ç‚¹ç¬¦å·</td></tr><tr><td><code>.</code></td><td>åŒ¹é…é™¤<code>\n</code>ä¹‹å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦</td></tr><tr><td><code>A?</code></td><td>åŒ¹é… 0 æˆ– 1 æ¬¡å‡ºç°çš„<code>A</code></td></tr><tr><td><code>A*</code></td><td>åŒ¹é… 0 æ¬¡æˆ–å¤šæ¬¡å‡ºç°çš„<code>A</code></td></tr><tr><td><code>A+</code></td><td>åŒ¹é… 1 æ¬¡æˆ–å¤šæ¬¡å‡ºç°çš„<code>A</code></td></tr><tr><td><code>^</code></td><td>åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å¤´ï¼ˆä¸æ˜¯æ¯è¡Œçš„å¼€å¤´ï¼‰</td></tr><tr><td><code>$</code></td><td>åŒ¹é…å­—ç¬¦ä¸²çš„ç»“å°¾ï¼ˆä¸æ˜¯æ¯ä¸€è¡Œçš„ç»“å°¾ï¼‰</td></tr><tr><td><code>xy</code></td><td>åŒ¹é…<code>x</code>åè·Ÿ<code>y</code></td></tr></tbody></table>
<p>ä¸ºäº†å¸®åŠ©æ‚¨ç¡®å®šç³»ç»Ÿä¸Šå¯ç”¨çš„åŠŸèƒ½ï¼Œkumotest
å®šä¹‰å®æ¥æ§åˆ¶å®ƒä½¿ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚å®æ˜¯ï¼š
<code>KTEST_USES_SIMPLE_RE=1</code> æˆ– <code>KTEST_USES_POSIX_RE=1</code>ã€‚å¦‚æœä½ æƒ³è¦ä½ çš„æ­»
æµ‹è¯•åœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½æœ‰æ•ˆï¼Œæ‚¨å¯ä»¥åœ¨è¿™äº›å®ä¸Šä½¿ç”¨â€œ#ifâ€æˆ–ä½¿ç”¨ more
ä»…æœ‰é™è¯­æ³•ã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-it-works">å®ƒæ˜¯å¦‚ä½•è¿ä½œçš„<a href="#how-it-works" class="hash-link" aria-label="Direct link to å®ƒæ˜¯å¦‚ä½•è¿ä½œçš„" title="Direct link to å®ƒæ˜¯å¦‚ä½•è¿ä½œçš„">â€‹</a></h3>
<p>è¯·å‚é˜…æ–­è¨€ä¸­çš„<a href="/docs/next/cpp/base/testing/kt/reference/assertions#death">æ­»äº¡æ–­è¨€</a>å‚è€ƒã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="death-tests-and-threads">æ­»äº¡æµ‹è¯•å’Œçº¿ç¨‹<a href="#death-tests-and-threads" class="hash-link" aria-label="Direct link to æ­»äº¡æµ‹è¯•å’Œçº¿ç¨‹" title="Direct link to æ­»äº¡æµ‹è¯•å’Œçº¿ç¨‹">â€‹</a></h3>
<p>ä¸¤ç§æ­»äº¡æµ‹è¯•é£æ ¼çš„åŸå› ä¸çº¿ç¨‹å®‰å…¨æœ‰å…³ã€‚ç”±äºåœ¨çº¿ç¨‹å­˜åœ¨çš„æƒ…å†µä¸‹åˆ†å‰çš„ä¼—æ‰€å‘¨çŸ¥çš„é—®é¢˜ï¼Œæ­»äº¡æµ‹è¯•åº”è¯¥
åœ¨å•çº¿ç¨‹ä¸Šä¸‹æ–‡ä¸­è¿è¡Œã€‚ç„¶è€Œï¼Œæœ‰æ—¶è¿™æ˜¯ä¸å¯è¡Œçš„å®‰æ’è¿™æ ·çš„ç¯å¢ƒã€‚ä¾‹å¦‚ï¼Œé™æ€åˆå§‹åŒ–çš„æ¨¡å—
å¯èƒ½ä¼šåœ¨åˆ°è¾¾ main ä¹‹å‰å¯åŠ¨çº¿ç¨‹ã€‚ä¸€æ—¦åˆ›å»ºäº†çº¿ç¨‹ï¼Œæ¸…ç†å®ƒä»¬å¯èƒ½å¾ˆå›°éš¾æˆ–ä¸å¯èƒ½ã€‚</p>
<p>kumotest å…·æœ‰ä¸‰ä¸ªæ—¨åœ¨æé«˜å¯¹çº¿ç¨‹é—®é¢˜çš„è®¤è¯†çš„åŠŸèƒ½ã€‚</p>
<ol>
<li>æ­»äº¡æµ‹è¯•æ—¶ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹æ­£åœ¨è¿è¡Œï¼Œåˆ™ä¼šå‘å‡ºè­¦å‘Šé­é‡ã€‚</li>
<li>åç§°ä»¥â€œDeathTestâ€ç»“å°¾çš„æµ‹è¯•å¥—ä»¶åœ¨æ‰€æœ‰å…¶ä»–æµ‹è¯•å¥—ä»¶ä¹‹å‰è¿è¡Œæµ‹è¯•ã€‚</li>
<li>å®ƒä½¿ç”¨ <code>clone()</code> è€Œä¸æ˜¯ <code>fork()</code> åœ¨ Linux ä¸Šç”Ÿæˆå­è¿›ç¨‹ï¼ˆ<code>clone()</code> åœ¨ Cygwin å’Œ Mac ä¸Šä¸å¯ç”¨ï¼‰ï¼Œå› ä¸º <code>fork()</code> æ›´æœ‰å¯èƒ½
å½“çˆ¶è¿›ç¨‹æœ‰å¤šä¸ªçº¿ç¨‹æ—¶å¯¼è‡´å­è¿›ç¨‹æŒ‚èµ·ã€‚</li>
</ol>
<p>åœ¨æ­»äº¡æµ‹è¯•è¯­å¥ä¸­åˆ›å»ºçº¿ç¨‹æ˜¯å®Œå…¨å¯ä»¥çš„ï¼›ä»–ä»¬æ˜¯åœ¨å•ç‹¬çš„è¿›ç¨‹ä¸­æ‰§è¡Œï¼Œä¸ä¼šå½±å“çˆ¶è¿›ç¨‹ã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="death-test-styles">æ­»äº¡æµ‹è¯•é£æ ¼<a href="#death-test-styles" class="hash-link" aria-label="Direct link to æ­»äº¡æµ‹è¯•é£æ ¼" title="Direct link to æ­»äº¡æµ‹è¯•é£æ ¼">â€‹</a></h3>
<p>å¼•å…¥<code>threadsafe</code>æ­»äº¡æµ‹è¯•é£æ ¼æ˜¯ä¸ºäº†å¸®åŠ©ç¼“è§£åœ¨å¯èƒ½çš„å¤šçº¿ç¨‹ç¯å¢ƒä¸­è¿›è¡Œæµ‹è¯•çš„é£é™©ã€‚äº¤æ˜“é‡å¢åŠ 
æµ‹è¯•æ‰§è¡Œæ—¶é—´ï¼ˆå¯èƒ½ä¼šæ˜¾ç€å¢åŠ ï¼‰ä»¥æé«˜çº¿ç¨‹å®‰å…¨æ€§ã€‚</p>
<p>è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ä¸è®¾ç½®æ ·å¼æ ‡å¿—ã€‚æ‚¨å¯ä»¥é€‰æ‹©ä¸€ä¸ªé€šè¿‡ä»¥ç¼–ç¨‹æ–¹å¼è®¾ç½®æ ‡å¿—æ¥è¿›è¡Œç‰¹å®šç±»å‹çš„æ­»äº¡æµ‹è¯•ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">KTEST_FLAG_SET(death_test_style, &quot;threadsafe&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æ‚¨å¯ä»¥åœ¨<code>main()</code>ä¸­æ‰§è¡Œæ­¤æ“ä½œæ¥è®¾ç½®äºŒè¿›åˆ¶æ–‡ä»¶ä¸­æ‰€æœ‰æ­»äº¡æµ‹è¯•çš„æ ·å¼ï¼Œæˆ–åœ¨ä¸ªåˆ«æµ‹è¯•ä¸­ã€‚å›æƒ³ä¸€ä¸‹ï¼Œåœ¨è¿è¡Œæ¯ä¸ªæµ‹è¯•ä¹‹å‰ä¼šä¿å­˜æ ‡å¿—
ä¹‹åæ¢å¤ï¼Œå› æ­¤æ‚¨æ— éœ€è‡ªå·±æ‰§è¡Œæ­¤æ“ä½œã€‚ä¾‹å¦‚ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">int main(int argc, char** argv) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  testing::InitKumoTest(&amp;argc, argv);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  KTEST_FLAG_SET(death_test_style, &quot;fast&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return RUN_ALL_TESTS();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST(MyDeathTest, TestOne) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  KTEST_FLAG_SET(death_test_style, &quot;threadsafe&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // This test is run in the &quot;threadsafe&quot; style:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ASSERT_DEATH(ThisShouldDie(), &quot;&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST(MyDeathTest, TestTwo) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // This test is run in the &quot;fast&quot; style:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ASSERT_DEATH(ThisShouldDie(), &quot;&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="caveats">æ³¨æ„äº‹é¡¹<a href="#caveats" class="hash-link" aria-label="Direct link to æ³¨æ„äº‹é¡¹" title="Direct link to æ³¨æ„äº‹é¡¹">â€‹</a></h3>
<p><code>ASSERT_EXIT()</code>çš„<code>statement</code>å‚æ•°å¯ä»¥æ˜¯ä»»ä½•æœ‰æ•ˆçš„ C++ è¯­å¥ã€‚å¦‚æœ
å®ƒé€šè¿‡<code>return</code>è¯­å¥æˆ–æŠ›å‡ºä¸€ä¸ªç¦»å¼€å½“å‰å‡½æ•°
ä¾‹å¤–ï¼Œæ­»äº¡æµ‹è¯•è¢«è®¤ä¸ºå¤±è´¥ã€‚ä¸€äº› kumotest å®
å¯èƒ½ä»å½“å‰å‡½æ•°è¿”å›ï¼ˆä¾‹å¦‚<code>ASSERT_TRUE()</code>ï¼‰ï¼Œæ‰€ä»¥ä¸€å®šè¦é¿å…
ä»–ä»¬åœ¨<code>statement</code>ä¸­ã€‚</p>
<p>ç”±äº<code>statement</code>åœ¨å­è¿›ç¨‹ä¸­è¿è¡Œï¼Œä»»ä½•å†…å­˜ä¸­çš„å‰¯ä½œç”¨ï¼ˆä¾‹å¦‚
ä¿®æ”¹å˜é‡ã€é‡Šæ”¾å†…å­˜ç­‰ï¼‰ä¼šå¯¼è‡´<code>ä¸</code>è¢«è§‚å¯Ÿåˆ°
åœ¨çˆ¶è¿›ç¨‹ä¸­ã€‚ç‰¹åˆ«æ˜¯ï¼Œå¦‚æœä½ åœ¨æ­»äº¡æµ‹è¯•ä¸­é‡Šæ”¾è®°å¿†ï¼Œ
æ‚¨çš„ç¨‹åºå°†æ— æ³•é€šè¿‡å †æ£€æŸ¥ï¼Œå› ä¸ºçˆ¶è¿›ç¨‹æ°¸è¿œä¸ä¼šçœ‹åˆ°
è®°å¿†è¢«å›æ”¶ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ‚¨å¯ä»¥</p>
<ol>
<li>æ­»äº¡æµ‹è¯•ä¸­å°½é‡ä¸è¦é‡Šæ”¾å†…å­˜ï¼›</li>
<li>åœ¨çˆ¶è¿›ç¨‹ä¸­å†æ¬¡é‡Šæ”¾å†…å­˜ï¼›æˆ–è€…</li>
<li>ä¸è¦åœ¨ç¨‹åºä¸­ä½¿ç”¨å †æ£€æŸ¥å™¨ã€‚</li>
</ol>
<p>ç”±äºå®ç°ç»†èŠ‚ï¼Œæ‚¨æ— æ³•æ”¾ç½®å¤šä¸ªæ­»äº¡æµ‹è¯•æ–­è¨€åœ¨åŒä¸€æ¡çº¿ä¸Šï¼›å¦åˆ™ï¼Œç¼–è¯‘å°†å¤±è´¥å¹¶å‡ºç°ä¸æ˜æ˜¾çš„é”™è¯¯
ä¿¡æ¯ã€‚</p>
<p>å°½ç®¡<code>&quot;threadsafe&quot;</code>æ­»äº¡æ–¹å¼æé«˜äº†çº¿ç¨‹å®‰å…¨æ€§æµ‹è¯•å‘ç°ï¼Œåœ¨å­˜åœ¨ä»¥ä¸‹æƒ…å†µçš„æƒ…å†µä¸‹ï¼Œä»ç„¶å¯èƒ½å‡ºç°æ­»é”ç­‰çº¿ç¨‹é—®é¢˜
ä½¿ç”¨<code>â€œpthread_atfork(3)â€</code>æ³¨å†Œçš„å¤„ç†ç¨‹åºã€‚</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="using-assertions-in-sub-routines">åœ¨å­ä¾‹ç¨‹ä¸­ä½¿ç”¨æ–­è¨€<a href="#using-assertions-in-sub-routines" class="hash-link" aria-label="Direct link to åœ¨å­ä¾‹ç¨‹ä¸­ä½¿ç”¨æ–­è¨€" title="Direct link to åœ¨å­ä¾‹ç¨‹ä¸­ä½¿ç”¨æ–­è¨€">â€‹</a></h2>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>å¦‚æœä½ æƒ³åœ¨å­ç¨‹åºä¸­æ”¾å…¥ä¸€ç³»åˆ—æµ‹è¯•æ–­è¨€æ¥æ£€æŸ¥
å¯¹äºå¤æ‚çš„æ¡ä»¶ï¼Œè¯·è€ƒè™‘ä½¿ç”¨
<a href="/docs/next/cpp/base/testing/kt/kmock_cook_book#NewMatchers">è‡ªå®šä¹‰ KMock åŒ¹é…å™¨</a>ã€‚è¿™å¯ä»¥è®©ä½ 
åœ¨å‘ç”Ÿæ•…éšœæ—¶æä¾›æ›´å…·å¯è¯»æ€§çš„é”™è¯¯æ¶ˆæ¯å¹¶é¿å…æ‰€æœ‰
é—®é¢˜å¦‚ä¸‹æ‰€è¿°ã€‚</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="adding-traces-to-assertions">å‘æ–­è¨€æ·»åŠ è·Ÿè¸ª<a href="#adding-traces-to-assertions" class="hash-link" aria-label="Direct link to å‘æ–­è¨€æ·»åŠ è·Ÿè¸ª" title="Direct link to å‘æ–­è¨€æ·»åŠ è·Ÿè¸ª">â€‹</a></h3>
<p>å¦‚æœä»å¤šä¸ªåœ°æ–¹è°ƒç”¨æµ‹è¯•å­ä¾‹ç¨‹ï¼Œå½“å…¶ä¸­çš„æ–­è¨€å¤±è´¥ï¼Œå¾ˆéš¾åˆ¤æ–­å¤±è´¥çš„æ˜¯å­ä¾‹ç¨‹çš„å“ªä¸ªè°ƒç”¨
ä»ã€‚æ‚¨å¯ä»¥ä½¿ç”¨é¢å¤–çš„æ—¥å¿—è®°å½•æˆ–è‡ªå®šä¹‰å¤±è´¥æ¥ç¼“è§£æ­¤é—®é¢˜æ¶ˆæ¯ï¼Œä½†è¿™é€šå¸¸ä¼šè®©ä½ çš„æµ‹è¯•å˜å¾—æ··ä¹±ã€‚æ›´å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨
<code>SCOPED_TRACE</code> å®æˆ– <code>ScopedTrace</code> å®ç”¨ç¨‹åºï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SCOPED_TRACE(message);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ScopedTrace trace(&quot;file_path&quot;, line_number, message);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å…¶ä¸­<code>message</code>å¯ä»¥æ˜¯ä»»ä½•å¯æµå¼ä¼ è¾“åˆ°<code>std::ostream</code>çš„å†…å®¹ã€‚ <code>èŒƒå›´è·Ÿè¸ª</code>
å®å°†å¯¼è‡´å½“å‰æ–‡ä»¶åã€è¡Œå·å’Œç»™å®šæ¶ˆæ¯
æ·»åŠ åˆ°æ¯ä¸ªå¤±è´¥æ¶ˆæ¯ä¸­ã€‚ <code>ScopedTrace</code> æ¥å—æ˜ç¡®çš„æ–‡ä»¶åå¹¶ä¸”
å‚æ•°ä¸­çš„è¡Œå·ï¼Œè¿™å¯¹äºç¼–å†™æµ‹è¯•åŠ©æ‰‹å¾ˆæœ‰ç”¨ã€‚æ•ˆæœ
å½“æ§ä»¶ç¦»å¼€å½“å‰è¯æ³•èŒƒå›´æ—¶å°†è¢«æ’¤æ¶ˆã€‚</p>
<p>ä¾‹å¦‚ï¼Œ</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">10: void Sub1(int n) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11:   EXPECT_EQ(Bar(n), 1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">12:   EXPECT_EQ(Bar(n + 1), 2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">13: }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">14:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">15: TEST(FooTest, Bar) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">16:   {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">17:     SCOPED_TRACE(&quot;A&quot;);  // This trace point will be included in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">18:                         // every failure in this scope.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">19:     Sub1(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">20:   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">21:   // Now it won&#x27;t.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">22:   Sub1(9);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">23: }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>could result in messages like these:</p>
<div class="language-none codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-none codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">path/to/foo_test.cc:11: Failure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Value of: Bar(n)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Expected: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Actual: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Kumo Test trace:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path/to/foo_test.cc:17: A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path/to/foo_test.cc:12: Failure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Value of: Bar(n + 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Expected: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Actual: 3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å¦‚æœæ²¡æœ‰ç—•è¿¹ï¼Œå°±å¾ˆéš¾çŸ¥é“æ˜¯å“ªä¸ªè°ƒç”¨ä¸¤æ¬¡å¤±è´¥åˆ†åˆ«æ¥è‡ª<code>Sub1()</code>ã€‚ ï¼ˆæ‚¨å¯ä»¥æ·»åŠ ä¸€ä¸ªé¢å¤–çš„
å‘<code>Sub1()</code>ä¸­çš„æ¯ä¸ªæ–­è¨€å‘é€æ¶ˆæ¯ä»¥æŒ‡ç¤º<code>n</code>çš„å€¼ï¼Œä½†é‚£å°±æ˜¯ä¹å‘³ã€‚ï¼‰</p>
<p>å…³äºä½¿ç”¨<code>SCOPED_TRACE</code>çš„ä¸€äº›æç¤ºï¼š</p>
<ol>
<li>æœ‰äº†åˆé€‚çš„æ¶ˆæ¯ï¼Œé€šå¸¸ä½¿ç”¨<code>SCOPED_TRACE</code>å°±è¶³å¤Ÿäº†
å­ä¾‹ç¨‹çš„å¼€å§‹ï¼Œè€Œä¸æ˜¯åœ¨æ¯ä¸ªè°ƒç”¨ç«™ç‚¹ã€‚</li>
<li>åœ¨å¾ªç¯å†…è°ƒç”¨å­ä¾‹ç¨‹æ—¶ï¼Œä½¿å¾ªç¯è¿­ä»£å™¨æˆä¸ºå¾ªç¯è¿­ä»£å™¨çš„ä¸€éƒ¨åˆ†
<code>SCOPED_TRACE</code> ä¸­çš„æ¶ˆæ¯ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥çŸ¥é“å“ªä¸ªè¿­ä»£å¤±è´¥
æ˜¯ä».</li>
<li>æœ‰æ—¶è·Ÿè¸ªç‚¹çš„è¡Œå·è¶³ä»¥è¯†åˆ«
å­ä¾‹ç¨‹çš„ç‰¹æ®Šè°ƒç”¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨ä¸å¿…
ä¸º<code>SCOPED_TRACE</code>é€‰æ‹©ä¸€ä¸ªå”¯ä¸€çš„æ¶ˆæ¯ã€‚æ‚¨å¯ä»¥ç®€å•åœ°ä½¿ç”¨<code>&quot;&quot;</code>ã€‚</li>
<li>å½“å¤–éƒ¨ä½œç”¨åŸŸä¸­æœ‰ä¸€ä¸ªæ—¶ï¼Œæ‚¨å¯ä»¥åœ¨å†…éƒ¨ä½œç”¨åŸŸä¸­ä½¿ç”¨<code>SCOPED_TRACE</code>
èŒƒå›´ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‰€æœ‰æ´»åŠ¨è·Ÿè¸ªç‚¹éƒ½å°†åŒ…å«åœ¨æ•…éšœä¸­
æ¶ˆæ¯ï¼ŒæŒ‰ç…§å®ƒä»¬é‡åˆ°çš„ç›¸åé¡ºåºã€‚</li>
<li>è·Ÿè¸ªè½¬å‚¨åœ¨ Emacs   ä¸­æ˜¯å¯ç‚¹å‡»çš„ - åœ¨è¡Œå·ä¸Šç‚¹å‡»<code>return</code>å¹¶
æ‚¨å°†è¢«å¸¦åˆ°æºæ–‡ä»¶ä¸­çš„è¯¥è¡Œï¼</li>
</ol>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="propagating-fatal-failures">ä¼ æ’­è‡´å‘½æ•…éšœ<a href="#propagating-fatal-failures" class="hash-link" aria-label="Direct link to ä¼ æ’­è‡´å‘½æ•…éšœ" title="Direct link to ä¼ æ’­è‡´å‘½æ•…éšœ">â€‹</a></h3>
<p>ä½¿ç”¨<code>ASSERT_*</code>å’Œ<code>FAIL*</code>æ—¶çš„ä¸€ä¸ªå¸¸è§é™·é˜±æ˜¯ä¸ç†è§£å½“å®ƒä»¬å¤±è´¥æ—¶ï¼Œå®ƒä»¬åªä¼šä¸­æ­¢_å½“å‰å‡½æ•°_ï¼Œè€Œä¸æ˜¯æ•´ä¸ªæµ‹è¯•ã€‚ä¸ºäº†
ä¾‹å¦‚ï¼Œä»¥ä¸‹æµ‹è¯•å°†å‡ºç°æ®µé”™è¯¯ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">void Subroutine() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Generates a fatal failure and aborts the current function.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ASSERT_EQ(1, 2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // The following won&#x27;t be executed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST(FooTest, Bar) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Subroutine();  // The intended behavior is for the fatal failure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 // in Subroutine() to abort the entire test.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // The actual behavior: the function goes on after Subroutine() returns.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int* p = nullptr;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  *p = 3;  // Segfault!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ä¸ºäº†ç¼“è§£è¿™ä¸ªé—®é¢˜ï¼Œkumotest æä¾›äº†ä¸‰ç§ä¸åŒçš„è§£å†³æ–¹æ¡ˆã€‚ä½ å¯ä»¥ä½¿ç”¨å¼‚å¸¸ã€<code>(ASSERT|EXPECT)_NO_FATAL_FAILURE</code>æ–­è¨€æˆ–
<code>HasFatalFailure()</code> å‡½æ•°ã€‚å®ƒä»¬åœ¨ä¸‹é¢ä¸¤ä¸ªä¸­æè¿°å°èŠ‚ã€‚</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="asserting-on-subroutines-with-an-exception">å¯¹æœ‰å¼‚å¸¸çš„å­ä¾‹ç¨‹è¿›è¡Œæ–­è¨€<a href="#asserting-on-subroutines-with-an-exception" class="hash-link" aria-label="Direct link to å¯¹æœ‰å¼‚å¸¸çš„å­ä¾‹ç¨‹è¿›è¡Œæ–­è¨€" title="Direct link to å¯¹æœ‰å¼‚å¸¸çš„å­ä¾‹ç¨‹è¿›è¡Œæ–­è¨€">â€‹</a></h4>
<p>ä»¥ä¸‹ä»£ç   å¯ä»¥å°† ASSERT-failure è½¬å˜ä¸ºå¼‚å¸¸ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class ThrowListener : public testing::EmptyTestEventListener {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  void OnTestPartResult(const testing::TestPartResult&amp; result) override {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (result.type() == testing::TestPartResult::kFatalFailure) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      throw testing::AssertionException(result);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int main(int argc, char** argv) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  testing::UnitTest::GetInstance()-&gt;listeners().Append(new ThrowListener);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return RUN_ALL_TESTS();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å¦‚æœæœ‰å…¶ä»–ä¾¦å¬å™¨ï¼Œåˆ™åº”å°†æ­¤ä¾¦å¬å™¨æ·»åŠ åˆ°å…¶ä»–ä¾¦å¬å™¨ä¹‹åï¼Œå¦åˆ™
ä»–ä»¬ä¸ä¼šçœ‹åˆ°å¤±è´¥çš„<code>OnTestPartResult</code>ã€‚</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="asserting-on-subroutines">å¯¹å­ä¾‹ç¨‹è¿›è¡Œæ–­è¨€<a href="#asserting-on-subroutines" class="hash-link" aria-label="Direct link to å¯¹å­ä¾‹ç¨‹è¿›è¡Œæ–­è¨€" title="Direct link to å¯¹å­ä¾‹ç¨‹è¿›è¡Œæ–­è¨€">â€‹</a></h4>
<p>å¦‚ä¸Šæ‰€ç¤ºï¼Œå¦‚æœæ‚¨çš„æµ‹è¯•è°ƒç”¨ä¸€ä¸ªå‡ºç° <code>ASSERT_*</code> å¤±è´¥çš„å­ä¾‹ç¨‹å…¶ä¸­ï¼Œå­ç¨‹åºè¿”å›åæµ‹è¯•å°†ç»§ç»­ã€‚è¿™å¯èƒ½ä¸æ˜¯ä»€ä¹ˆ
ä½ æƒ³è¦çš„ã€‚</p>
<p>äººä»¬å¸¸å¸¸å¸Œæœ›è‡´å‘½çš„å¤±è´¥åƒå¼‚å¸¸ä¸€æ ·ä¼ æ’­ã€‚ä¸ºæ­¤kumotest æä¾›ä»¥ä¸‹å®ï¼š</p>
<table><thead><tr><th>Fatal assertion</th><th>Nonfatal assertion</th><th>Verifies</th></tr></thead><tbody><tr><td><code>ASSERT_NO_FATAL_FAILURE(statement);</code></td><td><code>EXPECT_NO_FATAL_FAILURE(statement);</code></td><td><code>statement</code> doesn&#x27;t generate any new fatal failures in the current thread.</td></tr></tbody></table>
<p>ä»…æ£€æŸ¥æ‰§è¡Œæ–­è¨€çš„çº¿ç¨‹ä¸­çš„å¤±è´¥ä»¥ç¡®å®šæ­¤ç±»æ–­è¨€çš„ç»“æœã€‚å¦‚æœ<code>statement</code>åˆ›å»ºæ–°çº¿ç¨‹ï¼Œ
è¿™äº›çº¿ç¨‹ä¸­çš„å¤±è´¥å°†è¢«å¿½ç•¥ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ASSERT_NO_FATAL_FAILURE(Foo());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EXPECT_NO_FATAL_FAILURE({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  i = Bar();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Windows å½“å‰ä¸æ”¯æŒæ¥è‡ªå¤šä¸ªçº¿ç¨‹çš„æ–­è¨€ã€‚</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="checking-for-failures-in-the-current-test">æ£€æŸ¥å½“å‰æµ‹è¯•ä¸­çš„å¤±è´¥<a href="#checking-for-failures-in-the-current-test" class="hash-link" aria-label="Direct link to æ£€æŸ¥å½“å‰æµ‹è¯•ä¸­çš„å¤±è´¥" title="Direct link to æ£€æŸ¥å½“å‰æµ‹è¯•ä¸­çš„å¤±è´¥">â€‹</a></h4>
<p>å¦‚æœæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œåˆ™ <code>::testing::Test</code> ç±»ä¸­çš„ <code>HasFatalFailure()</code> è¿”å› <code>true</code>
å½“å‰æµ‹è¯•ä¸­çš„æ–­è¨€é­é‡äº†è‡´å‘½çš„å¤±è´¥ã€‚è¿™å…è®¸å‡½æ•°æ•è·å­ä¾‹ç¨‹ä¸­çš„è‡´å‘½æ•…éšœå¹¶æå‰è¿”å›ã€‚</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class Test {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  static bool HasFatalFailure();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å…¸å‹ç”¨æ³•ï¼ŒåŸºæœ¬ä¸Šæ¨¡æ‹ŸæŠ›å‡ºå¼‚å¸¸çš„è¡Œä¸ºï¼Œæ˜¯ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">TEST(FooTest, Bar) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Subroutine();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Aborts if Subroutine() had a fatal failure.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if (HasFatalFailure()) return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // The following won&#x27;t be executed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å¦‚æœåœ¨<code>TEST()</code>ã€<code>TEST_F()</code>æˆ–æµ‹è¯•ä¹‹å¤–ä½¿ç”¨<code>HasFatalFailure()</code>
å›ºå®šè£…ç½®ï¼Œæ‚¨å¿…é¡»æ·»åŠ  <code>::testing::Test::</code> å‰ç¼€ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">if (testing::Test::HasFatalFailure()) return;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ç±»ä¼¼åœ°ï¼Œå¦‚æœå½“å‰æµ‹è¯•å·²è¾¾åˆ°ï¼Œåˆ™<code>HasNonfatalFailure()</code>è¿”å›<code>true</code>è‡³å°‘ä¸€ä¸ªéè‡´å‘½æ•…éšœï¼Œå¹¶ä¸”å¦‚æœå½“å‰å¤±è´¥ï¼Œåˆ™<code>HasFailure()</code>è¿”å›<code>true</code>
æµ‹è¯•è‡³å°‘æœ‰ä¸€æ¬¡å¤±è´¥ã€‚</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="logging-additional-nformation">è®°å½•é™„åŠ ä¿¡æ¯<a href="#logging-additional-nformation" class="hash-link" aria-label="Direct link to è®°å½•é™„åŠ ä¿¡æ¯" title="Direct link to è®°å½•é™„åŠ ä¿¡æ¯">â€‹</a></h2>
<p>åœ¨æ‚¨çš„æµ‹è¯•ä»£ç ä¸­ï¼Œæ‚¨å¯ä»¥è°ƒç”¨ <code>RecordProperty(&quot;key&quot;, value)</code> æ¥è®°å½•å…¶ä»–
ä¿¡æ¯ï¼Œå…¶ä¸­<code>value</code>å¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–<code>int</code>ã€‚ <em>æœ€å</em>å€¼
è®°å½•çš„å¯†é’¥å°†è¢«å‘é€åˆ°<a href="#generate-an-xml-report">XML è¾“å‡º</a>ï¼ˆå¦‚æœæ‚¨æŒ‡å®šï¼‰ã€‚ä¾‹å¦‚ï¼Œ
æµ‹è¯•</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(WidgetUsageTest, MinAndMaxWidgets) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  RecordProperty(&quot;MaximumWidgets&quot;, ComputeMaxUsage());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  RecordProperty(&quot;MinimumWidgets&quot;, ComputeMinUsage());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å°†è¾“å‡ºå¦‚ä¸‹ XMLï¼š</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#22863A">testcase</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">MinAndMaxWidgets</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">file</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">test.cpp</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">line</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">status</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">run</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">time</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">0.006</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">classname</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">WidgetUsageTest</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">MaximumWidgets</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">12</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">MinimumWidgets</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">9</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><ul>
<li><code>RecordProperty()</code> æ˜¯ <code>Test</code> ç±»çš„é™æ€æˆå‘˜ã€‚å› æ­¤å®ƒå¦‚æœåœ¨å¤–éƒ¨ä½¿ç”¨ï¼Œåˆ™éœ€è¦ä»¥ <code>::testing::Test::</code> ä¸ºå‰ç¼€
<code>TEST</code> ä¸»ä½“å’Œæµ‹è¯•å¤¹å…·ç±»ã€‚</li>
<li><em><code>key</code></em> å¿…é¡»æ˜¯æœ‰æ•ˆçš„XMLå±æ€§åç§°ï¼Œå¹¶ä¸”ä¸èƒ½ä¸
kumotest å·²ç»ä½¿ç”¨çš„ï¼ˆ<code>name</code>ã€<code>status</code>ã€<code>time</code>ã€<code>classname</code>ã€
<code>type_param</code> å’Œ <code>value_param</code>ï¼‰ã€‚</li>
<li>å…è®¸åœ¨æµ‹è¯•çš„ç”Ÿå‘½å‘¨æœŸä¹‹å¤–è°ƒç”¨ <code>RecordProperty()</code>ã€‚
å¦‚æœåœ¨æµ‹è¯•ä¹‹å¤–ä½†åœ¨æµ‹è¯•å¥—ä»¶ä¹‹é—´è°ƒç”¨å®ƒ<code>SetUpTestSuite()</code> å’Œ <code>TearDownTestSuite()</code> æ–¹æ³•ï¼Œå®ƒå°†æ˜¯
å½’å› äºæµ‹è¯•å¥—ä»¶çš„ XML å…ƒç´ ã€‚å¦‚æœæ˜¯å¤–é¢å«çš„è¯åœ¨æ‰€æœ‰æµ‹è¯•å¥—ä»¶ä¸­ï¼ˆä¾‹å¦‚åœ¨æµ‹è¯•ç¯å¢ƒä¸­ï¼‰ï¼Œå®ƒå°†å½’å› äºé¡¶çº§ XML å…ƒç´ ã€‚</li>
</ul></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sharing-resources-between-tests-in-the-same-test-suite">åœ¨åŒä¸€æµ‹è¯•å¥—ä»¶ä¸­çš„æµ‹è¯•ä¹‹é—´å…±äº«èµ„æº<a href="#sharing-resources-between-tests-in-the-same-test-suite" class="hash-link" aria-label="Direct link to åœ¨åŒä¸€æµ‹è¯•å¥—ä»¶ä¸­çš„æµ‹è¯•ä¹‹é—´å…±äº«èµ„æº" title="Direct link to åœ¨åŒä¸€æµ‹è¯•å¥—ä»¶ä¸­çš„æµ‹è¯•ä¹‹é—´å…±äº«èµ„æº">â€‹</a></h2>
<p>kumotest ä¸ºæ¯ä¸ªæµ‹è¯•åˆ›å»ºä¸€ä¸ªæ–°çš„æµ‹è¯•å¤¹å…·å¯¹è±¡ï¼Œä»¥ä¾¿æµ‹è¯•ç‹¬ç«‹ä¸”æ›´æ˜“äºè°ƒè¯•ã€‚ç„¶è€Œï¼Œæœ‰æ—¶æµ‹è¯•ä¼šä½¿ç”¨èµ„æº
è®¾ç½®æˆæœ¬é«˜æ˜‚ï¼Œä½¿å¾—æ¯æ¬¡æµ‹è¯•ä¸€ä»½å‰¯æœ¬çš„æ¨¡å‹ä»¤äººæœ›è€Œå´æ­¥æ˜‚è´µçš„ã€‚</p>
<p>å¦‚æœæµ‹è¯•ä¸æ”¹å˜èµ„æºï¼Œé‚£ä¹ˆå…±äº«èµ„æºä¹Ÿæ²¡æœ‰ä»€ä¹ˆåå¤„ã€‚å•ä¸ªèµ„æºå‰¯æœ¬ã€‚å› æ­¤ï¼Œé™¤äº†æ¯ä¸ªæµ‹è¯•çš„<code>set-up/tear-down</code>ä¹‹å¤–ï¼Œkumotest
è¿˜æ”¯æŒæ¯ä¸ªæµ‹è¯•å¥—ä»¶çš„è®¾ç½®/æ‹†å¸ã€‚ä½¿ç”¨æ–¹æ³•ï¼š</p>
<ol>
<li>åœ¨æ‚¨çš„æµ‹è¯•è£…ç½®ç±»ï¼ˆä¾‹å¦‚ <code>FooTest</code> ï¼‰ä¸­ï¼Œå°†æŸä¸ªæˆå‘˜å£°æ˜ä¸º <code>static</code>ä¿å­˜å…±äº«èµ„æºçš„å˜é‡ã€‚</li>
<li>åœ¨æµ‹è¯•å¤¹å…·ç±»ä¹‹å¤–ï¼ˆé€šå¸¸å°±åœ¨å®ƒçš„ä¸‹é¢ï¼‰ï¼Œå®šä¹‰é‚£äº›æˆå‘˜å˜é‡ï¼Œå¯ä»¥é€‰æ‹©ç»™å®ƒ ä»¬åˆå§‹å€¼ã€‚</li>
<li>åœ¨åŒä¸€ä¸ªæµ‹è¯•å¤¹å…·ç±»ä¸­ï¼Œå®šä¹‰ä¸€ä¸ª<code>static void SetUpTestSuite()</code>å‡½æ•°ï¼ˆè®°ä½ä¸è¦å°†å…¶æ‹¼å†™ä¸º <strong><code>SetupTestSuite</code></strong> å¹¶å¸¦æœ‰ä¸€ä¸ªå°
<code>u</code>!) è®¾ç½®å…±äº«èµ„æºå’Œ <code>static void TearDownTestSuite()</code>åŠŸèƒ½æ¥æ‹†é™¤å®ƒä»¬ã€‚</li>
</ol>
<p>å°±æ˜¯è¿™æ ·ï¼ kumotest åœ¨è¿è¡Œä¹‹å‰ä¼šè‡ªåŠ¨è°ƒç”¨ <code>SetUpTestSuite()</code> <code>FooTest</code>æµ‹è¯•å¥—ä»¶ä¸­çš„<em>ç¬¬ä¸€ä¸ªæµ‹è¯•</em>ï¼ˆå³åœ¨åˆ›å»ºç¬¬ä¸€ä¸ª
<code>FooTest</code> å¯¹è±¡ï¼‰ï¼Œå¹¶åœ¨è¿è¡Œ<em>æœ€åä¸€ä¸ªæµ‹è¯•</em>åè°ƒç”¨ <code>TearDownTestSuite()</code>å…¶ä¸­ï¼ˆå³åˆ é™¤æœ€åä¸€ä¸ª<code>FooTest</code>å¯¹è±¡åï¼‰ã€‚åœ¨è¿™ä¹‹é—´ï¼Œæµ‹è¯•å¯ä»¥
ä½¿ç”¨å…±äº«èµ„æºã€‚</p>
<p>è¯·è®°ä½ï¼Œæµ‹è¯•é¡ºåºæ˜¯æœªå®šä¹‰çš„ï¼Œå› æ­¤æ‚¨çš„ä»£ç ä¸èƒ½ä¾èµ–äºæµ‹è¯•åœ¨å¦ä¸€ä¸ªä¹‹å‰æˆ–ä¹‹åã€‚æ­¤å¤–ï¼Œæµ‹è¯•ä¸å¾—ä¿®æ”¹çŠ¶æ€
ä»»ä½•å…±äº«èµ„æºçš„çŠ¶æ€ï¼Œæˆ–è€…ï¼Œå¦‚æœä»–ä»¬ç¡®å®ä¿®æ”¹äº†çŠ¶æ€ï¼Œåˆ™å¿…é¡»æ¢å¤åœ¨å°†æ§åˆ¶æƒä¼ é€’ç»™ä¸‹ä¸€ä¸ªæµ‹è¯•ä¹‹å‰ï¼Œå°†çŠ¶æ€æ¢å¤ä¸ºå…¶åŸå§‹å€¼ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œå¯¹äºä¸€ä¸ªæµ‹è¯•è£…ç½®ï¼Œå¯èƒ½ä¼šå¤šæ¬¡è°ƒç”¨<code>SetUpTestSuite()</code>å…·æœ‰æ´¾ç”Ÿç±»çš„ç±»ï¼Œå› æ­¤æ‚¨ä¸åº”æœŸæœ›å‡½æ•°ä¸­åŒ…å«ä»£ç 
ä¸»ä½“ä»…è¿è¡Œä¸€æ¬¡ã€‚æ­¤å¤–ï¼Œæ´¾ç”Ÿç±»ä»ç„¶å¯ä»¥è®¿é—®å…±äº«çš„èµ„æºå®šä¹‰ä¸ºé™æ€æˆå‘˜ï¼Œå› æ­¤åœ¨ä½¿ç”¨æ—¶éœ€è¦ä»”ç»†è€ƒè™‘
ç®¡ç†å…±äº«èµ„æºä»¥é¿å…å†…å­˜æ³„æ¼ã€‚</p>
<p>ä»¥ä¸‹æ˜¯æ¯ä¸ªæµ‹è¯•å¥—ä»¶<code>set-up</code>å’Œ<code>tear-down</code>çš„ç¤ºä¾‹ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class FooTest : public testing::Test {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> protected:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Per-test-suite set-up.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Called before the first test in this test suite.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Can be omitted if not needed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  static void SetUpTestSuite() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Avoid reallocating static objects if called in subclasses of FooTest.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (shared_resource_ == nullptr) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      shared_resource_ = new ...;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Per-test-suite tear-down.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Called after the last test in this test suite.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Can be omitted if not needed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  static void TearDownTestSuite() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    delete shared_resource_;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shared_resource_ = nullptr;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // You can define per-test set-up logic as usual.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  void SetUp() override { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // You can define per-test tear-down logic as usual.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  void TearDown() override { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Some expensive resource shared by all tests.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  static T* shared_resource_;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">T* FooTest::shared_resource_ = nullptr;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(FooTest, Test1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ... you can refer to shared_resource_ here ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(FooTest, Test2) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ... you can refer to shared_resource_ here ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>æ³¨æ„</div><div class="admonitionContent_BuS1"><p>è™½ç„¶ä¸Šé¢çš„ä»£ç å£°æ˜äº†<code>SetUpTestSuite()</code>å—ä¿æŠ¤ï¼Œä½†å®ƒå¯èƒ½
æœ‰æ—¶æœ‰å¿…è¦å°†å…¶å£°æ˜ä¸ºå…¬å…±ï¼Œä¾‹å¦‚ä¸
<code>TEST_P</code>ã€‚</p></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="global-set-up-and-tear-down">å…¨å±€ <code>Set-Up</code> å’Œ <code>Tear-Down</code><a href="#global-set-up-and-tear-down" class="hash-link" aria-label="Direct link to global-set-up-and-tear-down" title="Direct link to global-set-up-and-tear-down">â€‹</a></h2>
<p>æ­£å¦‚æ‚¨å¯ä»¥åœ¨æµ‹è¯•çº§åˆ«å’Œæµ‹è¯•å¥—ä»¶ä¸Šè¿›è¡Œè®¾ç½®å’Œæ‹†å¸ä¸€æ ·çº§åˆ«ï¼Œæ‚¨ä¹Ÿå¯ä»¥åœ¨æµ‹è¯•ç¨‹åºçº§åˆ«è¿›è¡Œã€‚æ–¹æ³•å¦‚ä¸‹ã€‚</p>
<p>é¦–å…ˆï¼Œå­ç±»åŒ– <code>::testing::Environment</code> ç±»æ¥å®šä¹‰æµ‹è¯•
ç¯å¢ƒï¼Œå®ƒçŸ¥é“å¦‚ä½•è®¾ç½®å’Œæ‹†å¸ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class Environment : public ::testing::Environment {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ~Environment() override {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Override this to define how to set up the environment.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  void SetUp() override {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Override this to define how to tear down the environment.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  void TearDown() override {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ç„¶åï¼Œæ‚¨é€šè¿‡ kumotest æ³¨å†Œç¯å¢ƒç±»çš„å®ä¾‹è°ƒç”¨ <code>::testing::AddGlobalTestEnvironment()</code> å‡½æ•°ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Environment* AddGlobalTestEnvironment(Environment* env);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ç°åœ¨ï¼Œå½“è°ƒç”¨<code>RUN_ALL_TESTS()</code>æ—¶ï¼Œå®ƒé¦–å…ˆè°ƒç”¨<code>SetUp()</code>æ–¹æ³•
æ¯ä¸ªç¯å¢ƒå¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰ä»»ä½•ç¯å¢ƒï¼Œåˆ™è¿è¡Œæµ‹è¯•æŠ¥å‘Šè‡´å‘½æ•…éšœå¹¶ä¸”æœªè°ƒç”¨<code>KTEST_SKIP()</code>ã€‚ <code>RUN_ALL_TESTS()</code>
æ€»æ˜¯å¯¹æ¯ä¸ªç¯å¢ƒå¯¹è±¡è°ƒç”¨ <code>TearDown()</code>ï¼Œæ— è®ºæ˜¯å¦æ²¡æœ‰è¿è¡Œæµ‹è¯•ã€‚</p>
<p>æ³¨å†Œå¤šä¸ªç¯å¢ƒå¯¹è±¡å°±å¯ä»¥äº†ã€‚åœ¨è¿™ä¸ªå¥—ä»¶ä¸­ï¼Œä»–ä»¬çš„ <code>SetUp()</code>å°†æŒ‰ç…§å®ƒä»¬æ³¨å†Œçš„é¡ºåºè¢«è°ƒç”¨ï¼Œå¹¶ ä¸”å®ƒä»¬çš„ <code>TearDown()</code> å°†è¢«
ä»¥ç›¸åçš„é¡ºåºè°ƒç”¨ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œkumotest æ‹¥æœ‰å·²æ³¨å†Œç¯å¢ƒå¯¹è±¡çš„æ‰€æœ‰æƒã€‚å› æ­¤<strong>ä¸è¦è‡ªè¡Œåˆ é™¤å®ƒä»¬</strong>ã€‚</p>
<p>æ‚¨åº”è¯¥åœ¨è°ƒç”¨<code>RUN_ALL_TESTS()</code>ä¹‹å‰è°ƒç”¨<code>AddGlobalTestEnvironment()</code>ï¼Œ
å¯èƒ½åœ¨<code>main()</code>ä¸­ã€‚å¦‚æœä½ ä½¿ç”¨<code>ktest_main</code>ï¼Œä½ éœ€è¦å…ˆè°ƒç”¨å®ƒ<code>main()</code> å¯åŠ¨ä½¿å…¶ç”Ÿæ•ˆã€‚å®ç°æ­¤ç›®çš„çš„ä¸€ç§æ–¹æ³•æ˜¯å®šä¹‰ä¸€ä¸ªå…¨å±€çš„
åƒè¿™æ ·çš„å˜é‡ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">testing::Environment* const foo_env =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    testing::AddGlobalTestEnvironment(new FooEnvironment);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ä½†æ˜¯ï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®æ‚¨ç¼–å†™è‡ªå·±çš„<code>main()</code>å¹¶è°ƒç”¨<code>AddGlobalTestEnvironment()</code> åœ¨é‚£é‡Œï¼Œä¾èµ–äºå…¨å±€çš„åˆå§‹åŒ–
å˜é‡ä½¿ä»£ç éš¾ä»¥é˜…è¯»ï¼Œå¹¶ä¸”å¯èƒ½ä¼šåœ¨æ³¨å†Œæ—¶å¯¼è‡´é—®é¢˜æ¥è‡ªä¸åŒç¿»è¯‘å•å…ƒçš„å¤šä¸ªç¯å¢ƒï¼Œå¹¶ä¸”è¿™äº›ç¯å¢ƒæœ‰
å®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼ˆè¯·è®°ä½ï¼Œç¼–è¯‘å™¨ä¸ä¿è¯é¡ºåºå…¶ä¸­åˆå§‹åŒ–æ¥è‡ªä¸åŒç¿»è¯‘å•å…ƒçš„å…¨å±€å˜é‡ï¼‰ã€‚</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="value-parameterized-tests">å€¼å‚æ•°åŒ–æµ‹è¯•<a href="#value-parameterized-tests" class="hash-link" aria-label="Direct link to å€¼å‚æ•°åŒ–æµ‹è¯•" title="Direct link to å€¼å‚æ•°åŒ–æµ‹è¯•">â€‹</a></h2>
<p><em>å€¼å‚æ•°åŒ–æµ‹è¯•</em>å…è®¸æ‚¨ä½¿ç”¨ä¸åŒçš„æ–¹å¼æµ‹è¯•æ‚¨çš„ä»£ç å‚æ•°ï¼Œè€Œæ— éœ€ç¼–å†™åŒä¸€æµ‹è¯•çš„å¤šä¸ªå‰¯æœ¬ã€‚è¿™åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¾ˆæœ‰ç”¨ï¼š
å¤šç§æƒ…å†µï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>ä½ æœ‰ä¸€æ®µä»£ç ï¼Œå…¶è¡Œä¸ºå—åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªå› ç´ çš„å½±å“å‘½ä»¤è¡Œæ ‡å¿—ã€‚æ‚¨å¸Œæœ›ç¡®ä¿æ‚¨çš„ä»£ç èƒ½å¤Ÿæ­£ç¡®æ‰§è¡Œè¿™äº›æ ‡å¿—çš„å„ç§å€¼ã€‚</li>
<li>æ‚¨æƒ³è¦æµ‹è¯• OO æ¥å£çš„ä¸åŒå®ç°ã€‚</li>
<li>æ‚¨æƒ³è¦é€šè¿‡å„ç§è¾“å…¥æµ‹è¯•æ‚¨çš„ä»£ç ï¼ˆä¹Ÿç§°ä¸ºæ•°æ®é©±åŠ¨æµ‹è¯•ï¼‰ã€‚æ­¤åŠŸèƒ½å¾ˆå®¹æ˜“è¢«æ»¥ç”¨ï¼Œå› æ­¤è¯·åœ¨ä½¿ç”¨æ—¶å‘æŒ¥è‰¯å¥½çš„åˆ¤æ–­åŠ›å®ƒï¼</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-to-write-value-parameterized-tests">å¦‚ä½•ç¼–å†™å€¼å‚æ•°åŒ–æµ‹è¯•<a href="#how-to-write-value-parameterized-tests" class="hash-link" aria-label="Direct link to å¦‚ä½•ç¼–å†™å€¼å‚æ•°åŒ–æµ‹è¯•" title="Direct link to å¦‚ä½•ç¼–å†™å€¼å‚æ•°åŒ–æµ‹è¯•">â€‹</a></h3>
<p>è¦ç¼–å†™å€¼å‚æ•°åŒ–æµ‹è¯•ï¼Œé¦–å…ˆåº”è¯¥å®šä¹‰ä¸€ä¸ªå›ºå®šç±»ã€‚å®ƒå¿…é¡»ä» <code>testing::Test</code> å’Œ <code>testing::WithParamInterface&lt;T&gt;</code> æ´¾ç”Ÿ
ï¼ˆåè€…æ˜¯çº¯æ¥å£ï¼‰ï¼Œå…¶ä¸­<code>T</code>æ˜¯å‚æ•°çš„ç±»å‹å€¼ã€‚ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæ‚¨å¯ä»¥ä»ä»¥ä¸‹æ´¾ç”Ÿå¤¹å…·ç±»<code>testing::TestWithParam&lt;T&gt;</code>ï¼Œå®ƒæœ¬èº«æºè‡ª <code>testing::Test</code>
å’Œ<code>testing::WithParamInterface&lt;T&gt;</code>ã€‚ <code>T</code> å¯ä»¥æ˜¯ä»»ä½•å¯å¤åˆ¶ç±»å‹ã€‚å¦‚æœå®ƒæ˜¯ä¸€ä¸ªåŸå§‹æŒ‡é’ˆï¼Œæ‚¨è´Ÿè´£ç®¡ç†æŒ‡å‘çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>å¦‚æœæ‚¨çš„æµ‹è¯•è£…ç½®å®šä¹‰äº†<code>SetUpTestSuite()</code>æˆ–<code>TearDownTestSuite()</code>
å®ƒä»¬å¿…é¡»è¢«å£°æ˜ä¸º<strong>å…¬å¼€</strong>è€Œä¸æ˜¯<strong>å—ä¿æŠ¤</strong>æ‰èƒ½ä½¿ç”¨<code>TEST_P</code></p></div></div>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class FooTest :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public testing::TestWithParam&lt;const char*&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // You can implement all the usual fixture class members here.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // To access the test parameter, call GetParam() from class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // TestWithParam&lt;T&gt;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Or, when you want to add parameters to a pre-existing fixture class:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class BaseTest : public testing::Test {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class BarTest : public BaseTest,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                public testing::WithParamInterface&lt;const char*&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ç„¶åï¼Œä½¿ç”¨<code>TEST_P</code>å®ä½¿ç”¨æ­¤å¤¹å…·å®šä¹‰å°½å¯èƒ½å¤šçš„æµ‹è¯•æ¨¡å¼å¦‚ä½ æ‰€æ„¿ã€‚ <code>_P</code> åç¼€ä»£è¡¨<code>å‚æ•°åŒ–</code>æˆ–<code>æ¨¡å¼</code>ï¼Œæ— è®ºæ‚¨é€‰æ‹©å“ªä¸€ä¸ª
æ›´å–œæ¬¢æ€è€ƒã€‚</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">TEST_P(FooTest, DoesBlah) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Inside a test, access the test parameter with the GetParam() method</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // of the TestWithParam&lt;T&gt; class:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  EXPECT_TRUE(foo.Blah(GetParam()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_P(FooTest, HasBlahBlah) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æœ€åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>INSTANTIATE_TEST_SUITE_P</code>å®æ¥å®ä¾‹åŒ–å…·æœ‰æ‚¨æƒ³è¦çš„ä»»ä½•å‚æ•°é›†çš„æµ‹è¯•å¥—ä»¶ã€‚ KumoTest å®šä¹‰äº†ä¸€äº›
ç”¨äºç”Ÿæˆæµ‹è¯•å‚æ•°çš„å‡½æ•°â€”â€”è¯¦ç»†ä¿¡æ¯è¯·å‚è§<a href="/docs/next/cpp/base/testing/kt/reference/testing#INSTANTIATE_TEST_SUITE_P"><code>INSTANTIATE_TEST_SUITE_P</code></a>
æµ‹è¯•å‚è€ƒã€‚</p>
<p>ä¾‹å¦‚ï¼Œä»¥ä¸‹è¯­å¥å°†ä»<code>FooTest</code>å®ä¾‹åŒ–æµ‹è¯•
æ¯ä¸ªæµ‹è¯•å¥—ä»¶éƒ½æœ‰å‚æ•°å€¼<code>&quot;meeny&quot;</code>, <code>&quot;miny&quot;</code>,å’Œ <code>&quot;moe&quot;</code>ï¼Œä½¿  ç”¨
<a href="/docs/next/cpp/base/testing/kt/reference/testing#param-generators"><code>Values</code></a> å‚æ•°ç”Ÿæˆå™¨ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">INSTANTIATE_TEST_SUITE_P(MeenyMinyMoe,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         FooTest,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         testing::Values(&quot;meeny&quot;, &quot;miny&quot;, &quot;moe&quot;));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>ä¸Šé¢çš„ä»£ç å¿…é¡»æ”¾åœ¨å…¨å±€æˆ–å‘½åç©ºé—´èŒƒå›´å†…ï¼Œè€Œä¸æ˜¯æ”¾åœ¨åŠŸèƒ½èŒƒå›´ã€‚</p></div></div>
<p><code>INSTANTIATE_TEST_SUITE_P</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æµ‹è¯•å¥—ä»¶çš„å®ä¾‹åŒ–ã€‚ä¸‹ä¸€ä¸ªå‚æ•°æ˜¯æµ‹è¯•çš„åç§°
æ¨¡å¼ï¼Œæœ€åä¸€ä¸ªæ˜¯<a href="/docs/next/cpp/base/testing/kt/reference/testing#param-generators">å‚æ•°ç”Ÿæˆå™¨</a>ã€‚</p>
<p>æ‚¨å¯ä»¥å¤šæ¬¡å®ä¾‹åŒ–ä¸€ä¸ªæµ‹è¯•æ¨¡å¼ï¼Œä»¥ä¾¿åŒºåˆ†ä¸åŒçš„æ¨¡å¼çš„å®ä¾‹ï¼Œå®ä¾‹åŒ–åç§°ä½œä¸ºå‰ç¼€æ·»åŠ åˆ°
å®é™…çš„æµ‹è¯•å¥—ä»¶åç§°ã€‚è¯·è®°ä½ä¸ºä¸åŒçš„æƒ…å†µé€‰æ‹©å”¯ä¸€çš„å‰ç¼€å®ä¾‹åŒ–ã€‚ä¸Šé¢å®ä¾‹åŒ–çš„æµ‹è¯•å°†å…·æœ‰ä»¥ä¸‹åç§°ï¼š</p>
<ul>
<li><code>MeenyMinyMoe/FooTest.DoesBlah/0</code> for <code>&quot;meeny&quot;</code></li>
<li><code>MeenyMinyMoe/FooTest.DoesBlah/1</code> for <code>&quot;miny&quot;</code></li>
<li><code>MeenyMinyMoe/FooTest.DoesBlah/2</code> for <code>&quot;moe&quot;</code></li>
<li><code>MeenyMinyMoe/FooTest.HasBlahBlah/0</code> for <code>&quot;meeny&quot;</code></li>
<li><code>MeenyMinyMoe/FooTest.HasBlahBlah/1</code> for <code>&quot;miny&quot;</code></li>
<li><code>MeenyMinyMoe/FooTest.HasBlahBlah/2</code> for <code>&quot;moe&quot;</code></li>
</ul>
<p>æ‚¨å¯ä»¥åœ¨ <a href="#running-a-subset-of-the-tests"><code>--ktest_filter</code></a> ä¸­ä½¿ç”¨è¿™äº›åç§°ã€‚</p>
<p>ä»¥ä¸‹è¯­å¥å°†å†æ¬¡å®ä¾‹åŒ– <code>FooTest</code> ä¸­çš„æ‰€æœ‰æµ‹è¯•ï¼Œæ¯ä¸ªæµ‹è¯•
å‚æ•°å€¼<code>cat</code>å’Œ<code>dog</code>ä½¿ç”¨ <a href="/docs/next/cpp/base/testing/kt/reference/testing#param-generators"><code>ValuesIn</code></a> å‚æ•°ç”Ÿæˆå™¨ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">const char* pets[] = {&quot;cat&quot;, &quot;dog&quot;};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSTANTIATE_TEST_SUITE_P(Pets, FooTest, testing::ValuesIn(pets));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ä¸Šé¢å®ä¾‹åŒ–çš„æµ‹è¯•å°†å…·æœ‰ä»¥ä¸‹åç§°ï¼š</p>
<ul>
<li><code>Pets/FooTest.DoesBlah/0</code> for <code>&quot;cat&quot;</code></li>
<li><code>Pets/FooTest.DoesBlah/1</code> for <code>&quot;dog&quot;</code></li>
<li><code>Pets/FooTest.HasBlahBlah/0</code> for <code>&quot;cat&quot;</code></li>
<li><code>Pets/FooTest.HasBlahBlah/1</code> for <code>&quot;dog&quot;</code></li>
</ul>
<p>è¯·æ³¨æ„ï¼Œ<code>INSTANTIATE_TEST_SUITE_P</code>å°†å®ä¾‹åŒ–<em>æ‰€æœ‰</em>æµ‹è¯•
ç»™å®šçš„æµ‹è¯•å¥—ä»¶ï¼Œæ— è®ºå®ƒä»¬çš„å®šä¹‰ä½äº<code>ä¹‹å‰</code>è¿˜æ˜¯<code>ä¹‹å</code>
<code>INSTANTIATE_TEST_SUITE_P</code> è¯­å¥ã€‚</p>
<p>æ­¤å¤–ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªæ²¡æœ‰ç›¸åº”çš„<code>TEST_P``INSTANTIATE_TEST_SUITE_P</code> å¯¼è‡´æµ‹è¯•å¥—ä»¶ä¸­çš„æµ‹è¯•å¤±è´¥
<code>KumoTestéªŒè¯</code>ã€‚å¦‚æœæ‚¨æœ‰ä¸€ä¸ªæµ‹è¯•å¥—ä»¶ï¼Œå…¶ä¸­è¯¥é—æ¼ä¸æ˜¯é”™è¯¯ï¼Œä¾‹å¦‚å®ƒä½äºå¯èƒ½å› å…¶ä»–åŸå› é“¾æ¥çš„åº“ä¸­æˆ–
å¦‚æœæµ‹è¯•ç”¨ä¾‹åˆ—è¡¨æ˜¯åŠ¨æ€çš„å¹¶ä¸”å¯èƒ½ä¸ºç©ºï¼Œåˆ™æ­¤æ£€æŸ¥å¯ä»¥æ˜¯é€šè¿‡æ ‡è®°æµ‹è¯•å¥—ä»¶æ¥æŠ‘åˆ¶ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">KTEST_ALLOW_UNINSTANTIATED_PARAMETERIZED_TEST(FooTest);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æ‚¨å¯ä»¥æŸ¥çœ‹ <a href="https://gitee.com/kumo-pub/ktest/blob/master/ktest/samples/sample7_unittest.cc" target="_blank" rel="noopener noreferrer" title="Parameterized Test example">sample7_unittest.cc</a> å’Œ <a href="https://gitee.com/kumo-pub/ktest/blob/master/kumotest/samples/sample8_unittest.cc" target="_blank" rel="noopener noreferrer" title="Parameterized Test example with multiple parameters">sample8_unittest.cc</a> ä»¥è·å–æ›´å¤šç¤ºä¾‹ã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="creating-value-parameterized-abstract-tests">åˆ›å»ºå€¼å‚æ•°åŒ–æŠ½è±¡æµ‹è¯•<a href="#creating-value-parameterized-abstract-tests" class="hash-link" aria-label="Direct link to åˆ›å»ºå€¼å‚æ•°åŒ–æŠ½è±¡æµ‹è¯•" title="Direct link to åˆ›å»ºå€¼å‚æ•°åŒ–æŠ½è±¡æµ‹è¯•">â€‹</a></h3>
<p>åœ¨ä¸Šé¢ï¼Œæˆ‘ä»¬åœ¨<em>åŒä¸€ä¸ª</em>æºæ–‡ä»¶ä¸­å®šä¹‰å¹¶å®ä¾‹åŒ–<code>FooTest</code>ã€‚æœ‰æ—¶æ‚¨å¯èƒ½æƒ³åœ¨åº“ä¸­å®šä¹‰å€¼å‚æ•°åŒ–æµ‹è¯•å¹¶è®©
å…¶ä»–äººç¨åå®ä¾‹åŒ–å®ƒä»¬ã€‚è¿™ç§æ¨¡å¼ç§°ä¸º<em>æŠ½è±¡æµ‹è¯•</em>ã€‚ä½œä¸ºå…¶åº”ç”¨çš„ç¤ºä¾‹ï¼Œå½“æ‚¨è®¾è®¡ç•Œé¢æ—¶ï¼Œæ‚¨å¯ä»¥
ç¼–å†™ä¸€å¥—æ ‡å‡†çš„æŠ½è±¡æµ‹è¯•ï¼ˆä¹Ÿè®¸ä½¿ç”¨å·¥å‚å‡½æ•°ä½œä¸ºæµ‹è¯•å‚æ•°ï¼‰è¯¥æ¥å£çš„æ‰€æœ‰å®ç°éƒ½åº”è¯¥
ç»è¿‡ã€‚å½“æœ‰äººå®ç°è¯¥æ¥å£æ—¶ï¼Œä»–ä»¬å¯ä»¥å®ä¾‹åŒ–æ‚¨çš„å¥—ä»¶å…è´¹è·å¾—æ‰€æœ‰æ¥å£ä¸€è‡´æ€§æµ‹è¯•ã€‚</p>
<p>è¦å®šä¹‰æŠ½è±¡æµ‹è¯•ï¼Œæ‚¨åº”è¯¥åƒè¿™ æ ·ç»„ç»‡ä»£ç ï¼š</p>
<ol>
<li>æ”¾ç½®å‚æ•°åŒ–æµ‹è¯•å¤¹å…·ç±»çš„å®šä¹‰ï¼ˆä¾‹å¦‚ <code>FooTest</code>ï¼‰åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œè¾“å…¥<code>foo_param_test.h</code>ã€‚å°†æ­¤è§†ä¸º<em>å£°æ˜</em>æ‚¨çš„æŠ½è±¡æµ‹è¯•ã€‚</li>
<li>å°†<code>TEST_P</code>å®šä¹‰æ”¾å…¥<code>foo_param_test.cc</code>ä¸­ï¼Œå…¶ä¸­åŒ…æ‹¬<code>foo_param_test.h</code>ã€‚å°†æ­¤è§†ä¸º<em>å®ç°</em>æ‚¨çš„æŠ½è±¡æµ‹è¯•ã€‚</li>
</ol>
<p>å®šä¹‰å®ƒä»¬åï¼Œæ‚¨å¯ä»¥é€šè¿‡åŒ…å«<code>foo_param_test.h</code>æ¥å®ä¾‹åŒ–å®ƒä»¬ï¼Œè°ƒç”¨<code>INSTANTIATE_TEST_SUITE_P()</code>ï¼Œå¹¶æ ¹æ®åº“ç›®æ ‡
åŒ…å«<code>foo_param_test.cc</code>ã€‚æ‚¨å¯ä»¥å®ä¾‹åŒ–ç›¸åŒçš„æŠ½è±¡æµ‹è¯•å¥—ä»¶å¤šæ¬¡ï¼Œå¯èƒ½åœ¨ä¸åŒçš„æºæ–‡ä»¶ä¸­ã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="specifying-names-for-value-parameterized-test-parameters">æŒ‡å®šå€¼å‚æ•°åŒ–æµ‹è¯•å‚æ•°çš„åç§°<a href="#specifying-names-for-value-parameterized-test-parameters" class="hash-link" aria-label="Direct link to æŒ‡å®šå€¼å‚æ•°åŒ–æµ‹è¯•å‚æ•°çš„åç§°" title="Direct link to æŒ‡å®šå€¼å‚æ•°åŒ–æµ‹è¯•å‚æ•°çš„åç§°">â€‹</a></h3>
<p><code>INSTANTIATE_TEST_SUITE_P()</code> çš„å¯é€‰æœ€åä¸€ä¸ªå‚æ•°å…è®¸ç”¨æˆ·æŒ‡å®šä¸€ä¸ªå‡½æ•°æˆ–å‡½å­ï¼Œæ ¹æ®ä»¥ä¸‹å†…å®¹ç”Ÿæˆè‡ªå®šä¹‰æµ‹è¯•åç§°åç¼€
æµ‹è¯•å‚æ•°ã€‚è¯¥å‡½æ•°åº”è¯¥æ¥å—ä¸€ä¸ªç±»å‹çš„å‚æ•°<code>testing::TestParamInfo&lt;class ParamType&gt;</code>ï¼Œå¹¶è¿”å› <code>std::string</code>ã€‚</p>
<p><code>testing::PrintToStringParamName</code> æ˜¯ä¸€ä¸ªå†…ç½®çš„æµ‹è¯•åç¼€ç”Ÿæˆå™¨ï¼Œè¿”å›<code>testing::PrintToString(GetParam())</code>çš„å€¼ã€‚å®ƒä¸é€‚ç”¨äº
<code>std::string</code> æˆ– C å­—ç¬¦ä¸²ã€‚</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>æµ‹è¯•åç§°å¿…é¡»éç©ºã€å”¯ä¸€ï¼Œå¹¶ä¸”åªèƒ½åŒ…å« ASCII å­—æ¯æ•°å­—å­—ç¬¦ã€‚ç‰¹åˆ«æ˜¯ï¼Œä»–ä»¬<a href="/docs/next/cpp/base/testing/kt/faq#why-should-test-suite-names-and-test-names-not-contain-underscore">ä¸åº”åŒ…å«ä¸‹åˆ’çº¿</a></p></div></div>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class MyTestSuite : public testing::TestWithParam&lt;int&gt; {};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_P(MyTestSuite, MyTest)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std::cout &lt;&lt; &quot;Example Test Param: &quot; &lt;&lt; GetParam() &lt;&lt; std::endl;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSTANTIATE_TEST_SUITE_P(MyGroup, MyTestSuite, testing::Range(0, 10),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         testing::PrintToStringParamName());</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æä¾›è‡ªå®šä¹‰å‡½å­å¯ä»¥æ›´å¥½åœ°æ§åˆ¶æµ‹è¯•å‚æ•°åç§°ç”Ÿæˆï¼Œç‰¹åˆ«æ˜¯å¯¹äºè‡ªåŠ¨è½¬æ¢ä¸è¿›è¡Œçš„ç±»å‹
ç”Ÿæˆæœ‰ç”¨çš„å‚æ•°åç§°ï¼ˆä¾‹å¦‚ä¸Šé¢æ¼”ç¤ºçš„å­—ç¬¦ä¸²ï¼‰ã€‚è¿™ä»¥ä¸‹ç¤ºä¾‹è¯´æ˜äº†å¤šä¸ªå‚æ•°ã€æšä¸¾ç±»å‹çš„æƒ…å†µ
å’Œä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿˜æ¼”ç¤ºäº†å¦‚ä½•ç»„åˆç”Ÿæˆå™¨ã€‚å®ƒä½¿ç”¨ lambda
ä¸ºäº†ç®€æ´ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">enum class MyType { MY_FOO = 0, MY_BAR = 1 };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class MyTestSuite : public testing::TestWithParam&lt;std::tuple&lt;MyType, std::string&gt;&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSTANTIATE_TEST_SUITE_P(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MyGroup, MyTestSuite,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    testing::Combine(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        testing::Values(MyType::MY_FOO, MyType::MY_BAR),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        testing::Values(&quot;A&quot;, &quot;B&quot;)),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [](const testing::TestParamInfo&lt;MyTestSuite::ParamType&gt;&amp; info) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      std::string name = absl::StrCat(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          std::get&lt;0&gt;(info.param) == MyType::MY_FOO ? &quot;Foo&quot; : &quot;Bar&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          std::get&lt;1&gt;(info.param));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      absl::c_replace_if(name, [](char c) { return !std::isalnum(c); }, &#x27;_&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="typed-tests">ç±»å‹æµ‹è¯•<a href="#typed-tests" class="hash-link" aria-label="Direct link to ç±»å‹æµ‹è¯•" title="Direct link to ç±»å‹æµ‹è¯•">â€‹</a></h2>
<p>å‡è®¾æ‚¨æœ‰åŒä¸€ä¸ªæ¥å£çš„å¤šä¸ªå®ç°å¹¶ä¸”æƒ³è¦ç¡®ä¿å®ƒä»¬éƒ½æ»¡è¶³ä¸€äº›å…±åŒçš„è¦æ±‚ã€‚æˆ–è€…ï¼Œæ‚¨å¯èƒ½å·²ç»å®šä¹‰äº†
å‡ ç§åº”è¯¥ç¬¦åˆç›¸åŒ<code>æ¦‚å¿µ</code>çš„ç±»å‹ï¼Œå¹¶ä¸”æ‚¨æƒ³è¦éªŒè¯ä¸€ä¸‹ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œæ‚¨éƒ½å¸Œæœ›é’ˆå¯¹ä¸åŒçš„æƒ…å†µé‡å¤ç›¸åŒçš„æµ‹è¯•é€»è¾‘
ç±»å‹ã€‚</p>
<p>è™½ç„¶æ‚¨å¯ä»¥ä¸ºè¦æµ‹è¯•çš„æ¯ç§ç±»å‹ç¼–å†™ä¸€ä¸ª<code>TEST</code>æˆ–<code>TEST_F</code>ï¼ˆå¹¶ä¸”
æ‚¨ç”šè‡³å¯ä»¥å°†æµ‹è¯•é€»è¾‘çº³å…¥æ‚¨è°ƒç”¨çš„å‡½æ•°æ¨¡æ¿ä¸­
<code>TEST</code>ï¼‰ï¼Œå®ƒå¾ˆä¹å‘³å¹¶ä¸”æ— æ³•æ‰©å±•ï¼šå¦‚æœæ‚¨æƒ³è¦â€œmâ€æµ‹è¯•è€Œä¸æ˜¯<code>n</code>
ç±»å‹ï¼Œä½ æœ€ç»ˆä¼šå†™å‡º<code>m*n</code> <code>TEST</code>ã€‚</p>
<p><em>ç±»å‹åŒ–æµ‹è¯•</em>å…è®¸æ‚¨å¯¹ç±»å‹åˆ—è¡¨é‡å¤ç›¸åŒçš„æµ‹è¯•é€»è¾‘ã€‚ä½ åªéœ€è¦ç¼–å†™ä¸€æ¬¡æµ‹è¯•é€»è¾‘ï¼Œå°½ç®¡æ‚¨å¿…é¡»çŸ¥é“ç±»å‹åˆ—è¡¨
ç¼–å†™ç±»å‹æµ‹è¯•æ—¶ã€‚æ“ä½œæ–¹æ³•å¦‚ä¸‹ï¼š</p>
<p>é¦–å…ˆï¼Œå®šä¹‰ä¸€ä¸ªfixtureç±»æ¨¡æ¿ã€‚å®ƒåº”è¯¥ç”±ç±»å‹å‚æ•°åŒ–ã€‚è¯·è®°ä½ä» <code>::testing::Test</code> æ´¾ç”Ÿå®ƒï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">template &lt;typename T&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class FooTest : public testing::Test {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  using List = std::list&lt;T&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  static T shared_;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  T value_;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æ¥ä¸‹æ¥ï¼Œå°†ç±»å‹åˆ—è¡¨ä¸æµ‹è¯•å¥—ä»¶ç›¸å…³è”ï¼Œè¿™å°†é‡å¤è¿›è¡Œåˆ—è¡¨ä¸­çš„æ¯ç§ç±»å‹ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using MyTypes = ::testing::Types&lt;char, int, unsigned int&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TYPED_TEST_SUITE(FooTest, MyTypes);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ç±»å‹åˆ«åï¼ˆ<code>using</code>æˆ–<code>typedef</code>ï¼‰å¯¹äº<code>TYPED_TEST_SUITE</code>æ˜¯å¿…éœ€çš„
å®ä»¥æ­£ç¡®è§£æã€‚å¦åˆ™ç¼–è¯‘å™¨ä¼šè®¤ä¸ºä¸­çš„æ¯ä¸ªé€—å·ç±»å‹åˆ—è¡¨å¼•å…¥äº†ä¸€ä¸ªæ–°çš„å®å‚æ•°ã€‚</p>
<p>ç„¶åï¼Œä½¿ç”¨<code>TYPED_TEST()</code>è€Œä¸æ˜¯<code>TEST_F()</code>ä¸ºæ­¤å®šä¹‰ç±»å‹æµ‹è¯•
æµ‹è¯•å¥—ä»¶ã€‚æ‚¨å¯ä»¥æ ¹æ®éœ€è¦å¤šæ¬¡é‡å¤æ­¤æ“ä½œï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">TYPED_TEST(FooTest, DoesBlah) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Inside a test, refer to the special name TypeParam to get the type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // parameter.  Since we are inside a derived class template, C++ requires</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // us to visit the members of FooTest via &#x27;this&#x27;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  TypeParam n = this-&gt;value_;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // To visit static members of the fixture, add the &#x27;TestFixture::&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // prefix.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  n += TestFixture::shared_;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // To refer to typedefs in the fixture, add the &#x27;typename TestFixture::&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // prefix.  The &#x27;typename&#x27; is required to satisfy the compiler.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  typename TestFixture::List values;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  values.push_back(n);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TYPED_TEST(FooTest, HasPropertyA) { ... }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æ‚¨å¯ä»¥æŸ¥çœ‹<a href="https://gitee.com/kumo-pub/ktest/blob/master/kumotest/samples/sample6_unittest.cc" target="_blank" rel="noopener noreferrer" title="Typed Test example">sample6_unittest.cc</a> ä»¥è·å¾—å®Œæ•´çš„ç¤ºä¾‹ã€‚</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="type-parameterized-tests">ç±»å‹å‚æ•°åŒ–æµ‹è¯•<a href="#type-parameterized-tests" class="hash-link" aria-label="Direct link to ç±»å‹å‚æ•°åŒ–æµ‹è¯•" title="Direct link to ç±»å‹å‚æ•°åŒ–æµ‹è¯•">â€‹</a></h2>
<p><em>ç±»å‹å‚æ•°åŒ–æµ‹è¯•</em> ç±»ä¼¼äºç±»å‹åŒ–æµ‹è¯•ï¼Œåªæ˜¯å®ƒä»¬ä¸éœ€è¦æ‚¨æå‰çŸ¥é“ç±»å‹åˆ—è¡¨ã€‚ç›¸åï¼Œæ‚¨å¯ä»¥å®šä¹‰æµ‹è¯•
é¦–å…ˆé€»è¾‘ï¼Œç„¶åç”¨ä¸åŒç±»å‹åˆ—è¡¨å®ä¾‹åŒ–å®ƒã€‚ä½ ç”šè‡³å¯ä»¥åœ¨åŒä¸€ä¸ªç¨‹åºä¸­å¤šæ¬¡å®ä¾‹åŒ–å®ƒã€‚</p>
<p>å¦‚æœæ‚¨æ­£åœ¨è®¾è®¡ä¸€ä¸ªç•Œé¢æˆ–æ¦‚å¿µï¼Œæ‚¨å¯ä»¥å®šä¹‰ä¸€å¥—ç±»å‹å‚æ•°åŒ–æµ‹è¯•æ¥éªŒè¯ä»»ä½•æœ‰æ•ˆå®ç°çš„å±æ€§
ç•Œé¢/æ¦‚å¿µåº”è¯¥æœ‰ã€‚ç„¶åï¼Œæ¯ä¸ªå®ç°çš„ä½œè€…å¯ä»¥åªéœ€ç”¨å…¶ç±»å‹å®ä¾‹åŒ–æµ‹è¯•å¥—ä»¶å³å¯éªŒè¯å…¶æ˜¯å¦ç¬¦åˆ
éœ€æ±‚ï¼Œè€Œä¸å¿…é‡å¤ç¼–å†™ç±»ä¼¼çš„æµ‹è¯•ã€‚è¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼š</p>
<p>é¦–å…ˆï¼Œå®šä¹‰ä¸€ä¸ªå›ºå®šè£…ç½®ç±»æ¨¡æ¿ï¼Œå°±åƒæˆ‘ä»¬å¯¹ç±»å‹åŒ–æµ‹è¯•æ‰€åšçš„é‚£æ ·ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">template &lt;typename T&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class FooTest : public testing::Test {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  void DoSomethingInteresting();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æ¥ä¸‹æ¥ï¼Œå£°æ˜æ‚¨å°†å®šä¹‰ä¸€ä¸ªç±»å‹å‚æ•°åŒ–æµ‹è¯•å¥—ä»¶ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">TYPED_TEST_SUITE_P(FooTest);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ç„¶åï¼Œä½¿ç”¨ <code>TYPED_TEST_P()</code> å®šä¹‰ç±»å‹å‚æ•°åŒ–æµ‹è¯•ã€‚ä½ å¯ä»¥é‡å¤
æ‚¨å¯ä»¥å¤šæ¬¡æ‰§è¡Œæ­¤æ“ä½œï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">TYPED_TEST_P(FooTest, DoesBlah) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Inside a test, refer to TypeParam to get the type parameter.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  TypeParam n = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // You will need to use `this` explicitly to refer to fixture members.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  this-&gt;DoSomethingInteresting()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TYPED_TEST_P(FooTest, HasPropertyA) { ... }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ç°åœ¨æ˜¯æ£˜æ‰‹çš„éƒ¨åˆ†ï¼šæ‚¨éœ€è¦ä½¿ç”¨<code>REGISTER_TYPED_TEST_SUITE_P</code> å®ï¼Œç„¶åæ‰èƒ½å®ä¾‹åŒ–å®ƒä»¬ã€‚ç¬¬ä¸€ä¸ª
å®çš„å‚æ•°æ˜¯æµ‹è¯•å¥—ä»¶åç§°ï¼›å…¶ä½™çš„éƒ½æ˜¯åå­—æ­¤æµ‹è¯•å¥—ä»¶ä¸­çš„æµ‹è¯•ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">REGISTER_TYPED_TEST_SUITE_P(FooTest,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            DoesBlah, HasPropertyA);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æœ€åï¼Œæ‚¨å¯ä»¥è‡ªç”±åœ°ä½¿ç”¨æ‚¨æƒ³è¦çš„ç±»å‹å®ä¾‹åŒ–æ¨¡å¼ã€‚å¦‚æœä½ å°†ä¸Šé¢çš„ä»£ç æ”¾åœ¨ä¸€ä¸ªå¤´æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥åœ¨å¤šä¸ªC++ä¸­<code>#include</code>å®ƒ
æºæ–‡ä»¶å¹¶å¤šæ¬¡å®ä¾‹åŒ–å®ƒã€‚</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using MyTypes = ::testing::Types&lt;char, int, unsigned int&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSTANTIATE_TYPED_TEST_SUITE_P(My, FooTest, MyTypes);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ä¸ºäº†åŒºåˆ†æ¨¡å¼çš„ä¸åŒå®ä¾‹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°<code>INSTANTIATE_TYPED_TEST_SUITE_P</code> å®æ˜¯ä¸€ä¸ªå‰ç¼€ï¼Œå°†æ·»åŠ åˆ°
å®é™…çš„æµ‹è¯•å¥—ä»¶åç§°ã€‚è¯·è®°ä½ä¸ºä¸åŒçš„æƒ…å†µé€‰æ‹©å”¯ä¸€çš„å‰ç¼€å®ä¾‹ã€‚</p>
<p>åœ¨ç±»å‹åˆ—è¡¨ä»…åŒ…å«ä¸€ç§ç±»å‹çš„ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥ç¼–å†™ç›´æ¥è¾“å…¥ï¼Œæ— éœ€ <code>::testing::Types&lt;...&gt;</code>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">INSTANTIATE_TYPED_TEST_SUITE_P(My, FooTest, int);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æ‚¨å¯ä»¥æŸ¥çœ‹<a href="https://gitee.com/kumo-pub/ktest/blob/master/kumotest/samples/sample6_unittest.cc" target="_blank" rel="noopener noreferrer" title="Typed Test example">sample6_unittest.cc</a>ä»¥è·å¾—å®Œæ•´çš„ç¤ºä¾‹ã€‚</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="testing-private-code">æµ‹è¯•ç§æœ‰ä»£ç <a href="#testing-private-code" class="hash-link" aria-label="Direct link to æµ‹è¯•ç§æœ‰ä»£ç " title="Direct link to æµ‹è¯•ç§æœ‰ä»£ç ">â€‹</a></h2>
<p>å¦‚æœæ‚¨æ›´æ”¹è½¯ä»¶çš„å†…éƒ¨å®ç°ï¼Œæ‚¨çš„æµ‹è¯•ä¸åº”åªè¦ç”¨æˆ·æ— æ³•è§‚å¯Ÿåˆ°æ›´æ”¹ï¼Œå°±ä¼šä¸­æ–­ã€‚å› æ­¤ï¼Œ<strong>æ ¹æ®
é»‘ç›’æµ‹è¯•åŸåˆ™ï¼Œå¤§å¤šæ•°æ—¶å€™ä½ åº”è¯¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æµ‹è¯•ä½ çš„ä»£ç å®ƒçš„å…¬å…±æ¥å£ã€‚</strong></p>
<p><strong>å¦‚æœæ‚¨ä»ç„¶å‘ç°è‡ªå·±éœ€è¦æµ‹è¯•å†…éƒ¨å®ç°ä»£ç ï¼Œè€ƒè™‘æ˜¯å¦æœ‰æ›´å¥½çš„è®¾è®¡ã€‚</strong> æµ‹è¯•å†…éƒ¨çš„æ„¿æœ›
å®æ–½é€šå¸¸æ˜¯ç­çº§åšå¾—å¤ªå¤šçš„æ ‡å¿—ã€‚è€ƒè™‘æå–å®ç°ç±»å¹¶å¯¹å…¶è¿›è¡Œæµ‹è¯•ã€‚ç„¶åä½¿ç”¨è¯¥å®ç°
åŸæ¥çš„ç­çº§é‡Œçš„ç­çº§ã€‚</p>
<p>å¦‚æœæ‚¨ç»å¯¹å¿…é¡»æµ‹è¯•éå…¬å…±æ¥å£ä»£ç ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥ã€‚é‚£é‡Œ
æœ‰ä¸¤ç§æƒ…å†µéœ€è¦è€ƒè™‘ï¼š</p>
<ul>
<li>é™æ€å‡½æ•°ï¼ˆ<em>ä¸</em>ä¸é™æ€æˆå‘˜å‡½æ•°ç›¸åŒï¼ï¼‰æˆ–æœªå‘½åå‘½åç©ºé—´ï¼Œä»¥åŠ</li>
<li>ç§æœ‰æˆ–å—ä¿æŠ¤çš„ç±»æˆå‘˜</li>
</ul>
<p>ä¸ºäº†æµ‹è¯•å®ƒä»¬ï¼Œæˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹ç‰¹æ®ŠæŠ€æœ¯ï¼š</p>
<ul>
<li>
<p>æœªå‘½åå‘½åç©ºé—´ä¸­çš„é™æ€å‡½æ•°å’Œå®šä¹‰/å£°æ˜
ä»…åœ¨åŒä¸€ç¿»è¯‘å•å…ƒå†…å¯è§ã€‚è¦æµ‹è¯•å®ƒä»¬ï¼Œæ‚¨å¯ä»¥
<code>#include</code> åœ¨æ‚¨çš„ <code>*_test.cc</code> æ–‡ä»¶ä¸­æµ‹è¯•æ•´ä¸ª <code>.cc</code> æ–‡ä»¶ã€‚
ï¼ˆ#include <code>.cc</code> æ–‡ä»¶ä¸æ˜¯é‡ç”¨ä»£ç çš„å¥½æ–¹æ³• - ä½ ä¸åº”è¯¥è¿™æ ·åš
è¿™åœ¨ç”Ÿäº§ä»£ç ä¸­ï¼ï¼‰</p>
<p>ç„¶è€Œï¼Œæ›´å¥½çš„æ–¹æ³•æ˜¯å°†ç§æœ‰ä»£ç ç§»è‡³
<code>foo::internal</code> å‘½åç©ºé—´ï¼Œå…¶ä¸­ <code>foo</code> æ˜¯æ‚¨çš„é¡¹ç›®çš„å‘½åç©ºé—´
é€šå¸¸ä½¿ç”¨ï¼Œå¹¶å°†ç§æœ‰å£°æ˜æ”¾åœ¨â€œ*-internal.hâ€æ–‡ä»¶ä¸­ã€‚
æ‚¨çš„ç”Ÿäº§â€œ.ccâ€æ–‡ä»¶å’Œæ‚¨çš„æµ‹è¯•å¯ä»¥åŒ…å«æ­¤æ–‡ä»¶
å†…éƒ¨æ ‡å¤´ï¼Œä½†æ‚¨çš„å®¢æˆ·ä¸æ˜¯ã€‚è¿™æ ·ä½ å°±å¯ä»¥å……åˆ†æµ‹è¯•ä½ çš„
å†…éƒ¨å®æ–½ï¼Œè€Œä¸ä¼šå°†å…¶æ³„éœ²ç»™æ‚¨çš„å®¢æˆ·ã€‚</p>
</li>
<li>
<p>ç§äººç­çº§æˆå‘˜åªèƒ½ä»ç­çº§å†…éƒ¨æˆ–é€šè¿‡
æœ‹å‹ä»¬ã€‚è¦è®¿é—®ç±»çš„ç§æœ‰æˆå‘˜ï¼Œæ‚¨å¯ä»¥å£°æ˜æ‚¨çš„æµ‹è¯•
å›ºå®šè£…ç½®ä½œä¸ºç±»çš„æœ‹å‹å¹¶åœ¨å›ºå®šè£…ç½®ä¸­å®šä¹‰è®¿é—®å™¨ã€‚æµ‹è¯•
ç„¶åä½¿ç”¨è¯¥è£…ç½®å¯ä»¥è®¿é—®æ‚¨çš„ä½œå“çš„ç§æœ‰æˆå‘˜
é€šè¿‡å¤¹å…·ä¸­çš„è®¿é—®å™¨è¿›è¡Œç±»ã€‚è¯·æ³¨æ„ï¼Œå³ä½¿æ‚¨çš„å›ºå®šè£…ç½®
æ˜¯ä½ çš„ç”Ÿäº§ç±»çš„æœ‹å‹ï¼Œä½ çš„æµ‹è¯•ä¸ä¼šè‡ªåŠ¨è¿›è¡Œ
å®ƒçš„æœ‹å‹ï¼Œå› ä¸ºå®ƒä»¬åœ¨æŠ€æœ¯ä¸Šæ˜¯åœ¨å­ç±»ä¸­å®šä¹‰çš„
å›ºå®šè£…ç½®ã€‚</p>
<p>æµ‹è¯•ç§æœ‰æˆå‘˜çš„å¦ä¸€ç§æ–¹æ³•æ˜¯å°†å®ƒä»¬é‡æ„ä¸º
å®ç°ç±»ï¼Œç„¶ååœ¨â€œ*-internal.hâ€æ–‡ä»¶ä¸­å£°æ˜ã€‚ä½ çš„
å®¢æˆ·ç«¯ä¸å…è®¸åŒ…å«æ­¤æ ‡å¤´ï¼Œä½†æ‚¨çš„æµ‹è¯•å¯ä»¥ã€‚è¿™æ ·å°±æ˜¯
ç§°ä¸º<a href="https://www.gamedev.net/articles/programming/general-and-gameplay-programming/the-c-pimpl-r1794/" target="_blank" rel="noopener noreferrer">Pimpl</a>ï¼ˆç§äººå®æ–½ï¼‰ä¹ è¯­ã€‚</p>
<p>æˆ–è€…ï¼Œæ‚¨å¯ä»¥é€šè¿‡æ·»åŠ ä»¥ä¸‹å†…å®¹æ¥å°†å•ä¸ªæµ‹è¯•å£°æ˜ä¸ºæ‚¨ç­çº§çš„å¥½å‹
ç±»ä¸»ä½“ä¸­çš„è¿™ä¸€è¡Œï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    FRIEND_TEST(TestSuiteName, TestName);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ä¾‹å¦‚ï¼Œ</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// foo.h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Foo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> private:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  FRIEND_TEST(FooTest, BarReturnsZeroOnNull);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int Bar(void* x);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// foo_test.cc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST(FooTest, BarReturnsZeroOnNull) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Foo foo;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  EXPECT_EQ(foo.Bar(NULL), 0);  // Uses Foo&#x27;s private member Bar().</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å½“æ‚¨çš„ç±»åœ¨å‘½åç©ºé—´ä¸­å®šä¹‰æ—¶è¦ç‰¹åˆ«æ³¨æ„ã€‚å¦‚æœä½ æƒ³
æ‚¨çš„æµ‹è¯•è£…ç½®å’Œæµ‹è¯•è¦æˆä¸ºæ‚¨ç­çº§çš„æœ‹å‹ï¼Œé‚£ä¹ˆå®ƒä»¬å¿…é¡»æ˜¯
åœ¨å®Œå…¨ç›¸åŒçš„å‘½åç©ºé—´ä¸­å®šä¹‰ï¼ˆæ— åŒ¿åæˆ–å†…è”å‘½åç©ºé—´ï¼‰ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¦‚æœè¦æµ‹è¯•çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">namespace my_namespace {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Foo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  friend class FooTest;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  FRIEND_TEST(FooTest, Bar);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  FRIEND_TEST(FooTest, Baz);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ... definition of the class Foo ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}  // namespace my_namespace</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æ‚¨çš„æµ‹è¯•ä»£ç åº”è¯¥ç±»ä¼¼äºï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">namespace my_namespace {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class FooTest : public testing::Test {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> protected:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(FooTest, Bar) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(FooTest, Baz) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}  // namespace my_namespace</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="catching-failures">æ•æ‰<code>å¤±è´¥</code><a href="#catching-failures" class="hash-link" aria-label="Direct link to catching-failures" title="Direct link to catching-failures">â€‹</a></h2>
<p>å¦‚æœæ‚¨æ­£åœ¨ kumotest ä¹‹ä¸Šæ„å»ºæµ‹è¯•å®ç”¨ç¨‹åºï¼Œæ‚¨å°†éœ€è¦æµ‹è¯•
ä½ çš„æ•ˆç”¨ã€‚æ‚¨å°†ä½¿ç”¨ä»€ä¹ˆæ¡†æ¶æ¥æµ‹è¯•å®ƒï¼Ÿå½“ç„¶æ˜¯åº“è«æµ‹è¯•ã€‚</p>
<p>æŒ‘æˆ˜åœ¨äºéªŒè¯æ‚¨çš„æµ‹è¯•å®ç”¨ç¨‹åºæ˜¯å¦æ­£ç¡®æŠ¥å‘Šæ•…éšœã€‚
åœ¨é€šè¿‡æŠ›å‡ºå¼‚å¸¸æ¥æŠ¥å‘Šå¤±è´¥çš„æ¡†æ¶ä¸­ï¼Œæ‚¨å¯ä»¥æ•è·
å¼‚å¸¸å¹¶å¯¹å…¶è¿›è¡Œæ–­è¨€ã€‚ä½†æ˜¯kumotestä¸ä½¿ç”¨å¼‚å¸¸ï¼Œé‚£ä¹ˆæ€ä¹ˆåŠ
æˆ‘ä»¬æµ‹è¯•ä¸€æ®µä»£ç æ˜¯å¦ä¼šäº§ç”Ÿé¢„æœŸçš„å¤±è´¥ï¼Ÿ</p>
<p><code>&quot;ktest/ktest-spi.h&quot;</code> åŒ…å«ä¸€äº›ç”¨äºæ‰§è¡Œæ­¤æ“ä½œçš„æ„é€ ã€‚
<code>#include</code> æ­¤æ ‡å¤´åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  EXPECT_FATAL_FAILURE(statement, substring);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æ–­è¨€â€œstatementâ€ä¼šåœ¨å…¶æ¶ˆæ¯åŒ…å«ç»™å®š<code>substring</code>çš„å½“å‰çº¿ç¨‹ï¼Œæˆ–ä½¿ç”¨</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  EXPECT_NONFATAL_FAILURE(statement, substring);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å¦‚æœæ‚¨é¢„è®¡ä¼šå‡ºç°éè‡´å‘½ï¼ˆä¾‹å¦‚<code>EXPECT_*</code>ï¼‰å¤±è´¥ã€‚</p>
<p>ä»…æ£€æŸ¥å½“å‰çº¿ç¨‹ä¸­çš„å¤±è´¥ä»¥ç¡®å®šæ­¤ç»“æœæœŸæœ›ç±»å‹ã€‚å¦‚æœ<code>statement</code>åˆ›å»ºæ–°çº¿ç¨‹ï¼Œè¿™äº›çº¿ç¨‹ä¼šå¤±è´¥
çº¿ç¨‹ä¹Ÿè¢«å¿½ç•¥ã€‚å¦‚æœä½ æƒ³æ•è·å…¶ä»–çº¿ç¨‹ä¸­çš„å¤±è´¥å¥½å§ï¼Œè¯·æ”¹ç”¨ä»¥ä¸‹å®ä¹‹ä¸€ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  EXPECT_FATAL_FAILURE_ON_ALL_THREADS(statement, substring);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  EXPECT_NONFATAL_FAILURE_ON_ALL_THREADS(statement, substring);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>æ³¨æ„ï¼šWindows ç›®å‰ä¸æ”¯æŒæ¥è‡ªå¤šä¸ªçº¿ç¨‹çš„æ–­è¨€ã€‚</p></div></div>
<p>å‡ºäºæŠ€æœ¯åŸå› ï¼Œæœ‰ä¸€äº›æ³¨æ„äº‹é¡¹ï¼š</p>
<ol>
<li>æ‚¨æ— æ³•å°†å¤±è´¥æ¶ˆæ¯ä¼ è¾“åˆ°ä»»ä¸€å®ã€‚</li>
</ol>
<p>2.<code>EXPECT_FATAL_FAILURE{_ON_ALL_THREADS}()</code>ä¸­çš„<code>statement</code>æ— æ³•å¼•ç”¨
å±€éƒ¨éé™æ€å˜é‡æˆ–â€œthisâ€å¯¹è±¡çš„éé™æ€æˆå‘˜ã€‚</p>
<p>3.<code>EXPECT_FATAL_FAILURE{_ON_ALL_THREADS}()</code>ä¸­çš„<code>statement</code>ä¸èƒ½è¿”å›
ä»·å€¼ã€‚</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="registering-tests-programmatically">ä»¥ç¼–ç¨‹æ–¹å¼æ³¨å†Œæµ‹è¯•<a href="#registering-tests-programmatically" class="hash-link" aria-label="Direct link to ä»¥ç¼–ç¨‹æ–¹å¼æ³¨å†Œæµ‹è¯•" title="Direct link to ä»¥ç¼–ç¨‹æ–¹å¼æ³¨å†Œæµ‹è¯•">â€‹</a></h2>
<p><code>TEST</code>å®å¤„ç†ç»å¤§å¤šæ•°ç”¨ä¾‹ï¼Œä½†å¾ˆå°‘æœ‰
éœ€è¦è¿è¡Œæ—¶æ³¨å†Œé€»è¾‘çš„åœ°æ–¹ã€‚å¯¹äºè¿™äº›æƒ…å†µï¼Œæ¡†æ¶
æä¾› <code>::testing::RegisterTest</code> å…è®¸è°ƒç”¨è€…æ³¨å†Œä»»æ„
åŠ¨æ€æµ‹è¯•ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªé«˜çº§ APIï¼Œä»…åœ¨<code>TEST</code>å®ä¸è¶³æ—¶ä½¿ç”¨ã€‚
å¦‚æœå¯èƒ½çš„è¯ï¼Œå®åº”è¯¥æ˜¯é¦–é€‰ï¼Œå› ä¸ºå®ƒä»¬é¿å…äº†å¤§å¤šæ•°
è°ƒç”¨è¯¥å‡½æ•°çš„å¤æ‚æ€§ã€‚</p>
<p>å®ƒæä¾›ä»¥ä¸‹ç­¾åï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">template &lt;typename Factory&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TestInfo* RegisterTest(const char* test_suite_name, const char* test_name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       const char* type_param, const char* value_param,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       const char* file, int line, Factory factory);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>factory</code> å‚æ•°æ˜¯ä¸€ä¸ªå·¥å‚å¯è°ƒç”¨ï¼ˆå¯ç§»åŠ¨æ„é€ ï¼‰å¯¹è±¡æˆ–
åˆ›å»º Test å¯¹è±¡çš„æ–°å®ä¾‹çš„å‡½æ•°æŒ‡é’ˆã€‚å®ƒå¤„ç†æ‰€æœ‰æƒå½’è°ƒç”¨è€…ã€‚å¯è°ƒç”¨çš„ç­¾åæ˜¯<code>Fixture*()</code>ï¼Œå…¶ä¸­
<code>Fixture</code> æ˜¯æµ‹è¯•çš„æµ‹è¯•å¤¹å…·ç±»ã€‚æ‰€æœ‰æµ‹è¯•å·²åœ¨ç›¸åŒçš„<code>test_suite_name</code>å¿…é¡»è¿”å›ç›¸åŒçš„è£…ç½®ç±»å‹ã€‚è¿™æ˜¯åœ¨ä»¥ä¸‹ä½ç½®æ£€æŸ¥çš„
è¿è¡Œæ—¶ã€‚</p>
<p>è¯¥æ¡†æ¶å°†ä»å·¥å‚æ¨æ–­å‡ºå›ºå®šè£…ç½®ç±»ï¼Œå¹¶è°ƒç”¨<code>SetUpTestSuite</code> å’Œ <code>TearDownTestSuite</code> ã€‚</p>
<p>å¿…é¡»åœ¨è°ƒç”¨ RUN_ALL_TESTS() ä¹‹å‰è°ƒç”¨ï¼Œå¦åˆ™è¡Œä¸ºä¸ºä¸æ˜ç¡®çš„ã€‚</p>
<p>ç”¨ä¾‹ç¤ºä¾‹ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class MyFixture : public testing::Test {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // All of these optional, just like in regular macro usage.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  static void SetUpTestSuite() { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  static void TearDownTestSuite() { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  void SetUp() override { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  void TearDown() override { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class MyTest : public MyFixture {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> public:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  explicit MyTest(int data) : data_(data) {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  void TestBody() override { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> private:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int data_;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void RegisterMyTests(const std::vector&lt;int&gt;&amp; values) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  for (int v : values) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    testing::RegisterTest(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;MyFixture&quot;, (&quot;Test&quot; + std::to_string(v)).c_str(), nullptr,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        std::to_string(v).c_str(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        __FILE__, __LINE__,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Important to use the fixture type as the return type here.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [=]() -&gt; MyFixture* { return new MyTest(v); });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int main(int argc, char** argv) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  testing::InitKumoTest(&amp;argc, argv);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std::vector&lt;int&gt; values_to_test = LoadValuesFromConfig();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  RegisterMyTests(values_to_test);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return RUN_ALL_TESTS();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="getting-the-current-test&#x27;s-name">è·å–å½“å‰æµ‹è¯•çš„åç§°<a href="#getting-the-current-test&#x27;s-name" class="hash-link" aria-label="Direct link to è·å–å½“å‰æµ‹è¯•çš„åç§°" title="Direct link to è·å–å½“å‰æµ‹è¯•çš„åç§°">â€‹</a></h2>
<p>æœ‰æ—¶ï¼Œå‡½æ•°å¯èƒ½éœ€è¦çŸ¥é“å½“å‰æ­£åœ¨è¿è¡Œçš„æµ‹è¯•çš„åç§°ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½æ­£åœ¨ä½¿ç”¨æµ‹è¯•è£…ç½®çš„<code>SetUp()</code>æ–¹æ³•æ¥è®¾ç½®
åŸºäºæ­£åœ¨è¿è¡Œçš„æµ‹è¯•çš„é»„é‡‘æ–‡ä»¶åã€‚è¿™<a href="/docs/next/cpp/base/testing/kt/reference/testing#TestInfo"><code>TestInfo</code></a> ç±»å…·æœ‰æ­¤ä¿¡æ¯ã€‚</p>
<p>è¦è·å–å½“å‰æ­£åœ¨è¿è¡Œçš„æµ‹è¯•çš„â€œTestInfoâ€å¯¹è±¡ï¼Œè¯·è°ƒç”¨<a href="/docs/next/cpp/base/testing/kt/reference/testing#UnitTest"><code>UnitTest</code></a> ä¸Šçš„ <code>current_test_info()</code>
å•ä¾‹å¯¹è±¡ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  // Gets information about the currently running test.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Do NOT delete the returned object - it&#x27;s managed by the UnitTest class.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const testing::TestInfo* const test_info =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      testing::UnitTest::GetInstance()-&gt;current_test_info();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  printf(&quot;We are in test %s of test suite %s.\n&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         test_info-&gt;name(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         test_info-&gt;test_suite_name());</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å¦‚æœæ²¡æœ‰æµ‹è¯•æ­£åœ¨è¿è¡Œï¼Œåˆ™<code>current_test_info()</code>è¿”å›ç©ºæŒ‡é’ˆã€‚åœ¨ç‰¹åˆ«æ˜¯ï¼Œæ‚¨æ— æ³•åœ¨<code>SetUpTestSuite()</code>ä¸­æ‰¾åˆ°æµ‹è¯•å¥—ä»¶åç§°ï¼Œ
<code>TearDownTestSuite()</code>ï¼ˆæ‚¨éšå¼çŸ¥é“æµ‹è¯•å¥—ä»¶åç§°ï¼‰ï¼Œæˆ–è€…ä»å®ƒä»¬è°ƒç”¨çš„å‡½æ•°ã€‚</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extending-kumotest-by-handling-test-events">é€šè¿‡å¤„ç†æµ‹è¯•äº‹ä»¶æ‰©å±• kumotest<a href="#extending-kumotest-by-handling-test-events" class="hash-link" aria-label="Direct link to é€šè¿‡å¤„ ç†æµ‹è¯•äº‹ä»¶æ‰©å±• kumotest" title="Direct link to é€šè¿‡å¤„ç†æµ‹è¯•äº‹ä»¶æ‰©å±• kumotest">â€‹</a></h2>
<p>kumotest æä¾›äº†<strong>äº‹ä»¶ä¾¦å¬å™¨ API</strong> æ¥è®©æ‚¨æ¥æ”¶é€šçŸ¥å…³äºæµ‹è¯•ç¨‹åºçš„è¿›åº¦å’Œæµ‹è¯•å¤±è´¥ã€‚æ‚¨å¯ä»¥å‚åŠ çš„æ´»åŠ¨
ç›‘å¬åŒ…æ‹¬æµ‹è¯•ç¨‹åºã€æµ‹è¯•å¥—ä»¶æˆ–æµ‹è¯•çš„å¼€å§‹å’Œç»“æŸæ–¹æ³•ç­‰ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ­¤ API æ¥å¢å¼ºæˆ–æ›¿æ¢æ ‡å‡†
æ§åˆ¶å°è¾“å‡ºï¼Œæ›¿æ¢XMLè¾“å‡ºï¼Œæˆ–è€…æä¾›å®Œå…¨ä¸åŒçš„å½¢å¼è¾“å‡ºï¼Œä¾‹å¦‚ GUI æˆ–æ•°æ®åº“ã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨æµ‹è¯•äº‹ä»¶ä½œä¸º
ä¾‹å¦‚ï¼Œæ£€æŸ¥ç‚¹æ¥å®ç°èµ„æºæ³„æ¼æ£€æŸ¥å™¨ã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="defining-event-listeners">å®šä¹‰äº‹ä»¶ç›‘å¬å™¨<a href="#defining-event-listeners" class="hash-link" aria-label="Direct link to å®šä¹‰äº‹ä»¶ç›‘å¬å™¨" title="Direct link to å®šä¹‰äº‹ä»¶ç›‘å¬å™¨">â€‹</a></h3>
<p>è¦å®šä¹‰äº‹ä»¶ä¾¦å¬å™¨ï¼Œæ‚¨å¯ä»¥å­ç±»åŒ–
<a href="/docs/next/cpp/base/testing/kt/reference/testing#TestEventListener"><code>æµ‹è¯•::TestEventListener</code></a> æˆ–
<a href="/docs/next/cpp/base/testing/kt/reference/testing#EmptyTestEventListener"><code>æµ‹è¯•::EmptyTestEventListener</code></a>
å‰è€…æ˜¯ä¸€ä¸ªï¼ˆæŠ½è±¡ï¼‰æ¥å£ï¼Œå…¶ä¸­<em>æ¯ä¸ªçº¯è™šæ–¹æ³•éƒ½å¯ä»¥æ˜¯
é‡å†™ä»¥å¤„ç†æµ‹è¯•äº‹ä»¶</em>ï¼ˆä¾‹å¦‚ï¼Œå½“æµ‹è¯•å¼€å§‹æ—¶ï¼Œ
<code>OnTestStart()</code> æ–¹æ³•å°†è¢«è°ƒç”¨ã€‚ï¼‰ã€‚åè€…æä¾›äº†ä¸€ä¸ªç©ºçš„
æ¥å£ä¸­æ‰€æœ‰æ–¹æ³•çš„å®ç°ï¼Œè¿™æ ·å­ç±»åªéœ€è¦
è¦†ç›–å®ƒå…³å¿ƒçš„æ–¹æ³•ã€‚</p>
<p>å½“ä¸€ä¸ªäº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œå®ƒçš„ä¸Šä¸‹æ–‡è¢«ä½œä¸ºä¸€ä¸ªä¼ é€’ç»™å¤„ç†å‡½æ•°
äº‰è®ºã€‚ä½¿ç”¨ä»¥ä¸‹å‚æ•°ç±»å‹ï¼š</p>
<ul>
<li>UnitTeståæ˜ äº†æ•´ä¸ªæµ‹è¯•ç¨‹åºçš„çŠ¶æ€ï¼Œ</li>
<li>TestSuite åŒ…å«æœ‰å…³æµ‹è¯•å¥—ä»¶çš„ä¿¡æ¯ï¼Œå…¶ä¸­å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ª
æµ‹è¯•ï¼Œ</li>
<li>TestInfo åŒ…å«æµ‹è¯•çš„çŠ¶æ€ï¼Œä»¥åŠ</li>
<li>TestPartResult è¡¨ç¤ºæµ‹è¯•æ–­è¨€çš„ç»“æœã€‚</li>
</ul>
<p>äº‹ä»¶å¤„ç†å‡½æ•°å¯ä»¥æ£€æŸ¥å®ƒæ¥æ”¶åˆ°çš„å‚æ•°ä»¥æ‰¾å‡ºç­”æ¡ˆ
æœ‰å…³äº‹ä»¶å’Œæµ‹è¯•ç¨‹åºçŠ¶æ€çš„æœ‰è¶£ä¿¡æ¯ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  class MinimalistPrinter : public testing::EmptyTestEventListener {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Called before a test starts.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void OnTestStart(const testing::TestInfo&amp; test_info) override {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      printf(&quot;*** Test %s.%s starting.\n&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             test_info.test_suite_name(), test_info.name());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Called after a failed assertion or a SUCCESS().</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void OnTestPartResult(const testing::TestPartResult&amp; test_part_result) override {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      printf(&quot;%s in %s:%d\n%s\n&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             test_part_result.failed() ? &quot;*** Failure&quot; : &quot;Success&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             test_part_result.file_name(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             test_part_result.line_number(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             test_part_result.summary());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Called after a test ends.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void OnTestEnd(const testing::TestInfo&amp; test_info) override {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      printf(&quot;*** Test %s.%s ending.\n&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             test_info.test_suite_name(), test_info.name());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  };</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="using-event-isteners">ä½¿ç”¨äº‹ä»¶ç›‘å¬å™¨<a href="#using-event-isteners" class="hash-link" aria-label="Direct link to ä½¿ç”¨äº‹ä»¶ç›‘å¬å™¨" title="Direct link to ä½¿ç”¨äº‹ä»¶ç›‘å¬å™¨">â€‹</a></h3>
<p>è¦ä½¿ç”¨æ‚¨å®šä¹‰çš„äº‹ä»¶ä¾¦å¬å™¨ï¼Œè¯·å°†å…¶å®ä¾‹æ·»åŠ åˆ°
kumotest äº‹ä»¶ç›‘å¬å™¨åˆ—è¡¨ï¼ˆç”±ç±»è¡¨ç¤º
<a href="/docs/next/cpp/base/testing/kt/reference/testing#TestEventListeners"><code>TestEventListeners</code></a> - æ³¨æ„<code>â€œsâ€</code>
åœ¨ä½ çš„<code>main()</code>å‡½æ•°ä¸­ï¼Œåœ¨è°ƒç”¨ä¹‹å‰<code>RUN_ALL_TESTS()</code>:</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">int main(int argc, char** argv) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  testing::InitKumoTest(&amp;argc, argv);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Gets hold of the event listener list.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  testing::TestEventListeners&amp; listeners =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      testing::UnitTest::GetInstance()-&gt;listeners();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Adds a listener to the end.  kumotest takes the ownership.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  listeners.Append(new MinimalistPrinter);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return RUN_ALL_TESTS();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>åªæœ‰ä¸€ä¸ªé—®é¢˜ï¼šé»˜è®¤çš„æµ‹è¯•ç»“æœæ‰“å°æœºä»ç„¶æœ‰æ•ˆï¼Œæ‰€ä»¥å®ƒçš„è¾“å‡ºå°†ä¸æç®€æ‰“å°æœºçš„è¾“å‡ºæ··åˆåœ¨ä¸€èµ·ã€‚å‹åˆ¶
é»˜è®¤æ‰“å°æœºï¼Œåªéœ€å°†å…¶ä»äº‹ä»¶ç›‘å¬åˆ—è¡¨ä¸­é‡Šæ”¾å¹¶åˆ é™¤å³å¯ã€‚æ‚¨å¯ä»¥é€šè¿‡æ·»åŠ ä¸€è¡Œæ¥å®Œæˆæ­¤æ“ä½œï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  delete listeners.Release(listeners.default_result_printer());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  listeners.Append(new MinimalistPrinter);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return RUN_ALL_TESTS();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now, sit back and enjoy a completely different output from your tests. For more
details, see <a href="https://gitee.com/kumo-pub/ktest/blob/master/kumotest/samples/sample9_unittest.cc" target="_blank" rel="noopener noreferrer" title="Event listener example">sample9_unittest.cc</a>.</p>
<p>æ‚¨å¯ä»¥å°†å¤šä¸ªä¾¦å¬å™¨æ·»åŠ åˆ°åˆ—è¡¨ä¸­ã€‚å½“<code>On*Start()</code>æˆ–<code>OnTestPartResult()</code> äº‹ä»¶è¢«è§¦å‘ï¼Œç›‘å¬å™¨å°†æŒ‰é¡ºåºæ¥æ”¶å®ƒ
å®ƒä»¬å‡ºç°åœ¨åˆ—è¡¨ä¸­ï¼ˆå› ä¸ºæ–°çš„ä¾¦å¬å™¨è¢«æ·»åŠ åˆ°åˆ—è¡¨çš„æœ«å°¾ï¼Œé»˜è®¤æ–‡æœ¬æ‰“å°æœºå’Œé»˜è®¤ XML ç”Ÿæˆå™¨å°†æ¥æ”¶è¯¥äº‹ä»¶
ç¬¬ä¸€çš„ï¼‰ã€‚ <em>åå‘</em>ä¸­çš„ä¾¦å¬å™¨å°†æ¥æ”¶â€œOn*End()â€äº‹ä»¶å‘½ä»¤ã€‚è¿™å…è®¸ç¨åæ·»åŠ çš„ä¾¦å¬å™¨çš„è¾“å‡ºç”±ä»¥ä¸‹è¾“å‡ºæ„æˆ
ä¹‹å‰æ·»åŠ çš„å¬ä¼—ã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="generating-failures-in-listeners">åœ¨å¬ä¼—ä¸­äº§ç”Ÿå¤±è´¥<a href="#generating-failures-in-listeners" class="hash-link" aria-label="Direct link to åœ¨å¬ä¼—ä¸­äº§ç”Ÿå¤±è´¥" title="Direct link to åœ¨å¬ä¼—ä¸­äº§ç”Ÿå¤±è´¥">â€‹</a></h3>
<p>æ‚¨å¯ä»¥ä½¿ç”¨å¼•å‘å¤±è´¥çš„å®ï¼ˆ<code>EXPECT_*()</code>ã€<code>ASSERT_*()</code>ã€<code>FAIL()</code>ç­‰ï¼‰
å¤„ç†äº‹ä»¶æ—¶ã€‚æœ‰ä¸€äº›é™åˆ¶ï¼š</p>
<ol>
<li>ä½ ä¸èƒ½åœ¨<code>OnTestPartResult()</code>ä¸­äº§ç”Ÿä»»ä½•å¤±è´¥ï¼ˆå¦åˆ™ä¼š
å¯¼è‡´ <code>OnTestPartResult()</code> è¢«é€’å½’è°ƒç”¨ï¼‰ã€‚</li>
<li>å¤„ç†<code>OnTestPartResult()</code>çš„ç›‘å¬å™¨ä¸å…è®¸ç”Ÿæˆä»»ä½•
å¤±è´¥ã€‚</li>
</ol>
<p>å½“æ‚¨å°†ä¾¦å¬å™¨æ·»åŠ åˆ°ä¾¦å¬å™¨åˆ—è¡¨æ—¶ï¼Œæ‚¨åº”è¯¥å°†ä»¥ä¸‹ä¾¦å¬å™¨æ”¾å…¥
<em>åœ¨</em>å¯èƒ½ç”Ÿæˆå¤±è´¥çš„ç›‘å¬å™¨ä¹‹å‰å¤„ç†<code>OnTestPartResult()</code>ã€‚è¿™
ç¡®ä¿åè€…äº§ç”Ÿçš„æ•…éšœå½’å› äºæ­£ç¡®çš„æµ‹è¯•ç”±å‰è€…ã€‚</p>
<p>æœ‰å…³å¤±è´¥å¼•å‘ä¾¦å¬å™¨çš„ç¤ºä¾‹ï¼Œè¯·å‚é˜… <a href="https://gitee.com/kumo-pub/ktest/blob/master/kumotest/samples/sample10_unittest.cc" target="_blank" rel="noopener noreferrer" title="Failure-raising listener example">sample10_unittest.cc</a>ã€‚</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="running-test-programs-advanced-options">è¿è¡Œæµ‹è¯•ç¨‹åºï¼šé«˜çº§é€‰é¡¹<a href="#running-test-programs-advanced-options" class="hash-link" aria-label="Direct link to è¿è¡Œæµ‹è¯•ç¨‹åºï¼šé«˜çº§é€‰é¡¹" title="Direct link to è¿è¡Œæµ‹è¯•ç¨‹åºï¼šé«˜çº§é€‰é¡¹">â€‹</a></h2>
<p>kumotest æµ‹è¯•ç¨‹åºæ˜¯æ™®é€šçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚æ„å»ºå®Œæˆåï¼Œæ‚¨å¯ä»¥è¿è¡Œå®ƒä»¬
ç›´æ¥å¹¶é€šè¿‡ä»¥ä¸‹ç¯å¢ƒå˜é‡å½±å“ä»–ä»¬çš„è¡Œä¸º<code>å’Œ/æˆ–</code>å‘½ä»¤è¡Œæ ‡å¿—ã€‚ä¸ºäº†ä½¿æ ‡å¿—èµ·ä½œç”¨ï¼Œæ‚¨çš„ç¨‹åºå¿…é¡»è°ƒç”¨
åœ¨è°ƒç”¨ <code>RUN_ALL_TESTS()</code> ä¹‹å‰<code>::testing::InitKumoTest()</code>ã€‚</p>
<p>è¦æŸ¥çœ‹æ”¯æŒçš„æ ‡å¿—åŠå…¶ç”¨æ³•çš„åˆ—è¡¨ï¼Œè¯·è¿è¡Œæ‚¨çš„æµ‹è¯•ç¨‹åº
å¸¦æœ‰<code>--help</code>æ ‡å¿—ã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ç¼©å†™<code>-h</code>ã€<code>-?</code>æˆ–<code>/?</code>ã€‚</p>
<p>å¦‚æœä¸€ä¸ªé€‰é¡¹åŒæ—¶ç”±ç¯å¢ƒå˜é‡å’Œæ ‡å¿—æŒ‡å®šï¼Œåˆ™åè€…ä¼˜å…ˆã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="selecting-tests">é€‰æ‹©æµ‹è¯•<a href="#selecting-tests" class="hash-link" aria-label="Direct link to é€‰æ‹©æµ‹è¯•" title="Direct link to é€‰æ‹©æµ‹è¯•">â€‹</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="listing-test-names">åˆ—å‡ºæµ‹è¯•åç§°<a href="#listing-test-names" class="hash-link" aria-label="Direct link to åˆ—å‡ºæµ‹è¯•åç§°" title="Direct link to åˆ—å‡ºæµ‹è¯•åç§°">â€‹</a></h4>
<p>æœ‰æ—¶éœ€è¦å…ˆåˆ—å‡ºç¨‹åºä¸­å¯ç”¨çš„æµ‹è¯•è¿è¡Œå®ƒä»¬ä»¥ä¾¿åœ¨éœ€è¦æ—¶å¯ä»¥åº”ç”¨è¿‡æ»¤å™¨ã€‚åŒ…æ‹¬å›½æ——
<code>--ktest_list_tests</code> è¦†ç›–æ‰€æœ‰å…¶ä»–æ ‡å¿—å¹¶åœ¨ä¸‹é¢åˆ—å‡ºæµ‹è¯•
æ ¼å¼ï¼š</p>
<div class="language-none codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-none codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">TestSuite1.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  TestName1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  TestName2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TestSuite2.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  TestName</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å¦‚æœæä¾›äº†è¯¥æ ‡å¿—ï¼Œåˆ™åˆ—å‡ºçš„æµ‹è¯•éƒ½ä¸ä¼šå®é™…è¿è¡Œã€‚æ²¡æœ‰è¯¥æ ‡å¿—å¯¹åº”çš„ç¯å¢ƒå˜é‡ã€‚</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="running-a-subset-of-the-tests">è¿è¡Œæµ‹è¯•çš„å­é›†<a href="#running-a-subset-of-the-tests" class="hash-link" aria-label="Direct link to è¿è¡Œæµ‹è¯•çš„å­é›†" title="Direct link to è¿è¡Œæµ‹è¯•çš„å­é›†">â€‹</a></h4>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œkumotest ç¨‹åºè¿è¡Œç”¨æˆ·å®šä¹‰çš„æ‰€æœ‰æµ‹è¯•ã€‚æœ‰æ—¶ï¼Œæ‚¨åªæƒ³è¿è¡Œæµ‹è¯•çš„å­é›†ï¼ˆä¾‹å¦‚ï¼Œç”¨äºè°ƒè¯•æˆ–å¿«é€Ÿ
éªŒè¯æ›´æ”¹ï¼‰ã€‚å¦‚æœæ‚¨è®¾ç½®äº†<code>KTEST_FILTER</code>ç¯å¢ƒå˜é‡æˆ–<code>--ktest_filter</code> æ ‡å¿—åˆ°è¿‡æ»¤å™¨å­—ç¬¦ä¸²ï¼Œkumotest å°†åªè¿è¡Œæµ‹è¯•
å…¶å…¨åï¼ˆä»¥<code>TestSuiteName.TestName</code>çš„å½¢å¼ï¼‰ä¸è¿‡æ»¤å™¨åŒ¹é…ã€‚</p>
<p>è¿‡æ»¤å™¨çš„æ ¼å¼æ˜¯ä¸€ä¸ªä»¥<code>:</code>åˆ†éš”çš„é€šé…ç¬¦æ¨¡å¼åˆ—è¡¨ï¼ˆç§°ä¸º
<em>æ­£æ¨¡å¼</em>) å¯é€‰åœ°åè·Ÿä¸€ä¸ª<code>-</code>å’Œå¦ä¸€ä¸ª
&#x27;<code>:</code>&#x27; åˆ†éš”çš„æ¨¡å¼åˆ—è¡¨ï¼ˆç§°ä¸º<em>è´Ÿæ¨¡å¼</em>ï¼‰ã€‚æµ‹è¯•åŒ¹é…
è¿‡æ»¤å™¨å½“ä¸”ä»…å½“å®ƒä¸ä»»ä½•æ­£æ¨¡å¼åŒ¹é…ä½†ä¸åŒ¹é…æ—¶
åŒ¹é…ä»»ä½•å¦å®šæ¨¡å¼ã€‚</p>
<p>æ¨¡å¼å¯ä»¥åŒ…å«<code>â€œ*â€</code>ï¼ˆåŒ¹é…ä»»ä½•å­—ç¬¦ä¸²ï¼‰æˆ–â€œ?â€ï¼ˆåŒ¹é…ä»»ä½•å•ä¸ªå­—ç¬¦ä¸²ï¼‰
ç‰¹ç‚¹ï¼‰ã€‚ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œè¿‡æ»¤å™¨<code>*-NegativePatterns</code>ä¹Ÿå¯ä»¥
å†™ä¸º<code>-NegativePatterns</code>ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li><code>./foo_test</code> æ²¡æœ‰æ ‡å¿—ï¼Œå› æ­¤è¿è¡Œå…¶æ‰€æœ‰æµ‹è¯•ã€‚</li>
<li><code>./foo_test --ktest_filter=*</code> ä¹Ÿè¿è¡Œæ‰€æœ‰å†…å®¹ï¼Œå› ä¸ºå•ä¸ª
åŒ¹é…æ‰€æœ‰â€œ*â€å€¼ã€‚</li>
<li><code>./foo_test --ktest_filter=FooTest.*</code> è¿è¡Œæµ‹è¯•å¥—ä»¶ä¸­çš„æ‰€æœ‰å†…å®¹
<code>è„šæµ‹è¯•</code>ã€‚</li>
<li><code>./foo_test --ktest_filter=*Null*:*Constructor*</code> è¿è¡Œä»»ä½•å…¶å®Œæ•´çš„æµ‹è¯•
name åŒ…å« <code>&quot;Null&quot;</code> æˆ– <code>&quot;Constructor&quot;</code> ã€‚</li>
<li><code>./foo_test --ktest_filter=-*DeathTest.*</code> è¿è¡Œæ‰€æœ‰éæ­»äº¡æµ‹è¯•ã€‚</li>
<li><code>./foo_test --ktest_filter=FooTest.*-FooTest.Bar</code> è¿è¡Œæµ‹è¯•ä¸­çš„æ‰€æœ‰å†…å®¹
å¥—ä»¶â€œFooTestâ€ï¼Œä½†â€œFooTest.Barâ€é™¤å¤–ã€‚</li>
<li><code>./foo_test --ktest_filter=FooTest.*:BarTest.*-FooTest.Bar:BarTest.Foo</code> è¿è¡Œ
æµ‹è¯•å¥—ä»¶<code>FooTest</code>ä¸­çš„æ‰€æœ‰å†…å®¹ï¼ˆé™¤äº†<code>FooTest.Bar</code>ï¼‰ä»¥åŠ<code>FooTest</code>ä¸­çš„æ‰€æœ‰å†…å®¹
æµ‹è¯•å¥—ä»¶<code>BarTest</code>ï¼Œé™¤äº†<code>BarTest.Foo</code>ã€‚</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="stop-test-execution-upon-first-failure">ç¬¬ä¸€æ¬¡å¤±è´¥æ—¶åœæ­¢æµ‹è¯•æ‰§è¡Œ<a href="#stop-test-execution-upon-first-failure" class="hash-link" aria-label="Direct link to ç¬¬ä¸€æ¬¡å¤±è´¥æ—¶åœæ­¢æµ‹è¯•æ‰§è¡Œ" title="Direct link to ç¬¬ä¸€æ¬¡å¤±è´¥æ—¶åœæ­¢æµ‹è¯•æ‰§è¡Œ">â€‹</a></h4>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œkumotest ç¨‹åºè¿è¡Œç”¨æˆ·å®šä¹‰çš„æ‰€æœ‰æµ‹è¯•ã€‚åœ¨ä¸€äº›æƒ…å†µï¼ˆä¾‹å¦‚è¿­ä»£æµ‹è¯•å¼€å‘å’Œæ‰§è¡Œï¼‰å¯èƒ½éœ€è¦åœæ­¢
ç¬¬ä¸€æ¬¡å¤±è´¥æ—¶æµ‹è¯•æ‰§è¡Œï¼ˆä»¥æ”¹è¿›å»¶è¿Ÿæ¢å–å®Œæ•´æ€§ï¼‰ã€‚å¦‚æœè®¾ç½®äº†<code>KTEST_FAIL_FAST</code>ç¯å¢ƒå˜é‡æˆ–<code>--ktest_fail_fast</code>æ ‡å¿—ï¼Œ
ä¸€æ—¦å‘ç°ç¬¬ä¸€ä¸ªæµ‹è¯•å¤±è´¥ï¼Œæµ‹è¯•è¿è¡Œå™¨å°†åœæ­¢æ‰§è¡Œã€‚</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="temporarily-disabling-tests">æš‚æ—¶ç¦ç”¨æµ‹è¯•<a href="#temporarily-disabling-tests" class="hash-link" aria-label="Direct link to æš‚æ—¶ç¦ç”¨æµ‹è¯•" title="Direct link to æš‚æ—¶ç¦ç”¨æµ‹è¯•">â€‹</a></h4>
<p>å¦‚æœæ‚¨æœ‰æ— æ³•ç«‹å³ä¿®å¤çš„æŸåæµ‹è¯•ï¼Œæ‚¨å¯ä»¥æ·»åŠ 
å…¶åç§°çš„å‰ç¼€ä¸º<code>DISABLED_</code>ã€‚è¿™ä¼šå°†å…¶æ’é™¤åœ¨æ‰§è¡Œä¹‹å¤–ã€‚è¿™æ˜¯
æ¯”æ³¨é‡Šæ‰ä»£ç æˆ–ä½¿ç”¨â€œ#if 0â€æ›´å¥½ï¼Œå› ä¸ºç¦ç”¨çš„æµ‹è¯•
ä»ç„¶ç¼–è¯‘ï¼ˆå› æ­¤ä¸ä¼šè…çƒ‚ï¼‰ã€‚</p>
<p>å¦‚æœæ‚¨éœ€è¦ç¦ç”¨æµ‹è¯•å¥—ä»¶ä¸­çš„æ‰€æœ‰æµ‹è¯•ï¼Œæ‚¨å¯ä»¥æ·»åŠ <code>DISABLED_</code>
æ·»åŠ åˆ°æ¯ä¸ªæµ‹è¯•åç§°çš„å‰é¢ï¼Œæˆ–è€…å°†å…¶æ·»åŠ åˆ°
æµ‹è¯•å¥—ä»¶åç§°ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä»¥ä¸‹æµ‹è¯•ä¸ä¼šç”± kumotest è¿è¡Œï¼Œå³ä½¿å®ƒä»¬
ä»å°†è¢«ç¼–è¯‘ï¼š</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Tests that Foo does Abc.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST(FooTest, DISABLED_DoesAbc) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class DISABLED_BarTest : public testing::Test { ... };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Tests that Bar does Xyz.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST_F(DISABLED_BarTest, DoesXyz) { ... }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>æ­¤åŠŸèƒ½åªèƒ½ç”¨äºæš‚æ—¶ç¼“è§£ç–¼ç—›ã€‚ä½ è¿˜æœ‰
ä»¥ä¾¿ç¨åä¿®å¤ç¦ç”¨çš„æµ‹è¯•ã€‚æé†’ä¸€ä¸‹ï¼Œkumotest å°†æ‰“å°
å¦‚æœæµ‹è¯•ç¨‹åºåŒ…å«ä»»ä½•ç¦ç”¨çš„æµ‹è¯•ï¼Œåˆ™ä¼šå‡ºç°è­¦å‘Šæ‚¨çš„æ¨ªå¹…ã€‚</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>æ‚¨å¯ä»¥è½»æ¾è®¡ç®—æ‚¨ä½¿ç”¨çš„å·²ç¦ç”¨æµ‹è¯•çš„æ•°é‡<code>grep</code>ã€‚è¿™ä¸ªæ•°å­—å¯ä»¥ç”¨ä½œè¡¡é‡æé«˜æ‚¨çš„æµ‹è¯•è´¨é‡ã€‚</p></div></div>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="temporarily-enabling-disabled-tests">æš‚æ—¶å¯ç”¨ç¦ç”¨çš„æµ‹è¯•<a href="#temporarily-enabling-disabled-tests" class="hash-link" aria-label="Direct link to æš‚æ—¶å¯ç”¨ç¦ç”¨çš„æµ‹è¯•" title="Direct link to æš‚æ—¶å¯ç”¨ç¦ç”¨çš„æµ‹è¯•">â€‹</a></h4>
<p>è¦åœ¨æµ‹è¯•æ‰§è¡Œä¸­åŒ…å«ç¦ç”¨çš„æµ‹è¯•ï¼Œåªéœ€ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è°ƒç”¨æµ‹è¯•ç¨‹åº
<code>--ktest_also_run_disabled_tests</code> æ ‡å¿—æˆ–è®¾ç½®
å°†<code>KTEST_ALSO_RUN_DISABLED_TESTS</code>ç¯å¢ƒå˜é‡è®¾ç½®ä¸º<code>0</code>ä»¥å¤–çš„å€¼ã€‚
æ‚¨å¯ä»¥å°†å…¶ä¸<code>--ktest_filter</code>æ ‡å¿—ç»“åˆèµ·æ¥ä»¥è¿›ä¸€æ­¥é€‰æ‹©
ç¦ç”¨æµ‹è¯•è¿è¡Œã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="repeating-the-tests">é‡å¤æµ‹è¯•<a href="#repeating-the-tests" class="hash-link" aria-label="Direct link to é‡å¤æµ‹è¯•" title="Direct link to é‡å¤æµ‹è¯•">â€‹</a></h3>
<p>æœ‰æ—¶ä½ ä¼šé‡åˆ°ä¸€ä¸ªç»“æœæ˜¯å¶ç„¶çš„æµ‹è¯•ã€‚æˆ–è®¸å®ƒ
ä»… 1% çš„æƒ…å†µä¸‹ä¼šå¤±è´¥ï¼Œå› æ­¤å¾ˆéš¾é‡ç°è¯¥é”™è¯¯
ä¸€ä¸ªè°ƒè¯•å™¨ã€‚è¿™å¯èƒ½æ˜¯ä»¤äººæ²®ä¸§çš„ä¸€ä¸ªä¸»è¦åŸå› ã€‚</p>
<p><code>--ktest_repeat</code> æ ‡å¿—å…è®¸æ‚¨é‡å¤æ‰€æœ‰ï¼ˆæˆ–é€‰å®šçš„ï¼‰æµ‹è¯•æ–¹æ³•
ä¸€ä¸ªç¨‹åºå¾ˆå¤šæ¬¡ã€‚å¸Œæœ›ä¸€ä¸ªä¸ç¨³å®šçš„æµ‹è¯•æœ€ç»ˆä¼šå¤±è´¥å¹¶ç»™ä½ 
æœ‰æœºä¼šè°ƒè¯•ã€‚ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<div class="language-none codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-none codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ foo_test --ktest_repeat=1000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Repeat foo_test 1000 times and don&#x27;t stop at failures.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ foo_test --ktest_repeat=-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">A negative count means repeating forever.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ foo_test --ktest_repeat=1000 --ktest_break_on_failure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Repeat foo_test 1000 times, stopping at the first failure.  This</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">is especially useful when running under a debugger: when the test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fails, it will drop into the debugger and you can then inspect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variables and stacks.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ foo_test --ktest_repeat=1000 --ktest_filter=FooBar.*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Repeat the tests whose name matches the filter 1000 times.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å¦‚æœä½ çš„æµ‹è¯•ç¨‹åºåŒ…å«<a href="#global-set-up-and-tear-down">å…¨å±€è®¾ç½®/æ‹†å¸</a>ä»£ç ï¼Œå®ƒå°†æ˜¯
ä¹Ÿåœ¨æ¯æ¬¡è¿­ä»£ä¸­é‡å¤ï¼Œå› ä¸ºå…¶ä¸­å¯èƒ½å­˜åœ¨ç‰‡çŠ¶ç°è±¡ã€‚æ‚¨è¿˜å¯ä»¥
é€šè¿‡è®¾ç½®â€œKTEST_REPEATâ€ç¯å¢ƒå˜é‡æ¥æŒ‡å®šé‡å¤è®¡æ•°ã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="shuffling-the-tests">æ´—ç‰Œæµ‹è¯•<a href="#shuffling-the-tests" class="hash-link" aria-label="Direct link to æ´—ç‰Œæµ‹è¯•" title="Direct link to æ´—ç‰Œæµ‹è¯•">â€‹</a></h3>
<p>æ‚¨å¯ä»¥æŒ‡å®š<code>--ktest_shuffle</code>æ ‡å¿—ï¼ˆæˆ–è®¾ç½®<code>KTEST_SHUFFLE</code>
ç¯å¢ƒå˜é‡è®¾ç½®ä¸ºâ€œ1â€ï¼‰ä»¥éšæœºé¡ºåºåœ¨ç¨‹åºä¸­è¿è¡Œæµ‹è¯•ã€‚
è¿™æœ‰åŠ©äºæ­ç¤ºæµ‹è¯•ä¹‹é—´çš„ä¸è‰¯ä¾èµ–æ€§ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œkumotest ä½¿ç”¨ä»å½“å‰æ—¶é—´è®¡ç®—çš„éšæœºç§å­ã€‚
å› æ­¤ï¼Œæ‚¨æ¯æ¬¡éƒ½ä¼šæ”¶åˆ°ä¸åŒçš„è®¢å•ã€‚æ§åˆ¶å°è¾“å‡ºåŒ…æ‹¬
éšæœºç§å­å€¼ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥é‡ç°ä¸é¡ºåºç›¸å…³çš„æµ‹è¯•å¤±è´¥
ä¹‹åã€‚è¦æ˜¾å¼æŒ‡å®šéšæœºç§å­ï¼Œè¯·ä½¿ç”¨<code>--ktest_random_seed=SEED</code>
æ ‡å¿—ï¼ˆæˆ–è®¾ç½®<code>KTEST_RANDOM_SEED</code>ç¯å¢ƒå˜é‡ï¼‰ï¼Œå…¶ä¸­<code>SEED</code>æ˜¯
<code>[0, 99999]</code> èŒƒå›´å†…çš„æ•´æ•°ã€‚ç§å­å€¼ 0 å¾ˆç‰¹æ®Šï¼šå®ƒå‘Šè¯‰
kumotest æ‰§è¡Œä»å½“å‰è®¡ç®—ç§å­çš„é»˜è®¤è¡Œä¸º
æ—¶é—´ã€‚</p>
<p>å¦‚æœä½ å°†å…¶ä¸ <code>--ktest_repeat=N</code> ç»“åˆä½¿ç”¨ï¼Œkumotest å°†é€‰æ‹©ä¸åŒçš„
éšæœºç§å­å¹¶åœ¨æ¯æ¬¡è¿­ä»£ä¸­é‡æ–°æ´—ç‰Œæµ‹è¯•ã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="distributing-test-functions-to-multiple-machines">å°†æµ‹è¯•åŠŸèƒ½åˆ†å‘åˆ°å¤šå°æœºå™¨<a href="#distributing-test-functions-to-multiple-machines" class="hash-link" aria-label="Direct link to å°†æµ‹è¯•åŠŸèƒ½åˆ†å‘åˆ°å¤šå°æœºå™¨" title="Direct link to å°†æµ‹è¯•åŠŸèƒ½åˆ†å‘åˆ°å¤šå°æœºå™¨">â€‹</a></h3>
<p>å¦‚æœæ‚¨æœ‰ä¸æ­¢ä¸€å°æœºå™¨å¯ä»¥ç”¨æ¥è¿è¡Œæµ‹è¯•ç¨‹åºï¼Œæ‚¨å¯èƒ½
å¸Œæœ›å¹¶è¡Œè¿è¡Œæµ‹è¯•å‡½æ•°å¹¶æ›´å¿«åœ°è·å¾—ç»“æœã€‚æˆ‘ä»¬æ‰“ç”µè¯
è¿™ç§æŠ€æœ¯<em>åˆ†ç‰‡</em>ï¼Œå…¶ä¸­æ¯å°æœºå™¨ç§°ä¸º<em>åˆ†ç‰‡</em>ã€‚</p>
<p>KumoTest ä¸æµ‹è¯•åˆ†ç‰‡å…¼å®¹ã€‚è¦åˆ©ç”¨æ­¤åŠŸèƒ½ï¼Œæ‚¨çš„æµ‹è¯•è¿è¡Œç¨‹åºï¼ˆä¸æ˜¯ KumoTest çš„ä¸€éƒ¨åˆ†ï¼‰éœ€è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<ol>
<li>åˆ†é…ä¸€å®šæ•°é‡çš„æœºå™¨ï¼ˆåˆ†ç‰‡ï¼‰æ¥è¿è¡Œæµ‹è¯•ã€‚</li>
<li>åœ¨æ¯ä¸ªåˆ†ç‰‡ä¸Šï¼Œå°†<code>KTEST_TOTAL_SHARDS</code>ç¯å¢ƒå˜é‡è®¾ç½®ä¸ºæ€»æ•°
åˆ†ç‰‡æ•°é‡ã€‚æ‰€æœ‰åˆ†ç‰‡å¿…é¡»ç›¸åŒã€‚</li>
<li>åœ¨æ¯ä¸ªåˆ†ç‰‡ä¸Šï¼Œå°†<code>KTEST_SHARD_INDEX</code>ç¯å¢ƒå˜é‡è®¾ç½®ä¸ºç´¢å¼•
åˆ†ç‰‡çš„ã€‚ä¸åŒçš„åˆ†ç‰‡å¿…é¡»åˆ†é…ä¸åŒçš„ç´¢å¼•ï¼Œè¿™
å¿…é¡»åœ¨<code>[0, KTEST_TOTAL_SHARDS - 1]</code>èŒƒå›´å†…ã€‚</li>
<li>åœ¨æ‰€æœ‰åˆ†ç‰‡ä¸Šè¿è¡Œç›¸åŒçš„æµ‹è¯•ç¨‹åºã€‚å½“KumoTestçœ‹åˆ°ä¸Šé¢ä¸¤ä¸ª
ç¯å¢ƒå˜é‡ï¼Œå®ƒå°†é€‰æ‹©æµ‹è¯•å‡½æ•°çš„å­é›†æ¥è¿è¡Œã€‚
åœ¨æ‰€æœ‰åˆ†ç‰‡ä¸­ï¼Œç¨‹åºä¸­çš„æ¯ä¸ªæµ‹è¯•å‡½æ•°éƒ½å°†å‡†ç¡®è¿è¡Œ
ä¸€æ¬¡ã€‚</li>
<li>ç­‰å¾…æ‰€æœ‰åˆ†ç‰‡å®Œæˆï¼Œç„¶åæ”¶é›†å¹¶æŠ¥å‘Šç»“æœã€‚</li>
</ol>
<p>æ‚¨çš„é¡¹ç›®å¯èƒ½æœ‰æ²¡æœ‰ä½¿ç”¨ KumoTest ç¼–å†™çš„æµ‹è¯•ï¼Œå› æ­¤ä¸ä¼š
äº†è§£è¿™ä¸ªåè®®ã€‚ä¸ºäº†è®©ä½ çš„æµ‹è¯•è¿è¡Œè€…å¼„æ¸…æ¥šå“ªä¸ªæµ‹è¯•
æ”¯æŒåˆ†ç‰‡ï¼Œå¯ä»¥è®¾ç½®ç¯å¢ƒå˜é‡<code>KTEST_SHARD_STATUS_FILE</code>
åˆ°ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶è·¯å¾„ã€‚å¦‚æœæµ‹è¯•ç¨‹åºæ”¯æŒåˆ†ç‰‡ï¼Œå®ƒå°†åˆ›å»º
æœ¬æ–‡ä»¶æ‰¿è®¤è¿™ä¸€äº‹å®ï¼›å¦åˆ™å®ƒä¸ä¼šåˆ›å»ºå®ƒã€‚å®é™…çš„
æ–‡ä»¶çš„å†…å®¹æ­¤æ—¶å¹¶ä¸é‡è¦ï¼Œå°½ç®¡æˆ‘ä»¬å¯ä»¥æ”¾ä¸€äº›
é‡Œé¢çš„ä¿¡æ¯å¯¹ä»¥åæœ‰ç”¨ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜è¿™ä¸€ç‚¹ã€‚å‡è®¾ä½ æœ‰ä¸€ä¸ªæµ‹è¯•ç¨‹åº<code>foo_test</code>å…¶ä¸­åŒ…å«ä»¥ä¸‹5ä¸ªæµ‹è¯•å‡½æ•°ï¼š</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">TEST(A, V)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST(A, W)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST(B, X)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST(B, Y)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST(B, Z)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å‡è®¾æ‚¨æœ‰ 3 å°æœºå™¨å¯ä¾›ä½¿ç”¨ã€‚è¿è¡Œæµ‹è¯•å‡½æ•°
å¹¶è¡Œï¼Œæ‚¨å¯ä»¥åœ¨æ‰€æœ‰æœºå™¨ä¸Šå°†<code>KTEST_TOTAL_SHARDS</code>è®¾ç½®ä¸º 3ï¼Œç„¶åè®¾ç½®
æœºå™¨ä¸Šçš„<code>KTEST_SHARD_INDEX</code>åˆ†åˆ«ä¸º 0ã€1 å’Œ 2ã€‚é‚£ä¹ˆä½ ä¼š
åœ¨æ¯å°æœºå™¨ä¸Šè¿è¡Œç›¸åŒçš„â€œfoo_testâ€ã€‚</p>
<p>KumoTest ä¿ç•™æ›´æ”¹å·¥ä½œåœ¨æ•´ä¸ªç»„ç»‡ä¸­åˆ†é…æ–¹å¼çš„æƒåˆ©
åˆ†ç‰‡ï¼Œä½†è¿™æ˜¯ä¸€ç§å¯èƒ½çš„æƒ…å†µï¼š</p>
<ul>
<li>æœºå™¨ #0 è¿è¡Œ<code>A.V</code>å’Œ<code>B.X</code>ã€‚</li>
<li>1 å·æœºå™¨è¿è¡Œ<code>A.W</code>å’Œ<code>B.Y</code>ã€‚</li>
<li>2 å·æœºå™¨è¿è¡Œ<code>B.Z</code>ã€‚</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="controlling-test-output">æ§åˆ¶æµ‹è¯•è¾“å‡º<a href="#controlling-test-output" class="hash-link" aria-label="Direct link to æ§åˆ¶æµ‹è¯•è¾“å‡º" title="Direct link to æ§åˆ¶æµ‹è¯•è¾“å‡º">â€‹</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="colored-terminal-output">å½©è‰²ç«¯å­è¾“å‡º<a href="#colored-terminal-output" class="hash-link" aria-label="Direct link to å½©è‰²ç«¯å­è¾“å‡º" title="Direct link to å½©è‰²ç«¯å­è¾“å‡º">â€‹</a></h4>
<p>kumotest å¯ä»¥åœ¨å…¶ç»ˆç«¯è¾“å‡ºä¸­ä½¿ç”¨é¢œè‰²ï¼Œä»¥ä¾¿æ›´å®¹æ˜“åœ°å‘ç°
é‡è¦ä¿¡æ¯ï¼š</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;font color=&quot;green&quot;&gt;[----------]&lt;/font&gt; 1 test from FooTest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;font color=&quot;green&quot;&gt;[ RUN      ]&lt;/font&gt; FooTest.DoesAbc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;font color=&quot;green&quot;&gt;[       OK ]&lt;/font&gt; FooTest.DoesAbc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;font color=&quot;green&quot;&gt;[----------]&lt;/font&gt; 2 tests from BarTest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;font color=&quot;green&quot;&gt;[ RUN      ]&lt;/font&gt; BarTest.HasXyzProperty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;font color=&quot;green&quot;&gt;[       OK ]&lt;/font&gt; BarTest.HasXyzProperty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;font color=&quot;green&quot;&gt;[ RUN      ]&lt;/font&gt; BarTest.ReturnsTrueOnSuccess</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">... some error messages ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;font color=&quot;red&quot;&gt;[   FAILED ]&lt;/font&gt; BarTest.ReturnsTrueOnSuccess</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;font color=&quot;green&quot;&gt;[==========]&lt;/font&gt; 30 tests from 14 test suites ran.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;font color=&quot;green&quot;&gt;[   PASSED ]&lt;/font&gt; 28 tests.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;font color=&quot;red&quot;&gt;[   FAILED ]&lt;/font&gt; 2 tests, listed below:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;font color=&quot;red&quot;&gt;[   FAILED ]&lt;/font&gt; BarTest.ReturnsTrueOnSuccess</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;font color=&quot;red&quot;&gt;[   FAILED ]&lt;/font&gt; AnotherTest.DoesXyz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 2 FAILED TESTS</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æ‚¨å¯ä»¥è®¾ç½®<code>KTEST_COLOR</code>ç¯å¢ƒå˜é‡æˆ–<code>--ktest_color</code>
å‘½ä»¤è¡Œæ ‡å¿—ä¸º<code>yes</code>ã€<code>no</code>æˆ–<code>auto</code>ï¼ˆé»˜è®¤ï¼‰ä»¥å¯ç”¨é¢œè‰²ï¼Œ
ç¦ç”¨é¢œè‰²ï¼Œæˆ–è€…è®© kumotest å†³å®šã€‚å½“å€¼ä¸º<code>auto</code>æ—¶ï¼Œkumotest
å½“ä¸”ä»…å½“è¾“å‡ºåˆ°è¾¾ç»ˆç«¯å¹¶ä¸”ï¼ˆåœ¨é Windows ä¸Šï¼‰æ—¶æ‰ä¼šä½¿ç”¨é¢œè‰²
å¹³å°ï¼‰<code>TERM</code>ç¯å¢ƒå˜é‡è®¾ç½®ä¸º<code>xterm</code>æˆ–<code>xterm-color</code>ã€‚</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="suppressing-test-passes">æŠ‘åˆ¶æµ‹è¯•é€šè¿‡<a href="#suppressing-test-passes" class="hash-link" aria-label="Direct link to æŠ‘åˆ¶æµ‹è¯•é€šè¿‡" title="Direct link to æŠ‘åˆ¶æµ‹è¯•é€šè¿‡">â€‹</a></h4>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œkumotest ä¸ºæ¯ä¸ªæµ‹è¯•æ‰“å° 1 è¡Œè¾“å‡ºï¼Œè¡¨æ˜æ˜¯å¦
é€šè¿‡æˆ–å¤±è´¥ã€‚è¦ä»…æ˜¾ç¤ºæµ‹è¯•å¤±è´¥ï¼Œè¯·è¿è¡Œæµ‹è¯•ç¨‹åº
<code>--ktest_brief=1</code>ï¼Œæˆ–å°† KTEST_BRIEF ç¯å¢ƒå˜é‡è®¾ç½®ä¸º <code>1</code>ã€‚</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="suppressing-the-elapsed-time">æŠ‘åˆ¶æµé€çš„æ—¶é—´<a href="#suppressing-the-elapsed-time" class="hash-link" aria-label="Direct link to æŠ‘åˆ¶æµé€çš„æ—¶é—´" title="Direct link to æŠ‘åˆ¶æµé€çš„æ—¶é—´">â€‹</a></h4>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œkumotest æ‰“å°è¿è¡Œæ¯ä¸ªæµ‹è¯•æ‰€éœ€çš„æ—¶é—´ã€‚ç¦ç”¨
ä½¿ç”¨ <code>--ktest_print_time=0</code> å‘½ä»¤è¡Œæ ‡å¿—è¿è¡Œæµ‹è¯•ç¨‹åºï¼Œæˆ–è€…
å°† KTEST_PRINT_TIME ç¯å¢ƒå˜é‡è®¾ç½®ä¸º<code>0</code>ã€‚</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="suppressing-utf-8-text-output">æŠ‘åˆ¶ UTF-8 æ–‡æœ¬è¾“å‡º<a href="#suppressing-utf-8-text-output" class="hash-link" aria-label="Direct link to æŠ‘åˆ¶ UTF-8 æ–‡æœ¬è¾“å‡º" title="Direct link to æŠ‘åˆ¶ UTF-8 æ–‡æœ¬è¾“å‡º">â€‹</a></h4>
<p>å¦‚æœæ–­è¨€å¤±è´¥ï¼Œkumotest ä¼šæ‰“å°é¢„æœŸå€¼å’Œå®é™…å€¼
è¾“å…¥<code>string</code>ä½œä¸ºåå…­è¿›åˆ¶ç¼–ç çš„å­—ç¬¦ä¸²ä»¥åŠå¯è¯»çš„ UTF-8 æ–‡æœ¬ï¼Œå¦‚æœ
å®ƒä»¬åŒ…å«æœ‰æ•ˆçš„é ASCII UTF-8 å­—ç¬¦ã€‚å¦‚æœä½ æƒ³æŠ‘åˆ¶UTF-8
æ–‡æœ¬ï¼Œå› ä¸ºï¼Œä¾‹å¦‚ï¼Œæ‚¨æ²¡æœ‰ UTF-8 å…¼å®¹çš„è¾“å‡ºä»‹è´¨ï¼Œè¯·è¿è¡Œ
æµ‹è¯•ç¨‹åºä½¿ç”¨ <code>--ktest_print_utf8=0</code> æˆ–è®¾ç½® <code>KTEST_PRINT_UTF8</code>
ç¯å¢ƒå˜é‡è®¾ç½®ä¸ºâ€œ0â€ã€‚</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="generate-an-xml-report">ç”Ÿæˆ XML æŠ¥å‘Š<a href="#generate-an-xml-report" class="hash-link" aria-label="Direct link to ç”Ÿæˆ XML æŠ¥å‘Š" title="Direct link to ç”Ÿæˆ XML æŠ¥å‘Š">â€‹</a></h4>
<p>é™¤äº†æ­£å¸¸çš„æŠ¥å‘Šä¹‹å¤–ï¼Œkumotest è¿˜å¯ä»¥å‘æ–‡ä»¶å‘é€è¯¦ç»†çš„ XML æŠ¥å‘Š
æ–‡æœ¬è¾“å‡ºã€‚è¯¥æŠ¥å‘ŠåŒ…å«æ¯æ¬¡æµ‹è¯•çš„æŒç»­æ—¶é—´ï¼Œå› æ­¤å¯ä»¥å¸®åŠ©
æ‚¨è¯†åˆ«å‡ºç¼“æ…¢çš„æµ‹è¯•ã€‚</p>
<p>è¦ç”Ÿæˆ XML æŠ¥å‘Šï¼Œè¯·è®¾ç½®<code>KTEST_OUTPUT</code>ç¯å¢ƒå˜é‡æˆ–
<code>--ktest_output</code> æ ‡è®°åˆ°å­—ç¬¦ä¸² <code>&quot;xml:path_to_output_file&quot;</code>ï¼Œè¿™å°†
åœ¨ç»™å®šä½ç½®åˆ›å»ºæ–‡ä»¶ã€‚æ‚¨ä¹Ÿå¯ä»¥åªä½¿ç”¨å­—ç¬¦ä¸²â€œxmlâ€ï¼Œ
åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥åœ¨â€œtest_detail.xmlâ€æ–‡ä»¶ä¸­æ‰¾åˆ°è¾“å‡º
å½“å‰ç›®å½•ã€‚</p>
<p>å¦‚æœæ‚¨æŒ‡å®šä¸€ä¸ªç›®å½•ï¼ˆä¾‹å¦‚ï¼ŒLinux ä¸Šçš„<code>xml:output/directory/</code>ï¼‰æˆ–
Windows ä¸Šçš„<code>xml:output\directory\</code>ï¼‰ï¼Œkumotest å°†åœ¨ä»¥ä¸‹ä½ç½®åˆ›å»º XML æ–‡ä»¶
è¯¥ç›®å½•ï¼Œä»¥æµ‹è¯•å¯æ‰§è¡Œæ–‡ä»¶å‘½åï¼ˆä¾‹å¦‚ç”¨äºæµ‹è¯•çš„<code>foo_test.xml</code>
ç¨‹åº<code>foo_test</code>æˆ–<code>foo_test.exe</code>ï¼‰ã€‚å¦‚æœæ–‡ä»¶å·²ç»å­˜åœ¨ï¼ˆå¯èƒ½è¿˜å‰©ä¸‹
ä¸ä¹‹å‰çš„è¿è¡Œç›¸æ¯”ï¼‰ï¼Œkumotest å°†é€‰æ‹©ä¸€ä¸ªä¸åŒçš„åç§°ï¼ˆä¾‹å¦‚
<code>foo_test_1.xml</code>) ä»¥é¿å…è¦†ç›–å®ƒã€‚</p>
<p>è¯¥æŠ¥å‘ŠåŸºäº <code>junitreport</code> Ant ä»»åŠ¡ã€‚ç”±äºè¯¥æ ¼å¼æ˜¯
æœ€åˆæ˜¯ä¸º Java è®¾è®¡çš„ï¼Œéœ€è¦ä¸€ç‚¹è§£é‡Šæ‰èƒ½å®ç°
é€‚ç”¨äº kumotest æµ‹è¯•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#22863A">testsuites</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">AllTests</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">...</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#22863A">testsuite</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">test_case_name</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">...</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#22863A">testcase</span><span class="token tag" style="color:#22863A">    </span><span class="token tag attr-name" style="color:#0550AE">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">test_name</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">...</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#22863A">failure</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">message</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">...</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#22863A">failure</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">message</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">...</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#22863A">failure</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">message</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">...</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#22863A">testcase</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#22863A">testsuite</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#22863A">testsuites</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>æ ¹<code>&lt;testsuites&gt;</code>å…ƒç´ å¯¹åº”äºæ•´ä¸ªæµ‹è¯•ç¨‹åºã€‚</li>
<li><code>&lt;testsuite&gt;</code> å…ƒç´ å¯¹åº”äº kumotest æµ‹è¯•å¥—ä»¶ã€‚</li>
<li><code>&lt;testcase&gt;</code> å…ƒç´ å¯¹åº”äº kumotest æµ‹è¯•å‡½æ•°ã€‚</li>
</ul>
<p> ä¾‹å¦‚ï¼Œä¸‹é¢çš„ç¨‹åº</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">TEST(MathTest, Addition) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST(MathTest, Subtraction) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST(LogicTest, NonContradiction) { ... }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å¯ä»¥ç”Ÿæˆæ­¤æŠ¥å‘Šï¼š</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token prolog" style="color:#999988;font-style:italic">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#22863A">testsuites</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">tests</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">3</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">failures</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">errors</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">0</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">time</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">0.035</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">timestamp</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">2011-10-31T18:52:42</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">AllTests</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#22863A">testsuite</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">MathTest</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">tests</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">2</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">failures</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">errors</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">0</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">time</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">0.015</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#22863A">testcase</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">Addition</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">file</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">test.cpp</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">line</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">status</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">run</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">time</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">0.007</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">classname</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#22863A">failure</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">message</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">Value of: add(1, 1)</span><span class="token tag attr-value entity" style="color:#36acaa">&amp;#x0A;</span><span class="token tag attr-value" style="color:#C6105F">  Actual: 3</span><span class="token tag attr-value entity" style="color:#36acaa">&amp;#x0A;</span><span class="token tag attr-value" style="color:#C6105F">Expected: 2</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">...</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#22863A">failure</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#22863A">failure</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">message</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">Value of: add(1, -1)</span><span class="token tag attr-value entity" style="color:#36acaa">&amp;#x0A;</span><span class="token tag attr-value" style="color:#C6105F">  Actual: 1</span><span class="token tag attr-value entity" style="color:#36acaa">&amp;#x0A;</span><span class="token tag attr-value" style="color:#C6105F">Expected: 0</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">...</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#22863A">failure</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#22863A">testcase</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#22863A">testcase</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">Subtraction</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">file</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">test.cpp</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">line</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">2</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">status</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">run</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">time</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">0.005</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">classname</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#22863A">testcase</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#22863A">testsuite</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#22863A">testsuite</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">LogicTest</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">tests</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">failures</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">0</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">errors</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">0</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">time</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">0.005</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#22863A">testcase</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">NonContradiction</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">file</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">test.cpp</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">line</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">3</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">status</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">run</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">time</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#C6105F">0.005</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#22863A"> </span><span class="token tag attr-name" style="color:#0550AE">classname</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#22863A">testcase</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#22863A">testsuite</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#22863A">testsuites</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>
<p><code>&lt;testsuites&gt;</code> æˆ– <code>&lt;testsuite&gt;</code> å…ƒç´ çš„ <code>tests</code> å±æ€§å‘Šè¯‰æˆ‘ä»¬å¦‚ä½•
kumotest ç¨‹åºæˆ–æµ‹è¯•å¥—ä»¶åŒ…å«è®¸å¤šæµ‹è¯•å‡½æ•°ï¼Œè€Œ
<code>failures</code> å±æ€§å‘Šè¯‰æˆ‘ä»¬å…¶ä¸­æœ‰å¤šå°‘å¤±è´¥äº†ã€‚</p>
</li>
<li>
<p><code>time</code> å±æ€§è¡¨ç¤ºæµ‹è¯•ã€æµ‹è¯•å¥—ä»¶æˆ–æµ‹è¯•çš„æŒç»­æ—¶é—´
æ•´ä¸ªæµ‹è¯•ç¨‹åºåªéœ€å‡ ç§’é’Ÿã€‚</p>
</li>
<li>
<p><code>timestamp</code>å±æ€§è®°å½•æµ‹è¯•çš„æœ¬åœ°æ—¥æœŸå’Œæ—¶é—´
æ‰§è¡Œã€‚</p>
</li>
<li>
<p><code>file</code> å’Œ <code>line</code> å±æ€§è®°å½•æºæ–‡ä»¶ä½ç½®ï¼Œå…¶ä¸­
æµ‹è¯•è¢«å®šä¹‰â€‹â€‹ã€‚</p>
</li>
<li>
<p>æ¯ä¸ª<code>&lt;failure&gt;</code>å…ƒç´ å¯¹åº”äºä¸€ä¸ªå¤±è´¥çš„kumotest
æ–­è¨€ã€‚</p>
</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="generating-a-json-report">ç”Ÿæˆ JSON æŠ¥å‘Š<a href="#generating-a-json-report" class="hash-link" aria-label="Direct link to ç”Ÿæˆ JSON æŠ¥å‘Š" title="Direct link to ç”Ÿæˆ JSON æŠ¥å‘Š">â€‹</a></h4>
<p>kumotest è¿˜å¯ä»¥å‘å‡º JSON æŠ¥å‘Šä½œä¸º XML çš„æ›¿ä»£æ ¼å¼ã€‚åˆ°
ç”Ÿæˆ JSON æŠ¥å‘Šï¼Œè®¾ç½® <code>KTEST_OUTPUT</code> ç¯å¢ƒå˜é‡æˆ–
<code>--ktest_output</code> æ ‡è®°åˆ°å­—ç¬¦ä¸² <code>&quot;json:path_to_output_file&quot;</code>ï¼Œè¿™å°†
åœ¨ç»™å®šä½ç½®åˆ›å»ºæ–‡ä»¶ã€‚æ‚¨ä¹Ÿå¯ä»¥åªä½¿ç”¨å­—ç¬¦ä¸²
<code>&quot;json&quot;</code>ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥åœ¨ <code>test_detail.json</code> æ–‡ä»¶ä¸­æ‰¾åˆ°è¾“å‡º
åœ¨å½“å‰ç›®å½•ä¸­ã€‚</p>
<p>æŠ¥å‘Šæ ¼å¼ç¬¦åˆä»¥ä¸‹ JSON Schemaï¼š</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#005CC5">&quot;$schema&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;http://json-schema.org/schema#&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;object&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#005CC5">&quot;definitions&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#005CC5">&quot;TestCase&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;object&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#005CC5">&quot;properties&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#005CC5">&quot;name&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;string&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#005CC5">&quot;tests&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;integer&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#005CC5">&quot;failures&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;integer&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#005CC5">&quot;disabled&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;integer&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#005CC5">&quot;time&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;string&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#005CC5">&quot;testsuite&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;array&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#005CC5">&quot;items&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#005CC5">&quot;$ref&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;#/definitions/TestInfo&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#005CC5">&quot;TestInfo&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;object&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#005CC5">&quot;properties&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#005CC5">&quot;name&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;string&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#005CC5">&quot;file&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;string&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#005CC5">&quot;line&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;integer&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#005CC5">&quot;status&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;string&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#005CC5">&quot;enum&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#C6105F">&quot;RUN&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;NOTRUN&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#005CC5">&quot;time&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;string&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#005CC5">&quot;classname&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;string&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#005CC5">&quot;failures&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;array&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#005CC5">&quot;items&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#005CC5">&quot;$ref&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;#/definitions/Failure&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#005CC5">&quot;Failure&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;object&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#005CC5">&quot;properties&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#005CC5">&quot;failures&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;string&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;string&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#005CC5">&quot;properties&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#005CC5">&quot;tests&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;integer&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#005CC5">&quot;failures&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;integer&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#005CC5">&quot;disabled&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;integer&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#005CC5">&quot;errors&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;integer&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#005CC5">&quot;timestamp&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;string&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#005CC5">&quot;format&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;date-time&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#005CC5">&quot;time&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;string&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#005CC5">&quot;name&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;string&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#005CC5">&quot;testsuites&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;array&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#005CC5">&quot;items&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#005CC5">&quot;$ref&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;#/definitions/TestCase&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æŠ¥å‘Šä½¿ç”¨ç¬¦åˆä»¥ä¸‹Proto3çš„æ ¼å¼ï¼Œä½¿ç”¨
<a href="https://developers.google.com/protocol-buffers/docs/proto3#json" target="_blank" rel="noopener noreferrer">JSON ç¼–ç </a>ï¼š</p>
<div class="language-proto codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-proto codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">syntax = &quot;proto3&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">package kumotest;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import &quot;google/protobuf/timestamp.proto&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import &quot;google/protobuf/duration.proto&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message UnitTest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int32 tests = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int32 failures = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int32 disabled = 3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int32 errors = 4;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  google.protobuf.Timestamp timestamp = 5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  google.protobuf.Duration time = 6;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string name = 7;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  repeated TestCase testsuites = 8;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message TestCase {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string name = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int32 tests = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int32 failures = 3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int32 disabled = 4;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int32 errors = 5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  google.protobuf.Duration time = 6;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  repeated TestInfo testsuite = 7;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message TestInfo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string name = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string file = 6;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  int32 line = 7;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  enum Status {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    RUN = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    NOTRUN = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Status status = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  google.protobuf.Duration time = 3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  string classname = 4;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  message Failure {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    string failures = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    string type = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  repeated Failure failures = 5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„ç¨‹åº</p>
<div class="language-c++ codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c++ codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">TEST(MathTest, Addition) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST(MathTest, Subtraction) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TEST(LogicTest, NonContradiction) { ... }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å¯ä»¥ç”Ÿæˆæ­¤æŠ¥å‘Šï¼š</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#005CC5">&quot;tests&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#005CC5">&quot;failures&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#005CC5">&quot;errors&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#005CC5">&quot;time&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;0.035s&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#005CC5">&quot;timestamp&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;2011-10-31T18:52:42Z&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#005CC5">&quot;name&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;AllTests&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#005CC5">&quot;testsuites&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#005CC5">&quot;name&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;MathTest&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#005CC5">&quot;tests&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#005CC5">&quot;failures&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#005CC5">&quot;errors&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#005CC5">&quot;time&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;0.015s&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#005CC5">&quot;testsuite&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#005CC5">&quot;name&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;Addition&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#005CC5">&quot;file&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;test.cpp&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#005CC5">&quot;line&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#005CC5">&quot;status&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;RUN&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#005CC5">&quot;time&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;0.007s&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#005CC5">&quot;classname&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#005CC5">&quot;failures&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#005CC5">&quot;message&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;Value of: add(1, 1)\n  Actual: 3\nExpected: 2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#005CC5">&quot;message&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;Value of: add(1, -1)\n  Actual: 1\nExpected: 0&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#005CC5">&quot;type&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#005CC5">&quot;name&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;Subtraction&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#005CC5">&quot;file&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;test.cpp&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#005CC5">&quot;line&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#005CC5">&quot;status&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;RUN&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#005CC5">&quot;time&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;0.005s&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#005CC5">&quot;classname&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#005CC5">&quot;name&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;LogicTest&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#005CC5">&quot;tests&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#005CC5">&quot;failures&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#005CC5">&quot;errors&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#005CC5">&quot;time&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;0.005s&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#005CC5">&quot;testsuite&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#005CC5">&quot;name&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;NonContradiction&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#005CC5">&quot;file&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;test.cpp&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#005CC5">&quot;line&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#005CC5">&quot;status&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;RUN&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#005CC5">&quot;time&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;0.005s&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#005CC5">&quot;classname&quot;</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>é‡è¦æç¤º</div><div class="admonitionContent_BuS1"><p>JSON æ–‡æ¡£çš„ç¡®åˆ‡æ ¼å¼å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="controlling-how-failures-are-reported">æ§åˆ¶å¦‚ä½•æŠ¥å‘Šæ•…éšœ<a href="#controlling-how-failures-are-reported" class="hash-link" aria-label="Direct link to æ§åˆ¶å¦‚ä½•æŠ¥å‘Šæ•…éšœ" title="Direct link to æ§åˆ¶å¦‚ä½•æŠ¥å‘Šæ•…éšœ">â€‹</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="detecting-test-premature-exit">æ£€æµ‹æµ‹è¯•è¿‡æ—©é€€å‡º<a href="#detecting-test-premature-exit" class="hash-link" aria-label="Direct link to æ£€æµ‹æµ‹è¯•è¿‡æ—©é€€å‡º" title="Direct link to æ£€æµ‹æµ‹è¯•è¿‡æ—©é€€å‡º">â€‹</a></h4>
<p>Kumo Test ä¸ºæµ‹è¯•è¿è¡Œè€…å®ç°äº† <em>premature-exit-file</em> åè®®
æ•è·æµ‹è¯•ç¨‹åºçš„ä»»ä½•æ„å¤–é€€å‡ºã€‚å¼€å§‹æ—¶ï¼ŒKumo æµ‹è¯•
åˆ›å»ºçš„æ–‡ä»¶å°†åœ¨æ‰€æœ‰å·¥ä½œå®Œæˆåè‡ªåŠ¨åˆ é™¤
å®Œæˆçš„ã€‚ç„¶åï¼Œæµ‹è¯•è¿è¡Œè€…å¯ä»¥æ£€æŸ¥è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚ä¸‡ä¸€æ–‡ä»¶
ä»æœªåˆ é™¤ï¼Œæ£€æŸ¥çš„æµ‹è¯•å·²æå‰é€€å‡ºã€‚</p>
<p>ä»…å½“<code>TEST_PREMATURE_EXIT_FILE</code>ç¯å¢ƒå¯ç”¨æ­¤åŠŸèƒ½
å˜é‡å·²è®¾ç½®ã€‚</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="turning-assertion-failures-into-break-points">å°†æ–­è¨€å¤±è´¥å˜æˆæ–­ç‚¹<a href="#turning-assertion-failures-into-break-points" class="hash-link" aria-label="Direct link to å°†æ–­è¨€å¤±è´¥å˜æˆæ–­ç‚¹" title="Direct link to å°†æ–­è¨€å¤±è´¥å˜æˆæ–­ç‚¹">â€‹</a></h4>
<p>åœ¨è°ƒè¯•å™¨ä¸‹è¿è¡Œæµ‹è¯•ç¨‹åºæ—¶ï¼Œå¦‚æœ
è°ƒè¯•å™¨å¯ä»¥æ•è·æ–­è¨€å¤±è´¥å¹¶è‡ªåŠ¨è¿›å…¥äº¤äº’çŠ¶æ€
æ¨¡å¼ã€‚ kumotest çš„ <em>break-on-failure</em> æ¨¡å¼æ”¯æŒè¿™ç§è¡Œä¸ºã€‚</p>
<p>è¦å¯ç”¨å®ƒï¼Œè¯·å°†<code>KTEST_BREAK_ON_FAILURE</code>ç¯å¢ƒå˜é‡è®¾ç½®ä¸ºä¸€ä¸ªå€¼
é™¤äº†<code>0</code>ä¹‹å¤–ã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>--ktest_break_on_failure</code>
å‘½ä»¤è¡Œæ ‡å¿—ã€‚</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="disabling-catching-test-thrown-exceptions">ç¦ç”¨æ•è·æµ‹è¯•å¼•å‘çš„å¼‚å¸¸<a href="#disabling-catching-test-thrown-exceptions" class="hash-link" aria-label="Direct link to ç¦ç”¨æ•è·æµ‹è¯•å¼•å‘çš„å¼‚å¸¸" title="Direct link to ç¦ç”¨æ•è·æµ‹è¯•å¼•å‘çš„å¼‚å¸¸">â€‹</a></h4>
<p>kumotest å¯ä»¥åœ¨å¯ç”¨æˆ–ä¸å¯ç”¨å¼‚å¸¸çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚å¦‚æœä¸€ä¸ªæµ‹è¯•
é»˜è®¤æƒ…å†µä¸‹ï¼ŒæŠ›å‡º C++ å¼‚å¸¸æˆ–ï¼ˆåœ¨ Windows ä¸Šï¼‰ç»“æ„åŒ–å¼‚å¸¸ (SEH)
kumotest æ•è·å®ƒï¼Œå°†å…¶æŠ¥å‘Šä¸ºæµ‹è¯•å¤±è´¥ï¼Œç„¶åç»§ç»­ä¸‹ä¸€ä¸ª
æµ‹è¯•æ–¹æ³•ã€‚è¿™æœ€å¤§åŒ–äº†æµ‹è¯•è¿è¡Œçš„è¦†ç›–èŒƒå›´ã€‚å¦å¤–ï¼Œåœ¨ Windows ä¸Š
æœªæ•è·çš„å¼‚å¸¸ä¼šå¯¼è‡´å¼¹å‡ºçª—å£ï¼Œå› æ­¤æ•è·å¼‚å¸¸å…è®¸
æ‚¨è‡ªåŠ¨è¿è¡Œæµ‹è¯•ã€‚</p>
<p>ç„¶è€Œï¼Œåœ¨è°ƒè¯•æµ‹è¯•å¤±è´¥æ—¶ï¼Œæ‚¨å¯èƒ½éœ€è¦å¼‚å¸¸
ç”±è°ƒè¯•å™¨å¤„ç†ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥åœ¨å‘ç”Ÿé”™è¯¯æ—¶æ£€æŸ¥è°ƒç”¨å †æ ˆ
æŠ›å‡ºå¼‚å¸¸ã€‚ä¸ºæ­¤ï¼Œè¯·è®¾ç½®<code>KTEST_CATCH_EXCEPTIONS</code>
ç¯å¢ƒå˜é‡è®¾ç½®ä¸º<code>0</code>ï¼Œæˆ–è€…åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ä½¿ç”¨<code>--ktest_catch_exceptions=0</code>æ ‡å¿—ï¼š
è¿è¡Œæµ‹è¯•ã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sanitizer-integration">Sanitizer é›†æˆ<a href="#sanitizer-integration" class="hash-link" aria-label="Direct link to Sanitizer é›†æˆ" title="Direct link to Sanitizer é›†æˆ">â€‹</a></h3>
<p>è¿™
<a href="https://clang.llvm.org/docs/UndefinedBehaviorSanitizer.html" target="_blank" rel="noopener noreferrer">æœªå®šä¹‰è¡Œä¸ºæ¶ˆæ¯’å‰‚</a>,
<a href="https://github.com/google/sanitizers/wiki/AddressSanitizer" target="_blank" rel="noopener noreferrer">åœ°å€æ¶ˆæ¯’å‰‚</a>,
å’Œ
<a href="https://github.com/google/sanitizers/wiki/ThreadSanitizerCppManual" target="_blank" rel="noopener noreferrer">çº¿ç¨‹æ¶ˆæ¯’å‰‚</a>
æ‰€æœ‰è¿™äº›éƒ½æä¾›äº†å¼±å‡½æ•°ï¼Œæ‚¨å¯ä»¥è¦†ç›–è¿™äº›å‡½æ•°ä»¥è§¦å‘æ˜¾å¼å¤±è´¥
å½“ä»–ä»¬æ£€æµ‹åˆ°æ¸…ç†ç¨‹åºé”™è¯¯æ—¶ï¼Œä¾‹å¦‚ä»â€œnullptrâ€åˆ›å»ºå¼•ç”¨ã€‚
è¦è¦†ç›–è¿™äº›å‡½æ•°ï¼Œè¯·å°†å®ƒä»¬çš„å®šä¹‰æ”¾ç½®åœ¨æºæ–‡ä»¶ ä¸­
ä½œä¸ºä¸»äºŒè¿›åˆ¶æ–‡ä»¶çš„ä¸€éƒ¨åˆ†è¿›è¡Œç¼–è¯‘ï¼š</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">extern &quot;C&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void __ubsan_on_report() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  FAIL() &lt;&lt; &quot;Encountered an undefined behavior sanitizer error&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void __asan_on_error() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  FAIL() &lt;&lt; &quot;Encountered an address sanitizer error&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void __tsan_on_report() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  FAIL() &lt;&lt; &quot;Encountered a thread sanitizer error&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}  // extern &quot;C&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>åœ¨å¯ç”¨å…¶ä¸­ä¸€ç§æ¶ˆæ¯’å‰‚çš„æƒ…å†µä¸‹ç¼–è¯‘é¡¹ç›®åï¼Œå¦‚æœç‰¹å®šæµ‹è¯•è§¦å‘æ¸…ç†ç¨‹åºé”™è¯¯ï¼Œkumotest å°†æŠ¥å‘Šå¤±è´¥ã€‚</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-05-24T10:16:12.000Z" itemprop="dateModified">May 24, 2025</time></b> by <b>Jeff lothar</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/next/cpp/base/testing/kt/reference/assertions"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">æ–­è¨€å‚è€ƒ</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/next/cpp/base/testing/kt/samples"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ktest ç¤ºä¾‹</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">ä»‹ç»</a></li><li><a href="#more-assertions" class="table-of-contents__link toc-highlight">æ›´å¤šæ–­è¨€</a><ul><li><a href="#explicit-success-and-failure" class="table-of-contents__link toc-highlight">æ˜ç¡®çš„æˆåŠŸå’Œå¤±è´¥</a></li><li><a href="#exception-assertions" class="table-of-contents__link toc-highlight">å¼‚å¸¸æ–­è¨€</a></li><li><a href="#predicate-assertions-for-better-error-messages" class="table-of-contents__link toc-highlight">è°“è¯æ–­è¨€ä»¥è·å¾—æ›´å¥½çš„é”™è¯¯æ¶ˆæ¯</a></li><li><a href="#floating-point-comparison" class="table-of-contents__link toc-highlight">æµ®ç‚¹æ¯”è¾ƒ</a></li><li><a href="#asserting-using-kmock-matchers" class="table-of-contents__link toc-highlight">ä½¿ç”¨ kMock åŒ¹é…å™¨è¿›è¡Œæ–­è¨€</a></li><li><a href="#more-string-assertions" class="table-of-contents__link toc-highlight">æ›´å¤šå­—ç¬¦ä¸²æ–­è¨€</a></li><li><a href="#windows-HRESULT-assertions" class="table-of-contents__link toc-highlight">Windows HRESULT æ–­è¨€</a></li><li><a href="#type-assertions" class="table-of-contents__link toc-highlight">ç±»å‹æ–­è¨€</a></li><li><a href="#assertion-placement" class="table-of-contents__link toc-highlight">æ–­è¨€æ”¾ç½®</a></li></ul></li><li><a href="#skipping-test-execution" class="table-of-contents__link toc-highlight">è·³è¿‡æµ‹è¯•æ‰§è¡Œ</a></li><li><a href="#teaching-kumotest-how-to-print-your-values" class="table-of-contents__link toc-highlight">æŒ‡å¯¼ kumotest å¦‚ä½•æ‰“å°ä½ çš„ä»·å€¼</a></li><li><a href="#death-tests" class="table-of-contents__link toc-highlight">æ­»äº¡æµ‹è¯•</a><ul><li><a href="#how-to-write-a-death-test" class="table-of-contents__link toc-highlight">å¦‚ä½•ç¼–å†™æ­»äº¡æµ‹è¯•</a></li><li><a href="#death-test-naming" class="table-of-contents__link toc-highlight">æ­»äº¡æµ‹è¯•å‘½å</a></li><li><a href="#regular-expression-syntax" class="table-of-contents__link toc-highlight">æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•</a></li><li><a href="#how-it-works" class="table-of-contents__link toc-highlight">å®ƒæ˜¯å¦‚ä½•è¿ä½œçš„</a></li><li><a href="#death-tests-and-threads" class="table-of-contents__link toc-highlight">æ­»äº¡æµ‹è¯•å’Œçº¿ç¨‹</a></li><li><a href="#death-test-styles" class="table-of-contents__link toc-highlight">æ­»äº¡æµ‹è¯•é£æ ¼</a></li><li><a href="#caveats" class="table-of-contents__link toc-highlight">æ³¨æ„äº‹é¡¹</a></li></ul></li><li><a href="#using-assertions-in-sub-routines" class="table-of-contents__link toc-highlight">åœ¨å­ä¾‹ç¨‹ä¸­ä½¿ç”¨æ–­è¨€</a><ul><li><a href="#adding-traces-to-assertions" class="table-of-contents__link toc-highlight">å‘æ–­è¨€æ·»åŠ è·Ÿè¸ª</a></li><li><a href="#propagating-fatal-failures" class="table-of-contents__link toc-highlight">ä¼ æ’­è‡´å‘½æ•…éšœ</a></li></ul></li><li><a href="#logging-additional-nformation" class="table-of-contents__link toc-highlight">è®°å½•é™„åŠ ä¿¡æ¯</a></li><li><a href="#sharing-resources-between-tests-in-the-same-test-suite" class="table-of-contents__link toc-highlight">åœ¨åŒä¸€æµ‹è¯•å¥—ä»¶ä¸­çš„æµ‹è¯•ä¹‹é—´å…±äº«èµ„æº</a></li><li><a href="#global-set-up-and-tear-down" class="table-of-contents__link toc-highlight">å…¨å±€ <code>Set-Up</code> å’Œ <code>Tear-Down</code></a></li><li><a href="#value-parameterized-tests" class="table-of-contents__link toc-highlight">å€¼å‚æ•°åŒ–æµ‹è¯•</a><ul><li><a href="#how-to-write-value-parameterized-tests" class="table-of-contents__link toc-highlight">å¦‚ä½•ç¼–å†™å€¼å‚æ•°åŒ–æµ‹è¯•</a></li><li><a href="#creating-value-parameterized-abstract-tests" class="table-of-contents__link toc-highlight">åˆ›å»ºå€¼å‚æ•°åŒ–æŠ½è±¡æµ‹è¯•</a></li><li><a href="#specifying-names-for-value-parameterized-test-parameters" class="table-of-contents__link toc-highlight">æŒ‡å®šå€¼å‚æ•°åŒ–æµ‹è¯•å‚æ•°çš„åç§°</a></li></ul></li><li><a href="#typed-tests" class="table-of-contents__link toc-highlight">ç±»å‹æµ‹è¯•</a></li><li><a href="#type-parameterized-tests" class="table-of-contents__link toc-highlight">ç±»å‹å‚æ•°åŒ–æµ‹è¯•</a></li><li><a href="#testing-private-code" class="table-of-contents__link toc-highlight">æµ‹è¯•ç§æœ‰ä»£ç </a></li><li><a href="#catching-failures" class="table-of-contents__link toc-highlight">æ•æ‰<code>å¤±è´¥</code></a></li><li><a href="#registering-tests-programmatically" class="table-of-contents__link toc-highlight">ä»¥ç¼–ç¨‹æ–¹å¼æ³¨å†Œæµ‹è¯•</a></li><li><a href="#getting-the-current-test&#x27;s-name" class="table-of-contents__link toc-highlight">è·å–å½“å‰æµ‹è¯•çš„åç§°</a></li><li><a href="#extending-kumotest-by-handling-test-events" class="table-of-contents__link toc-highlight">é€šè¿‡å¤„ç†æµ‹è¯•äº‹ä»¶æ‰©å±• kumotest</a><ul><li><a href="#defining-event-listeners" class="table-of-contents__link toc-highlight">å®šä¹‰äº‹ä»¶ç›‘å¬å™¨</a></li><li><a href="#using-event-isteners" class="table-of-contents__link toc-highlight">ä½¿ç”¨äº‹ä»¶ç›‘å¬å™¨</a></li><li><a href="#generating-failures-in-listeners" class="table-of-contents__link toc-highlight">åœ¨å¬ä¼—ä¸­äº§ç”Ÿå¤±è´¥</a></li></ul></li><li><a href="#running-test-programs-advanced-options" class="table-of-contents__link toc-highlight">è¿è¡Œæµ‹è¯•ç¨‹åºï¼šé«˜çº§é€‰é¡¹</a><ul><li><a href="#selecting-tests" class="table-of-contents__link toc-highlight">é€‰æ‹©æµ‹è¯•</a></li><li><a href="#repeating-the-tests" class="table-of-contents__link toc-highlight">é‡å¤æµ‹è¯•</a></li><li><a href="#shuffling-the-tests" class="table-of-contents__link toc-highlight">æ´—ç‰Œæµ‹è¯•</a></li><li><a href="#distributing-test-functions-to-multiple-machines" class="table-of-contents__link toc-highlight">å°†æµ‹è¯•åŠŸèƒ½åˆ†å‘åˆ°å¤šå°æœºå™¨</a></li><li><a href="#controlling-test-output" class="table-of-contents__link toc-highlight">æ§åˆ¶æµ‹è¯•è¾“å‡º</a></li><li><a href="#controlling-how-failures-are-reported" class="table-of-contents__link toc-highlight">æ§åˆ¶å¦‚ä½•æŠ¥å‘Šæ•…éšœ</a></li><li><a href="#sanitizer-integration" class="table-of-contents__link toc-highlight">Sanitizer é›†æˆ</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">é˜…è¯»</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">æ–‡æ¡£</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/installation">å®‰è£…</a></li></ul></div><div class="col footer__col"><div class="footer__title">æ”¯æŒä¸èµ„æº</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/feature-requests">Feature Requests</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/community/support">Help</a></li></ul></div><div class="col footer__col"><div class="footer__title">æ›´å¤š</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">åšå®¢</a></li><li class="footer__item"><a class="footer__link-item" href="/changelog">æ›´æ–°</a></li><li class="footer__item"><a href="https://gitee.com/kumo-pub" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitee<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://kumo-ai.tech" target="_blank" rel="noopener noreferrer" class="footer__link-item">ç½‘ç«™<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/cookie-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cookie Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">ç‰ˆæƒ Â© 2025 åŒ—äº¬ç§‘ç±³æ™ºåˆ›ç§‘æŠ€æœ‰é™å…¬å¸</div></div></div></footer></div>
</body>
</html>