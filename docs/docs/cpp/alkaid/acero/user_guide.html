<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-1.1.1 docs-doc-page docs-doc-id-cpp/alkaid/acero/user_guide" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">ç”¨æˆ·æŒ‡å— | Kumo AI</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://kumo-pub.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://kumo-pub.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://kumo-pub.github.io/docs/cpp/alkaid/acero/user_guide"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.1.1"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.1.1"><meta data-rh="true" name="docsearch:version" content="1.1.1"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.1.1"><meta data-rh="true" property="og:title" content="ç”¨æˆ·æŒ‡å— | Kumo AI"><meta data-rh="true" name="description" content="æœ¬é¡µä»‹ç»å¦‚ä½•ä½¿ç”¨ Aceroã€‚å»ºè®®æ‚¨å…ˆé˜…è¯»"><meta data-rh="true" property="og:description" content="æœ¬é¡µä»‹ç»å¦‚ä½•ä½¿ç”¨ Aceroã€‚å»ºè®®æ‚¨å…ˆé˜…è¯»"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://kumo-pub.github.io/docs/cpp/alkaid/acero/user_guide"><link data-rh="true" rel="alternate" href="https://kumo-pub.github.io/docs/cpp/alkaid/acero/user_guide" hreflang="en"><link data-rh="true" rel="alternate" href="https://kumo-pub.github.io/docs/cpp/alkaid/acero/user_guide" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Kumo AI RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Kumo AI Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Kumo AI JSON Feed">


<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-E5CR2Q1NRE"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-E5CR2Q1NRE",{})</script>


<link rel="alternate" type="application/rss+xml" href="/changelog/rss.xml" title="Docusaurus changelog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/changelog/atom.xml" title="Docusaurus changelog Atom Feed">
<link rel="alternate" type="application/json" href="/changelog/feed.json" title="Docusaurus changelog JSON Feed">



<link rel="icon" href="/img/docusaurus.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/docusaurus.png">
<link rel="mask-icon" href="/img/docusaurus.png" color="rgb(62, 204, 94)">
<meta name="msapplication-TileImage" content="/img/docusaurus.png">
<meta name="msapplication-TileColor" content="#000">



<link rel="alternate" type="application/rss+xml" href="/tests/blog/rss.xml" title="Docusaurus Tests Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/tests/blog/atom.xml" title="Docusaurus Tests Blog Atom Feed">
<link rel="alternate" type="application/json" href="/tests/blog/feed.json" title="Docusaurus Tests Blog JSON Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Kumo AI" href="/opensearch.xml">

<link rel="stylesheet" href="/katex/katex.min.css"><link rel="stylesheet" href="/assets/css/styles.21fbef88.css">
<script src="/assets/js/runtime~main.4a84cfb3.js" defer="defer"></script>
<script src="/assets/js/main.fbc4aaaa.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme-b4f")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss-b4f")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">ğŸ‰ï¸ <b><a target="_blank" href="https://docusaurus.io/blog/releases/1.1">Kumo v1.1</a> is out!</b> ğŸ¥³ï¸</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/kumo_logo.svg" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE" height="48" width="128"><img src="/img/kumo_logo_white.svg" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="48" width="128"></div><b class="navbar__title text--truncate">ä¸»é¡µ</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">æ–‡æ¡£</a><a class="navbar__item navbar__link" href="/docs/category/kmsearch">API</a><a class="navbar__item navbar__link" href="/blog">åšå®¢</a><a class="navbar__item navbar__link" href="/changelog">å‘å¸ƒ</a><a class="navbar__item navbar__link" href="/showcase">åº”ç”¨æ¡ˆä¾‹</a><a class="navbar__item navbar__link" href="/community/support">æ”¯æŒä¸èµ„æº</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/cpp/alkaid/acero/user_guide">1.1.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next">nightly ğŸš§</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/cpp/alkaid/acero/user_guide">1.1.1</a></li><li><hr class="dropdown-separator"></li><li class="dropdown-archived-versions"><b>Archived versions</b></li><li><a href="https://docusaurus-archive-october-2023.netlify.app/docs/2.3.1" target="_blank" rel="noopener noreferrer" class="dropdown__link">1.0.1<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://v1.docusaurus.io" target="_blank" rel="noopener noreferrer" class="dropdown__link">1.x.x<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><hr class="dropdown-separator"></li><li><a class="dropdown__link" href="/versions">All versions</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/cpp/alkaid/acero/user_guide" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><hr style="margin: 0.3rem 0;"></li><li><a href="https://github.com/facebook/docusaurus/issues/3526" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help Us Translate<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/kumo_logo.svg" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE" height="48" width="128"><img src="/img/kumo_logo_white.svg" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="48" width="128"><b>ä¸»é¡µ</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs">æ¦‚è¿°</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/åŸºç¡€å‡†å¤‡">åŸºç¡€å‡†å¤‡</a><button aria-label="Collapse sidebar category &#x27;åŸºç¡€å‡†å¤‡&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/env_prepare_be">åç«¯å¼€å‘ç¯å¢ƒ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/env_prepare_fe">å‰ç«¯å¼€å‘ç¯å¢ƒ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/æŒç»­é›†æˆ----kmpkg">æŒç»­é›†æˆ -- kmpkg</a><button aria-label="Expand sidebar category &#x27;æŒç»­é›†æˆ -- kmpkg&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/cå¼€å‘">c++å¼€å‘</a><button aria-label="Expand sidebar category &#x27;c++å¼€å‘&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/æœç´ åŸºç¡€å¼€å‘">æœç´ åŸºç¡€å¼€å‘</a><button aria-label="Collapse sidebar category &#x27;æœç´ åŸºç¡€å¼€å‘&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/category/æ•°æ®ä¸è®¡ç®—">æ•°æ®ä¸è®¡ç®—</a><button aria-label="Collapse sidebar category &#x27;æ•°æ®ä¸è®¡ç®—&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cpp/alkaid/overview">æ¦‚è¿°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cpp/alkaid/memory">å†…å­˜ç®¡ç†</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cpp/alkaid/arrays">æ•°ç»„</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cpp/alkaid/datatypes">æ•°æ®ç±»å‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cpp/alkaid/tables">è¡¨æ ¼æ•°æ®</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cpp/alkaid/io">è¾“å…¥/è¾“å‡ºå’Œæ–‡ä»¶ç³»ç»Ÿ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cpp/alkaid/ipc">IPC format</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cpp/alkaid/json">JSON format</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cpp/alkaid/csv">CSV format</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cpp/alkaid/format">åˆ—å­˜æ ¼å¼</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cpp/alkaid/threading">çº¿ç¨‹ç®¡ç†</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cpp/alkaid/compute">è®¡ç®—ä¸è®¡ç®—å‡½æ•°</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/category/æµå¼è®¡ç®—">æµå¼è®¡ç®—</a><button aria-label="Collapse sidebar category &#x27;æµå¼è®¡ç®—&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cpp/alkaid/acero/overview">æ¦‚è§ˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/cpp/alkaid/acero/user_guide">ç”¨æˆ·æŒ‡å—</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cpp/alkaid/acero/developer_guide">  å¼€å‘è€…æŒ‡å—</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cpp/alkaid/conventions">ç´„å®š</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/æœç´¢åº”ç”¨å¼€å‘">æœç´¢åº”ç”¨å¼€å‘</a><button aria-label="Expand sidebar category &#x27;æœç´¢åº”ç”¨å¼€å‘&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/å‘é‡æ•°æ®åº“æ•™ç¨‹">å‘é‡æ•°æ®åº“æ•™ç¨‹</a><button aria-label="Expand sidebar category &#x27;å‘é‡æ•°æ®åº“æ•™ç¨‹&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/æœç´¢ç»Ÿä¸€æ‰§è¡Œå¼•æ“">æœç´¢ç»Ÿä¸€æ‰§è¡Œå¼•æ“</a><button aria-label="Expand sidebar category &#x27;æœç´¢ç»Ÿä¸€æ‰§è¡Œå¼•æ“&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/æœç´¢-ui">æœç´¢ UI</a><button aria-label="Expand sidebar category &#x27;æœç´¢ UI&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/æœç´ åŸºç¡€å¼€å‘"><span itemprop="name">æœç´ åŸºç¡€å¼€å‘</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/æ•°æ®ä¸è®¡ç®—"><span itemprop="name">æ•°æ®ä¸è®¡ç®—</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/æµå¼è®¡ç®—"><span itemprop="name">æµå¼è®¡ç®—</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">ç”¨æˆ·æŒ‡å—</span><meta itemprop="position" content="4"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.1.1</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ç”¨æˆ·æŒ‡å—</h1></header>
<p>æœ¬é¡µä»‹ç»å¦‚ä½•ä½¿ç”¨ Aceroã€‚å»ºè®®æ‚¨å…ˆé˜…è¯»
æ¦‚è¿°å¹¶ç†Ÿæ‚‰åŸºæœ¬æ¦‚å¿µã€‚</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ä½¿ç”¨-acero">ä½¿ç”¨ Acero<a href="#ä½¿ç”¨-acero" class="hash-link" aria-label="Direct link to ä½¿ç”¨ Acero" title="Direct link to ä½¿ç”¨ Acero">â€‹</a></h2>
<p>Acero çš„åŸºæœ¬å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæè¿°è®¡åˆ’çš„â€œDeclarationâ€å¯¹è±¡å›¾</p>
</li>
<li>
<p>è°ƒç”¨å…¶ä¸­ä¸€ä¸ªDeclarationToXyz æ–¹æ³•æ‰§è¡Œå£°æ˜ã€‚</p>
</li>
<li>
<p>ä»å£°æ˜å›¾åˆ›å»ºä¸€ä¸ªæ–°çš„ ExecPlanã€‚æ¯ä¸ª
Declaration å°†å¯¹åº”è®¡åˆ’ä¸­çš„ä¸€ä¸ª ExecNodeã€‚
æ­¤å¤–ï¼Œå°†æ·»åŠ ä¸€ä¸ªæ¥æ”¶å™¨èŠ‚ç‚¹ï¼Œå…·ä½“å–å†³äºä½¿ç”¨äº†å“ªä¸ª
DeclarationToXyz æ–¹æ³•ã€‚</p>
</li>
<li>
<p>æ‰§è¡Œ ExecPlanã€‚é€šå¸¸ï¼Œè¿™æ˜¯ä½œä¸º
DeclarationToXyz è°ƒç”¨çš„ä¸€éƒ¨åˆ†å‘ç”Ÿçš„ï¼Œä½†åœ¨DeclarationToReader ä¸­ï¼Œè¯»å–å™¨åœ¨è®¡åˆ’æ‰§è¡Œå®Œæˆä¹‹å‰è¿”å›ã€‚</p>
</li>
<li>
<p>è®¡åˆ’å®Œæˆåï¼Œå®ƒå°†è¢«é”€æ¯</p>
</li>
</ol>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="åˆ›å»ºè®¡åˆ’">åˆ›å»ºè®¡åˆ’<a href="#åˆ›å»ºè®¡åˆ’" class="hash-link" aria-label="Direct link to åˆ›å»ºè®¡åˆ’" title="Direct link to åˆ› å»ºè®¡åˆ’">â€‹</a></h2>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="using-substrait">Using Substrait<a href="#using-substrait" class="hash-link" aria-label="Direct link to Using Substrait" title="Direct link to Using Substrait">â€‹</a></h3>
<p>Substrait æ˜¯åˆ›å»ºè®¡åˆ’ï¼ˆ<code>Declaration</code> å›¾ï¼‰çš„é¦–é€‰æœºåˆ¶ã€‚åŸå› å¦‚ä¸‹ï¼š</p>
<ul>
<li>Substrait ç”Ÿäº§è€…èŠ±è´¹å¤§é‡æ—¶é—´å’Œç²¾åŠ›åˆ›å»ºç”¨æˆ·å‹å¥½çš„ APIï¼Œä»¥ä¾¿ä»¥ç®€å•çš„æ–¹å¼ç”Ÿæˆå¤æ‚çš„æ‰§è¡Œè®¡åˆ’ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ç³»åˆ—å¤æ‚çš„ <code>aggregate</code> èŠ‚ç‚¹æ¥
å®ç° <code>pivot_wider</code> æ“ä½œã€‚ç”Ÿäº§è€…å°†ä¸ºæ‚¨æä¾›æ›´ç®€å•çš„ APIï¼Œè€Œä¸æ˜¯æ‰‹åŠ¨åˆ›å»ºæ‰€æœ‰è¿™äº› <code>aggregate</code> èŠ‚ç‚¹ã€‚</li>
<li>å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨ Substraitï¼Œé‚£ä¹ˆå¦‚æœæ‚¨åœ¨æŸä¸ªæ—¶å€™å‘ç°å®ƒæ¯” Acero æ›´èƒ½æ»¡è¶³æ‚¨çš„éœ€æ±‚ï¼Œæ‚¨å¯ä»¥è½»æ¾åˆ‡æ¢åˆ°ä»»ä½•å…¶ä»–ä½¿ç”¨ Substrait çš„å¼•æ“ã€‚</li>
<li>æˆ‘ä»¬å¸Œæœ›æœ€ç»ˆä¼šå‡ºç°åŸºäº Substrait çš„ä¼˜åŒ–å™¨å’Œè§„åˆ’å™¨çš„å·¥å…·ã€‚é€šè¿‡ä½¿ç”¨ Substraitï¼Œæ‚¨å°†æ¥å¯ä»¥æ›´è½»æ¾åœ°ä½¿ç”¨è¿™äº›å·¥å…·ã€‚</li>
</ul>
<p>æ‚¨å¯ä»¥è‡ªå·±åˆ›å»º Substrait è®¡åˆ’ï¼Œä½†æ‰¾åˆ°ç°æœ‰çš„ Substrait ç”Ÿäº§è€…å¯èƒ½ä¼šæ›´å®¹æ˜“ã€‚ä¾‹å¦‚ï¼Œ
æ‚¨å¯ä»¥ä½¿ç”¨
<a href="https://github.com/ibis-project/ibis-substrait" target="_blank" rel="noopener noreferrer">ibis-substrait</a>
è½»æ¾åœ°ä» Python è¡¨è¾¾å¼åˆ›å»º Substrait è®¡åˆ’ã€‚æœ‰å‡ ç§
ä¸åŒçš„å·¥å…·èƒ½å¤Ÿä» SQL åˆ›å»º Substrait è®¡åˆ’ã€‚
æœ€ç»ˆï¼Œæˆ‘ä»¬å¸Œæœ›åŸºäº C++ çš„ Substrait ç”Ÿæˆå™¨èƒ½å¤Ÿå‡ºç°ã€‚
ä½†æ˜¯ï¼Œæˆ‘ä»¬ç›®å‰è¿˜ä¸çŸ¥é“æœ‰ä»»ä½•è¿™æ ·çš„ç”Ÿæˆå™¨ã€‚
æœ‰å…³ä» Substrait åˆ›å»ºæ‰§è¡Œè®¡åˆ’çš„è¯¦ç»†è¯´æ˜ï¼Œ
å¯ä»¥åœ¨<code>Substrait é¡µé¢&lt;acero-substrait&gt;</code>ä¸­æ‰¾åˆ°</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ç¨‹åºåŒ–è®¡åˆ’åˆ¶å®š">ç¨‹åºåŒ–è®¡åˆ’åˆ¶å®š<a href="#ç¨‹åºåŒ–è®¡åˆ’åˆ¶å®š" class="hash-link" aria-label="Direct link to ç¨‹åºåŒ–è®¡åˆ’åˆ¶å®š" title="Direct link to ç¨‹åºåŒ–è®¡åˆ’åˆ¶å®š">â€‹</a></h3>
<p>é€šè¿‡ç¼–ç¨‹æ–¹å¼åˆ›å»ºæ‰§è¡Œè®¡åˆ’æ¯”ä» Substrait åˆ›å»ºè®¡åˆ’æ›´ç®€å•  ï¼Œä½†ä¼šå¤±å»ä¸€äº›çµæ´»æ€§å’Œé¢å‘æœªæ¥çš„ä¿è¯ã€‚åˆ›å»ºå£°æ˜çš„
æœ€ç®€å•æ–¹æ³•æ˜¯ç®€å•åœ°å®ä¾‹åŒ–ä¸€ä¸ªã€‚æ‚¨å°†éœ€è¦å£°æ˜çš„åç§°ã€è¾“å…¥å‘é‡å’Œé€‰é¡¹å¯¹è±¡ã€‚ä¾‹å¦‚ï¼š</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing a project node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Scan-Project-Table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how a Scan operation can be used to load the data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// into the execution plan, how a project operation can be applied on the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// data stream and how the output is collected into a table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">ScanProjectSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Dataset</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetDataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function function" style="color:#8250DF">make_shared</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">dataset</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">ScanOptions</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// projection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Expression a_times_2 </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">call</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;multiply&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">field_ref</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;a&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">literal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#005CC5">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token plain">projection </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">project</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> scan_node_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ScanNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration scan</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;scan&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scan_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration project</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#C6105F">&quot;project&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scan</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">ProjectNodeOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">a_times_2</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">project</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ä¸Šè¿°ä»£ç åˆ›å»ºäº†ä¸€ä¸ªæ‰«æå£°æ˜ï¼ˆæ²¡æœ‰è¾“å…¥ï¼‰å’Œä¸€ä¸ªé¡¹ç›®å£°æ˜ï¼ˆä½¿ç”¨æ‰«æä½œä¸ºè¾“å…¥ï¼‰ã€‚è¿™å¾ˆç®€å•ï¼Œä½†æˆ‘ä»¬å¯ä»¥è®©å®ƒç¨å¾®ç®€å•ä¸€
äº›ã€‚å¦‚æœæ‚¨è¦åˆ›å»ºä¸€ä¸ªçº¿æ€§å£°æ˜åºåˆ—ï¼ˆå¦‚ä¸Šä¾‹æ‰€ç¤ºï¼‰ï¼Œé‚£ä¹ˆæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨<code>Declaration::Sequence</code>å‡½æ•°ã€‚</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// Inputs do not have to be passed to the project node when using Sequence</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration plan </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">Declaration</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">Sequence</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;scan&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scan_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;project&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">ProjectNodeOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">a_times_2</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æœ¬æ–‡æ¡£åé¢è¿˜ä¼šæä¾›æ›´å¤šæœ‰å…³ç¨‹åºåŒ–è®¡åˆ’åˆ›å»ºçš„ç¤ºä¾‹ã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ‰§è¡Œè®¡åˆ’">æ‰§è¡Œè®¡åˆ’<a href="#æ‰§è¡Œè®¡åˆ’" class="hash-link" aria-label="Direct link to æ‰§è¡Œè®¡åˆ’" title="Direct link to æ‰§è¡Œè®¡åˆ’">â€‹</a></h3>
<p>æœ‰å¤šç§ä¸åŒçš„æ–¹æ³•å¯ç”¨äºæ‰§è¡Œ
å£°æ˜ã€‚æ¯ç§æ–¹æ³•æä¾›çš„æ•°æ®å½¢å¼ç•¥æœ‰ä¸åŒã€‚
ç”±äºæ‰€æœ‰è¿™äº›æ–¹æ³•éƒ½ä»¥<code>DeclarationTo...</code>å¼€å¤´ï¼Œå› æ­¤æœ¬æŒ‡å—
é€šå¸¸å°†è¿™äº›æ–¹æ³•ç§°ä¸º<code>DeclarationToXyz</code>æ–¹æ³•ã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="declarationtotable">DeclarationToTable<a href="#declarationtotable" class="hash-link" aria-label="Direct link to DeclarationToTable" title="Direct link to DeclarationToTable">â€‹</a></h3>
<p><code>DeclarationToTable</code> æ–¹æ³•ä¼šå°†æ‰€æœ‰ç»“æœç´¯ç§¯åˆ°å•ä¸ª <code>alkaid::Table</code> ä¸­ã€‚è¿™ä¹Ÿè®¸æ˜¯ä» Acero
æ”¶é›†ç»“æœçš„æœ€ç®€å•æ–¹æ³•ã€‚è¿™ç§æ–¹æ³•çš„ä¸»è¦ç¼ºç‚¹æ˜¯å®ƒéœ€è¦å°†æ‰€æœ‰ç»“æœç´¯ç§¯åˆ°å†…å­˜ä¸­ã€‚</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Acero ä»¥å°å—çš„å½¢å¼å¤„ç†å¤§å‹æ•°æ®é›†ã€‚å¼€å‘äººå‘˜æŒ‡å—ä¸­å¯¹æ­¤è¿›è¡Œäº†æ›´è¯¦ç»†çš„æè¿°ã€‚å› æ­¤ï¼Œæ‚¨å¯èƒ½ä¼šæƒŠè®¶åœ°å‘ç°ä½¿ç”¨ StatementToTable æ”¶é›†çš„è¡¨çš„åˆ†å—æ–¹å¼ä¸æ‚¨çš„è¾“å…¥
ä¸åŒã€‚ä¾‹å¦‚ï¼Œæ‚¨çš„è¾“å…¥å¯èƒ½æ˜¯ä¸€ä¸ªå¤§å‹è¡¨ï¼Œå…¶ä¸­å•ä¸ªå—åŒ…å« 200 ä¸‡è¡Œã€‚ç„¶åï¼Œæ‚¨çš„è¾“å‡ºè¡¨å¯èƒ½æœ‰ 64 ä¸ªå—ï¼Œæ¯ä¸ªå—æœ‰ 32Ki è¡Œã€‚</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="declarationtoreader">DeclarationToReader<a href="#declarationtoreader" class="hash-link" aria-label="Direct link to DeclarationToReader" title="Direct link to DeclarationToReader">â€‹</a></h3>
<p><code>DeclarationToReader</code> æ–¹æ³•å…è®¸æ‚¨è¿­ä»£åœ°ä½¿ç”¨
ç»“æœã€‚å®ƒå°†åˆ›å»ºä¸€ä¸ª <code>alkaid::RecordBatchReader</code>ï¼Œæ‚¨å¯ä»¥åœ¨é—²æš‡æ—¶ä»ä¸­è¯»å–ã€‚å¦‚æœæ‚¨æ²¡æœ‰è¶³å¤Ÿå¿«åœ°ä»è¯»å–å™¨è¯»å–ï¼Œåˆ™å°†æ–½åŠ èƒŒå‹ï¼Œæ‰§è¡Œè®¡åˆ’å°†æš‚åœã€‚
å…³é—­è¯»å–å™¨å°†å–æ¶ˆæ­£åœ¨è¿è¡Œçš„æ‰§è¡Œè®¡åˆ’ï¼Œè¯»å–å™¨çš„ææ„å‡½æ•°å°†ç­‰å¾…æ‰§è¡Œè®¡åˆ’å®Œæˆå®ƒæ­£åœ¨æ‰§è¡Œçš„ä»»ä½•æ“ä½œï¼Œå› æ­¤å®ƒå¯èƒ½ä¼šé˜»å¡ã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="declarationtostatus">DeclarationToStatus<a href="#declarationtostatus" class="hash-link" aria-label="Direct link to DeclarationToStatus" title="Direct link to DeclarationToStatus">â€‹</a></h3>
<p>å¦‚æœæ‚¨æƒ³è¦è¿è¡Œè¯¥è®¡åˆ’ä½†å®é™…ä¸Šå¹¶ä¸æƒ³ä½¿ç”¨ç»“æœï¼Œåˆ™ <code>DeclarationToStatus</code> æ–¹æ³•å¾ˆæœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œåœ¨è¿›è¡ŒåŸºå‡†æµ‹è¯•æˆ–è®¡åˆ’å…·
æœ‰å‰¯ä½œç”¨ï¼ˆä¾‹å¦‚æ•°æ®é›†å†™å…¥èŠ‚ç‚¹ï¼‰æ—¶ï¼Œè¿™å¾ˆæœ‰ç”¨ã€‚å¦‚æœè®¡åˆ’ç”Ÿæˆä»»ä½•ç»“æœï¼Œåˆ™è¿™äº›ç»“æœå°†è¢«ç«‹å³ä¸¢å¼ƒã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="running-a-plan-directly">Running a Plan Directly<a href="#running-a-plan-directly" class="hash-link" aria-label="Direct link to Running a Plan Directly" title="Direct link to Running a Plan Directly">â€‹</a></h3>
<p>å¦‚æœå‡ºäºæŸç§åŸå› ï¼Œ<code>DeclarationToXyz</code> æ–¹æ³•ä¹‹ä¸€ä¸å¤Ÿç”¨ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥è¿è¡Œè®¡åˆ’ã€‚åªæœ‰åœ¨æ‰§è¡ŒæŸäº›ç‹¬ç‰¹
æ“ä½œæ—¶æ‰éœ€è¦è¿™æ ·åšã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨åˆ›å»ºäº†è‡ªå®šä¹‰æ¥æ”¶å™¨èŠ‚ç‚¹ï¼Œæˆ–è€…æ‚¨éœ€è¦å…·æœ‰å¤šä¸ªè¾“å‡ºçš„è®¡åˆ’ã€‚</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>åœ¨å­¦æœ¯æ–‡çŒ®å’Œè®¸å¤šç°æœ‰ç³»ç»Ÿä¸­ï¼Œæ™®éå‡è®¾æ‰§è¡Œè®¡åˆ’æœ€å¤šåªæœ‰ä¸€ä¸ªè¾“å‡ºã€‚Acero ä¸­çš„æŸ
äº›æ–¹æ³•ï¼ˆä¾‹å¦‚ StatementToXyz æ–¹æ³•ï¼‰ä¼šæœŸæœ›è¿™ä¸€ç‚¹ã€‚ä½†æ˜¯ï¼Œè®¾è®¡ä¸­æ²¡æœ‰ä»»ä½•å†…å®¹ä¸¥æ ¼é˜»æ­¢æœ‰å¤šä¸ªæ¥æ”¶å™¨èŠ‚ç‚¹ã€‚</p></div></div>
<p>æœ‰å…³å¦‚ä½•æ‰§è¡Œæ­¤æ“ä½œçš„è¯¦ç»†è¯´æ˜è¶…å‡ºäº†æœ¬æŒ‡å—çš„èŒƒå›´
ä½†å¤§è‡´æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p>åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>ExecPlan</code> å¯¹è±¡ã€‚</p>
</li>
<li>
<p>å°†æ¥æ”¶å™¨èŠ‚ç‚¹æ·»åŠ åˆ° <code>Declaration</code> å¯¹è±¡å›¾ï¼ˆè¿™æ˜¯
 åˆ›å»ºæ¥æ”¶å™¨èŠ‚ç‚¹å£°æ˜æ‰€éœ€çš„å”¯ä¸€ç±»å‹ï¼‰</p>
</li>
<li>
<p>ä½¿ç”¨ <code>Declaration::AddToPlan</code> å°†å£°æ˜æ·»åŠ åˆ°è®¡åˆ’
ï¼ˆå¦‚æœæ‚¨æœ‰å¤šä¸ªè¾“å‡ºï¼Œåˆ™æ‚¨å°†æ— æ³•ä½¿ç”¨
æ­¤æ–¹æ³•ï¼Œå¹¶ä¸”éœ€è¦ä¸€æ¬¡æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ï¼‰</p>
</li>
<li>
<p>ä½¿ç”¨ <code>ExecPlan::Validate</code> éªŒè¯è®¡åˆ’</p>
</li>
<li>
<p>ä½¿ç”¨ <code>ExecPlan::StartProducing</code> å¯åŠ¨è®¡åˆ’</p>
</li>
<li>
<p>ç­‰å¾… <code>ExecPlan::finished</code> è¿”å›çš„æœªæ¥å®Œæˆã€‚</p>
</li>
</ol>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æä¾›è¾“å…¥">æä¾›è¾“å…¥<a href="#æä¾›è¾“å…¥" class="hash-link" aria-label="Direct link to æä¾›è¾“å…¥" title="Direct link to æä¾›è¾“å…¥">â€‹</a></h2>
<p>æ‰§è¡Œè®¡åˆ’çš„è¾“å…¥æ•°æ®å¯ä»¥æ¥è‡ªå„ç§æ¥æºã€‚å®ƒé€šå¸¸æ˜¯ä»å­˜å‚¨åœ¨æŸç§æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶ä¸­è¯»å–çš„ã€‚è¾“å…¥é€šå¸¸æ¥è‡ªå†…å­˜æ•°æ®ã€‚ä¾‹
å¦‚ï¼Œåœ¨ç±»ä¼¼ pandas çš„å‰ç«¯ä¸­ï¼Œå†…å­˜æ•°æ®å¾ˆå¸¸è§ã€‚è¾“å…¥ä¹Ÿå¯ä»¥æ¥è‡ªç½‘ç»œæµï¼Œå¦‚èˆªç­è¯·æ±‚ã€‚Acero å¯ä»¥æ”¯æŒæ‰€æœ‰è¿™äº›æƒ…å†µï¼Œç”š
è‡³å¯ä»¥æ”¯æŒæ­¤å¤„æœªæåŠçš„ç‹¬ç‰¹å’Œè‡ªå®šä¹‰æƒ…å†µã€‚</p>
<p>æœ‰é¢„å®šä¹‰çš„æºèŠ‚ç‚¹æ¶µç›–æœ€å¸¸è§çš„è¾“å…¥åœºæ™¯ã€‚è¿™äº›åˆ—åœ¨ä¸‹é¢ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨çš„æºæ•°æ®æ˜¯å”¯ä¸€çš„ï¼Œé‚£ä¹ˆæ‚¨å°†éœ€è¦ä½¿ç”¨é€šç”¨çš„<code>æº</code>èŠ‚ç‚¹ã€‚
æ­¤èŠ‚ç‚¹å¸Œæœ›æ‚¨æä¾›å¼‚æ­¥æ‰¹å¤„ç†æµï¼Œå¹¶åœ¨<code>æ­¤å¤„ &lt;stream_execution_source_docs&gt;</code>ä¸­æœ‰æ›´è¯¦ç»†çš„ä»‹ç»ã€‚</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å¯ç”¨çš„-execnode-å®ç°">å¯ç”¨çš„ <code>ExecNode</code> å®ç°<a href="#å¯ç”¨çš„-execnode-å®ç°" class="hash-link" aria-label="Direct link to å¯ç”¨çš„-execnode-å®ç°" title="Direct link to å¯ç”¨çš„-execnode-å®ç°">â€‹</a></h2>
<hr>
<p>ä¸‹è¡¨å¿«é€Ÿæ€»ç»“äº†å¯ç”¨çš„è¿ç®—ç¬¦ã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æºèŠ‚ç‚¹----sources-nodes">æºèŠ‚ç‚¹ -- Sources Nodes<a href="#æºèŠ‚ç‚¹----sources-nodes" class="hash-link" aria-label="Direct link to æºèŠ‚ç‚¹ -- Sources Nodes" title="Direct link to æºèŠ‚ç‚¹ -- Sources Nodes">â€‹</a></h3>
<p>  è¿™äº›èŠ‚ç‚¹å¯ä»¥ä½œä¸ºæ•°æ®æº</p>
<table><thead><tr><th style="text-align:left">Factory Name</th><th style="text-align:left">Options</th><th style="text-align:left">Brief Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>source</code></td><td style="text-align:left"><code>SourceNodeOptions</code></td><td style="text-align:left">A generic source node that wraps an asynchronous stream of data (<code>example &lt;stream_execution_source_docs&gt;</code>)</td></tr><tr><td style="text-align:left"><code>table_source</code></td><td style="text-align:left"><code>TableSourceNodeOptions</code></td><td style="text-align:left">Generates data from an<code>alkaid::Table</code> (<code>example &lt;stream_execution_table_source_docs&gt;</code>)</td></tr><tr><td style="text-align:left"><code>record_batch_source</code></td><td style="text-align:left"><code>RecordBatchSourceNodeOptions</code></td><td style="text-align:left">Generates data from an iterator of <code>alkaid::RecordBatch</code></td></tr><tr><td style="text-align:left"><code>record_batch_reader_source</code></td><td style="text-align:left"><code>RecordBatchReaderSourceNodeOptions</code></td><td style="text-align:left">Generates data from an<code>alkaid::RecordBatchReader</code></td></tr><tr><td style="text-align:left"><code>exec_batch_source</code></td><td style="text-align:left"><code>ExecBatchSourceNodeOptions</code></td><td style="text-align:left">Generates data from an iterator of <code>alkaid::compute::ExecBatch</code></td></tr><tr><td style="text-align:left"><code>array_vector_source</code></td><td style="text-align:left"><code>ArrayVectorSourceNodeOptions</code></td><td style="text-align:left">Generates data from an iterator of vectors of <code>alkaid::Array</code></td></tr><tr><td style="text-align:left"><code>scan</code></td><td style="text-align:left"><code>alkaid::dataset::ScanNodeOptions</code></td><td style="text-align:left">Generates data from an <code>alkaid::dataset::Dataset</code> (requires the datasets module)(<code>example &lt;stream_execution_scan_docs&gt;</code>)</td></tr></tbody></table>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="è®¡ç®—èŠ‚ç‚¹----compute-nodes">è®¡ç®—èŠ‚ç‚¹ -- Compute Nodes<a href="#è®¡ç®—èŠ‚ç‚¹----compute-nodes" class="hash-link" aria-label="Direct link to è®¡ç®—èŠ‚ç‚¹ -- Compute Nodes" title="Direct link to è®¡ç®—èŠ‚ç‚¹ -- Compute Nodes">â€‹</a></h3>
<p>è¿™äº›èŠ‚ç‚¹å¯¹æ•°æ®è¿›è¡Œè®¡ç®—ï¼Œå¹¶å¯èƒ½è½¬æ¢æˆ–é‡å¡‘æ•°æ®</p>
<table><thead><tr><th style="text-align:left">Factory Name</th><th style="text-align:left">Options</th><th style="text-align:left">Brief Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>filter</code></td><td style="text-align:left"><code>FilterNodeOptions</code></td><td style="text-align:left">Removes rows that do not match a given filter expression(<code>example &lt;stream_execution_filter_docs&gt;</code>)</td></tr><tr><td style="text-align:left"><code>project</code></td><td style="text-align:left"><code>ProjectNodeOptions</code></td><td style="text-align:left">Creates new columns by evaluating compute expressions.  Can also drop and reorder columns(<code>example &lt;stream_execution_project_docs&gt;</code>)</td></tr><tr><td style="text-align:left"><code>aggregate</code></td><td style="text-align:left"><code>AggregateNodeOptions</code></td><td style="text-align:left">Calculates summary statistics across the entire input stream or on groups of data(<code>example &lt;stream_execution_aggregate_docs&gt;</code>)</td></tr><tr><td style="text-align:left"><code>pivot_longer</code></td><td style="text-align:left"><code>PivotLongerNodeOptions</code></td><td style="text-align:left">Reshapes data by converting some columns into additional rows</td></tr></tbody></table>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ’åˆ—èŠ‚ç‚¹----arrangement-nodes">æ’åˆ—èŠ‚ç‚¹ -- Arrangement Nodes<a href="#æ’åˆ—èŠ‚ç‚¹----arrangement-nodes" class="hash-link" aria-label="Direct link to æ’åˆ—èŠ‚ç‚¹ -- Arrangement Nodes" title="Direct link to æ’åˆ—èŠ‚ç‚¹ -- Arrangement Nodes">â€‹</a></h3>
<p>è¿™äº›èŠ‚ç‚¹å¯¹æ•°æ®æµè¿›è¡Œé‡æ–°æ’åºã€ç»„åˆæˆ–åˆ‡ç‰‡</p>
<table><thead><tr><th style="text-align:left">Factory Name</th><th style="text-align:left">Options</th><th style="text-align:left">Brief Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>hash_join</code></td><td style="text-align:left"><code>HashJoinNodeOptions</code></td><td style="text-align:left">Joins two inputs based on common columns (:ref:<code>example &lt;stream_execution_hashjoin_docs&gt;</code>)</td></tr><tr><td style="text-align:left"><code>asofjoin</code></td><td style="text-align:left"><code>AsofJoinNodeOptions</code></td><td style="text-align:left">Joins multiple inputs to the first input based on a common ordered column (often time)</td></tr><tr><td style="text-align:left"><code>union</code></td><td style="text-align:left">N/A</td><td style="text-align:left">Merges two inputs with identical schemas (:ref:<code>example &lt;stream_execution_union_docs&gt;</code>)</td></tr><tr><td style="text-align:left"><code>order_by</code></td><td style="text-align:left"><code>OrderByNodeOptions</code></td><td style="text-align:left">Reorders a stream</td></tr><tr><td style="text-align:left"><code>fetch</code></td><td style="text-align:left"><code>FetchNodeOptions</code></td><td style="text-align:left">Slices a range of rows from a stream</td></tr></tbody></table>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æ±‡èšèŠ‚ç‚¹----sink-nodes">æ±‡èšèŠ‚ç‚¹ -- Sink Nodes<a href="#æ±‡èšèŠ‚ç‚¹----sink-nodes" class="hash-link" aria-label="Direct link to æ±‡èšèŠ‚ç‚¹ -- Sink Nodes" title="Direct link to æ±‡èšèŠ‚ç‚¹ -- Sink Nodes">â€‹</a></h3>
<p>è¿™äº›èŠ‚ç‚¹ç»ˆæ­¢è®¡åˆ’ã€‚ç”¨æˆ·é€šå¸¸ä¸ä¼šåˆ›å»ºæ¥æ”¶èŠ‚ç‚¹ï¼Œå› ä¸ºå®ƒä»¬æ˜¯æ ¹æ®ç”¨äºæ¶ˆè´¹è®¡åˆ’çš„DeclarationToXyzæ–¹æ³•é€‰æ‹©çš„ã€‚ä½†
æ˜¯ï¼Œå¯¹äºé‚£äº›å¼€å‘æ–°æ¥æ”¶èŠ‚ç‚¹æˆ–ä»¥é«˜çº§æ–¹å¼ä½¿ç”¨Aceroçš„äººæ¥è¯´ï¼Œæ­¤åˆ—è¡¨å¯èƒ½å¾ˆæœ‰ç”¨ã€‚</p>
<table><thead><tr><th style="text-align:left">Factory Name</th><th style="text-align:left">Options</th><th style="text-align:left">Brief Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>sink</code></td><td style="text-align:left"><code>SinkNodeOptions</code></td><td style="text-align:left">Collects batches into a FIFO queue with optional backpressure</td></tr><tr><td style="text-align:left"><code>write</code></td><td style="text-align:left"><code>alkaid::dataset::WriteNodeOptions</code></td><td style="text-align:left">Writes batches to a filesystem (:ref:<code>example &lt;stream_execution_write_docs&gt;</code>)</td></tr><tr><td style="text-align:left"><code>consuming_sink</code></td><td style="text-align:left"><code>ConsumingSinkNodeOptions</code></td><td style="text-align:left">Consumes batches using a user provided callback function</td></tr><tr><td style="text-align:left"><code>table_sink</code></td><td style="text-align:left"><code>TableSinkNodeOptions</code></td><td style="text-align:left">Collects batches into an :class:<code>alkaid::Table</code></td></tr><tr><td style="text-align:left"><code>order_by_sink</code></td><td style="text-align:left"><code>OrderBySinkNodeOptions</code></td><td style="text-align:left">Deprecated</td></tr><tr><td style="text-align:left"><code>select_k_sink</code></td><td style="text-align:left"><code>SelectKSinkNodeOptions</code></td><td style="text-align:left">Deprecated</td></tr></tbody></table>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ç¤ºä¾‹">ç¤ºä¾‹<a href="#ç¤ºä¾‹" class="hash-link" aria-label="Direct link to ç¤ºä¾‹" title="Direct link to ç¤ºä¾‹">â€‹</a></h2>
<p>æœ¬æ–‡æ¡£çš„å…¶ä½™éƒ¨åˆ†åŒ…å«ç¤ºä¾‹æ‰§è¡Œè®¡åˆ’ã€‚æ¯ä¸ªç¤ºä¾‹
éƒ½é‡ç‚¹ä»‹ç»äº†ç‰¹å®šæ‰§è¡ŒèŠ‚ç‚¹çš„è¡Œä¸ºã€‚</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="æº-source"><code>æº</code> <code>source</code><a href="#æº-source" class="hash-link" aria-label="Direct link to æº-source" title="Direct link to æº-source">â€‹</a></h3>
<p><code>source</code> æ“ä½œå¯è§†ä¸ºåˆ›å»ºæµå¼æ‰§è¡Œè®¡åˆ’çš„å…¥å£ç‚¹ã€‚<code>SourceNodeOptions</code> ç”¨äºåˆ›å»º <code>source</code> æ“ä½œã€‚<code>source</code> æ“ä½œæ˜¯ç›®å‰
æœ€é€šç”¨ã€æœ€çµæ´»çš„æºç±»å‹ï¼Œä½†é…ç½®èµ·æ¥å¯èƒ½ç›¸å½“æ£˜æ‰‹ã€‚é¦–å…ˆï¼Œæ‚¨åº”è¯¥æŸ¥çœ‹å…¶ä»–æºèŠ‚ç‚¹ç±»å‹ï¼Œä»¥ç¡®ä¿æ²¡æœ‰æ›´ç®€å•çš„é€‰æ‹©ã€‚</p>
<p>æºèŠ‚ç‚¹éœ€è¦æŸç§å¯ä»¥è°ƒç”¨æ¥è½®è¯¢æ›´å¤šæ•°æ®çš„å‡½æ•°ã€‚æ­¤å‡½æ•°ä¸åº”å¸¦ä»»ä½•å‚æ•°ï¼Œå¹¶ä¸”åº”è¿”å› <code>alkaid::Future&lt;std::optional&lt;alkaid::ExecBatch&gt;&gt;</code>ã€‚æ­¤
å‡½æ•°å¯èƒ½æ­£åœ¨è¯»å–æ–‡ä»¶ã€éå†å†…å­˜ç»“æ„æˆ–ä»ç½‘ç»œè¿æ¥æ¥æ”¶æ•°æ®ã€‚alkaid åº“å°†è¿™äº›å‡½æ•°ç§°ä¸º <code>alkaid::AsyncGenerator</code>ï¼Œå¹¶ä¸”æœ‰è®¸å¤šå®ç”¨ç¨‹åºå¯ç”¨äºä½¿ç”¨è¿™äº›
å‡½æ•°ã€‚å¯¹äºæ­¤ç¤ºä¾‹ï¼Œæˆ‘ä»¬ä½¿ç”¨å·²å­˜å‚¨åœ¨å†…å­˜ä¸­çš„è®°å½•æ‰¹æ¬¡å‘é‡ã€‚æ­¤å¤–ï¼Œå¿…é¡»é¢„å…ˆçŸ¥é“æ•°æ®çš„æ¨¡å¼ã€‚Acero å¿…é¡»åœ¨å¼€å§‹ä»»ä½•å¤„ç†ä¹‹å‰çŸ¥é“æ‰§è¡Œå›¾æ¯ä¸ªé˜¶æ®µçš„æ•°æ®æ¨¡å¼ã€‚
è¿™æ„å‘³ç€æˆ‘ä»¬å¿…é¡»ä¸ºæºèŠ‚ç‚¹æä¾›ä¸æ•°æ®æœ¬èº«åˆ†å¼€çš„æ¨¡å¼ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç»“æ„æ¥ä¿å­˜æ•°æ®ç”Ÿæˆå™¨å®šä¹‰ã€‚è¿™åŒ…æ‹¬å†…å­˜æ‰¹æ¬¡ã€æ¨¡å¼å’Œç”¨ä½œæ•°æ®ç”Ÿæˆå™¨çš„å‡½æ•°ï¼š</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#CF222E">struct</span><span class="token plain"> </span><span class="token class-name" style="color:#116329">BatchesWithSchema</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">vector</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecBatch</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> batches</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Schema</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> schema</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// This method uses internal alkaid utilities to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// convert a vector of record batches to an AsyncGenerator of optional batches</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AsyncGenerator</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">optional</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecBatch</span><span class="token operator" style="color:#D73A49">&gt;&gt;</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">gen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> opt_batches </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">internal</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">MapVector</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecBatch batch</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">make_optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">batch</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        batches</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AsyncGenerator</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">optional</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecBatch</span><span class="token operator" style="color:#D73A49">&gt;&gt;</span><span class="token plain"> gen</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    gen </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">MakeVectorGenerator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">opt_batches</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> gen</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ç”Ÿæˆç”¨äºè®¡ç®—çš„æ ·æœ¬æ‰¹æ¬¡ï¼š</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Result</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">BatchesWithSchema</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">MakeBasicBatches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  BatchesWithSchema out</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> field_vector </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;a&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">int32</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;b&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">boolean</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b1_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token generic-function function" style="color:#8250DF">GetArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">Int32Type</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#005CC5">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">4</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b2_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token generic-function function" style="color:#8250DF">GetArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">Int32Type</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#005CC5">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">6</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">7</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b3_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token generic-function function" style="color:#8250DF">GetArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">Int32Type</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#005CC5">8</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">9</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">10</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b1_bool</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token generic-function function" style="color:#8250DF">GetArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">BooleanType</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token boolean" style="color:#005CC5">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">true</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b2_bool</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token generic-function function" style="color:#8250DF">GetArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">BooleanType</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token boolean" style="color:#005CC5">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">true</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b3_bool</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token generic-function function" style="color:#8250DF">GetArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">BooleanType</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token boolean" style="color:#005CC5">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">false</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token function" style="color:#8250DF">GetExecBatchFromVectors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">field_vector</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">b1_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b1_bool</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token function" style="color:#8250DF">GetExecBatchFromVectors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">field_vector</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">b2_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b2_bool</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token function" style="color:#8250DF">GetExecBatchFromVectors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">field_vector</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">b3_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b3_bool</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">batches </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">b1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b3</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">schema</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">field_vector</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> out</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ä½¿ç”¨ <code>source</code> çš„ç¤ºä¾‹ï¼ˆsink çš„ç”¨æ³•åœ¨
<code>sink&lt;stream_execution_sink_docs&gt;</code> ä¸­æœ‰è¯¦ç»†è¯´æ˜ï¼‰ï¼š</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example demonstrating a source and sink node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Source-Table Example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how a custom source can be used</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// in an execution plan. This includes source node using pregenerated</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// data and collecting it into a table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This sort of custom source is often not needed.  In most cases you can</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// use a scan (for a dataset source) or a source like table_source, array_vector_source,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// exec_batch_source, or record_batch_source (for in-memory data)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">SourceSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">MakeBasicBatches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> source_node_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">gen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration source</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">source_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">source</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="table_source"><code>table_source</code><a href="#table_source" class="hash-link" aria-label="Direct link to table_source" title="Direct link to table_source">â€‹</a></h3>
<p>åœ¨ä¸Šä¸€ä¸ªç¤ºä¾‹æºèŠ‚ç‚¹ <code>&lt;stream_execution_source_docs&gt;</code>ä¸­ï¼ŒæºèŠ‚ç‚¹ç”¨äºè¾“å…¥æ•°æ®ã€‚ä½†æ˜¯åœ¨å¼€å‘åº”ç”¨ç¨‹åºæ—¶ï¼Œå¦‚æœ
æ•°æ®å·²ç»ä½œä¸ºè¡¨å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œåˆ™ä½¿ç”¨<code>TableSourceNodeOptions</code>ä¼šæ›´åŠ å®¹æ˜“ï¼Œæ€§èƒ½ä¹Ÿæ›´é«˜ã€‚åœ¨è¿™é‡Œï¼Œ
è¾“å…¥æ•°æ®å¯ä»¥ä½œä¸º<code>std::shared_ptr&lt;alkaid::Table&gt;</code>ä»¥åŠ<code>max_batch_size</code>ä¼ é€’ã€‚<code>max_batch_size</code>ç”¨äºæ‹†åˆ†å¤§å‹è®°å½•æ‰¹æ¬¡ï¼Œä»¥ä¾¿
å¯ä»¥å¹¶è¡Œå¤„ç†å®ƒä»¬ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“æºè¡¨çš„æ‰¹æ¬¡è¾ƒå°æ—¶ï¼Œè¡¨æ‰¹æ¬¡ä¸ä¼šåˆå¹¶å½¢æˆæ›´å¤§çš„æ‰¹æ¬¡ã€‚</p>
<p>ä½¿ç”¨<code>table_source</code>çš„ç¤ºä¾‹</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing a table source node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// TableSource-Table Example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how a table_source can be used</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// in an execution plan. This includes a table source node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// receiving data from a table.  This plan simply collects the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// data back into a table but nodes could be added that modify</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// or transform the data as well (as is shown in later examples)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">TableSourceSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AsyncGenerator</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">optional</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecBatch</span><span class="token operator" style="color:#D73A49">&gt;&gt;</span><span class="token plain"> sink_gen</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">int</span><span class="token plain"> max_batch_size </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> table_source_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">TableSourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> max_batch_size</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration source</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;table_source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">table_source_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">source</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="filter"><code>filter</code><a href="#filter" class="hash-link" aria-label="Direct link to filter" title="Direct link to filter">â€‹</a></h3>
<p><code>filter</code> æ“ä½œï¼Œé¡¾åæ€ä¹‰ï¼Œæä¾›äº†ä¸€ä¸ªå®šä¹‰æ•°æ®è¿‡æ»¤æ¡ä»¶çš„é€‰é¡¹ã€‚å®ƒé€‰æ‹©ç»™å®šè¡¨è¾¾å¼è®¡ç®—ç»“æœä¸º true çš„
è¡Œã€‚å¯ä»¥ä½¿ç”¨ <code>alkaid::compute::Expression</code> ç¼–å†™è¿‡æ»¤å™¨ï¼Œå¹¶ä¸”è¡¨è¾¾å¼çš„è¿”å›ç±»å‹åº”ä¸ºå¸ƒå°”å€¼ã€‚ä¾‹å¦‚ï¼Œ
å¦‚æœæˆ‘ä»¬å¸Œæœ›ä¿ç•™åˆ— <code>b</code> çš„å€¼å¤§äº 3 çš„è¡Œï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¡¨è¾¾å¼ã€‚</p>
<p>è¿‡æ»¤å™¨ç¤ºä¾‹ï¼š</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing a filter node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Source-Filter-Table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how a filter can be used in an execution plan,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// to filter data from a source. The output from the execution plan</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// is collected into a table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">ScanFilterSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Dataset</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetDataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function function" style="color:#8250DF">make_shared</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">dataset</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">ScanOptions</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// specify the filter.  This filter removes all rows where the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// value of the &quot;a&quot; column is greater than 3.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Expression filter_expr </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">greater</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">field_ref</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;a&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">literal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#005CC5">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// set filter for scanner : on-disk / push-down filtering.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// This step can be skipped if you are not reading from disk.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token plain">filter </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> filter_expr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// empty projection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token plain">projection </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">project</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// construct the scan node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;Initialized Scanning Options&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> scan_node_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ScanNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;Scan node options created&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration scan</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;scan&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scan_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// pipe the scan node into the filter node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// Need to set the filter in scan node options and filter node options.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// At scan node it is used for on-disk / push-down filtering.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// At filter node it is used for in-memory filtering.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration filter</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#C6105F">&quot;filter&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scan</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">FilterNodeOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">filter_expr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">filter</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="project"><code>project</code><a href="#project" class="hash-link" aria-label="Direct link to project" title="Direct link to project">â€‹</a></h3>
<p><code>project</code> æ“ä½œä¼šé‡æ–°æ’åˆ—ã€åˆ é™¤ã€è½¬æ¢å’Œåˆ›å»º
åˆ—ã€‚æ¯ä¸ªè¾“å‡ºåˆ—éƒ½æ˜¯é€šè¿‡é’ˆå¯¹æºè®°å½•æ‰¹æ¬¡è¯„ä¼°è¡¨è¾¾å¼æ¥è®¡ç®—çš„ã€‚è¿™äº›å¿…é¡»æ˜¯æ ‡é‡è¡¨è¾¾å¼
ï¼ˆç”±æ ‡é‡æ–‡å­—ã€å­—æ®µå¼•ç”¨å’Œæ ‡é‡
å‡½æ•°ç»„æˆçš„è¡¨è¾¾å¼ï¼Œå³å…ƒç´ å‡½æ•°ï¼Œä¸ºæ¯ä¸ªè¾“å…¥è¡Œè¿”å›ä¸€ä¸ªå€¼ï¼Œè€Œä¸æ‰€æœ‰å…¶ä»–è¡Œçš„å€¼æ— å…³ï¼‰ã€‚è¿™é€šè¿‡ <code>ProjectNodeOptions</code> å…¬å¼€ï¼Œå®ƒè¦æ±‚æ¯ä¸ªè¾“å‡ºåˆ—éƒ½æœ‰ä¸€ä¸ª <code>alkaid::compute::Expression</code>
å’Œåç§°ï¼ˆå¦‚æœæ²¡æœ‰æä¾›åç§°ï¼Œåˆ™å°†ä½¿ç”¨ exprs çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ï¼‰ã€‚</p>
<p><code>project</code>ç¤ºä¾‹ï¼š</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing a project node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Scan-Project-Table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how a Scan operation can be used to load the data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// into the execution plan, how a project operation can be applied on the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// data stream and how the output is collected into a table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">ScanProjectSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Dataset</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetDataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function function" style="color:#8250DF">make_shared</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">dataset</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">ScanOptions</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// projection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Expression a_times_2 </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">call</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;multiply&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">field_ref</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;a&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">literal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#005CC5">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token plain">projection </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">project</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> scan_node_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ScanNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration scan</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;scan&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scan_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration project</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#C6105F">&quot;project&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scan</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">ProjectNodeOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">a_times_2</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">project</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="aggregate"><code>aggregate</code><a href="#aggregate" class="hash-link" aria-label="Direct link to aggregate" title="Direct link to aggregate">â€‹</a></h3>
<p><code>aggregate</code> èŠ‚ç‚¹è®¡ç®—å„ç§ç±»å‹çš„æ•°æ®èšåˆã€‚</p>
<p>Alkaid æ”¯æŒä¸¤ç§ç±»å‹çš„èšåˆï¼šâ€œæ ‡é‡â€èšåˆå’Œâ€œå“ˆå¸Œâ€èšåˆã€‚æ ‡é‡èšåˆå°†æ•°ç»„æˆ–æ ‡é‡è¾“å…¥ç®€åŒ–ä¸ºå•ä¸ªæ ‡é‡è¾“å‡ºï¼ˆä¾‹å¦‚ï¼Œè®¡ç®—åˆ—çš„å¹³å‡å€¼ï¼‰ã€‚
å“ˆå¸Œèšåˆçš„ä½œç”¨ç±»ä¼¼äº SQL ä¸­çš„ <code>GROUP BY</code>ï¼Œé¦–å…ˆæ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªå…³é”®åˆ—å¯¹æ•°æ®è¿›è¡Œåˆ†åŒºï¼Œç„¶åå‡å°‘æ¯ä¸ªåˆ†åŒºä¸­çš„æ•°æ®ã€‚<code>aggregate</code>
èŠ‚ç‚¹æ”¯æŒè¿™ä¸¤ç§ç±»å‹çš„è®¡ç®—ï¼Œå¹¶ä¸”å¯ä»¥ä¸€æ¬¡è®¡ç®—ä»»æ„æ•°é‡çš„èšåˆã€‚</p>
<p><code>AggregateNodeOptions</code> ç”¨äºå®šä¹‰èšåˆæ ‡å‡†ã€‚å®ƒéœ€è¦ä¸€ä¸ªèšåˆå‡½æ•°åŠå…¶é€‰é¡¹çš„åˆ—è¡¨ï¼›è¦èšåˆçš„ç›®æ ‡å­—æ®µåˆ—è¡¨ï¼Œæ¯ä¸ªå‡½æ•°ä¸€ä¸ªï¼›ä»¥åŠ
è¾“å‡ºå­—æ®µçš„åç§°åˆ—è¡¨ï¼Œæ¯ä¸ªå‡½æ•°ä¸€ä¸ªã€‚åœ¨å“ˆå¸Œèšåˆçš„æƒ…å†µä¸‹ï¼Œå®ƒè¿˜å¯ä»¥é€‰æ‹©ç”¨äºå¯¹æ•°æ®è¿›è¡Œåˆ†åŒºçš„åˆ—åˆ—è¡¨ã€‚å¯ä»¥ä»<code>æ­¤èšåˆå‡½æ•°åˆ—è¡¨&lt;aggregation-option-list&gt;</code>
ä¸­é€‰æ‹©èšåˆå‡½æ•°ã€‚</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>æ­¤èŠ‚ç‚¹æ˜¯ä¸€ä¸ª<code>ç®¡é“æ–­è·¯å™¨</code>ï¼Œå®ƒå°†åœ¨å†…å­˜ä¸­å®Œå…¨å®ç°æ•°æ®é›†ã€‚å°†æ¥ï¼Œå°†æ·»åŠ æº¢å‡ºæœºåˆ¶ï¼Œä»¥ç¼“è§£è¿™ä¸€é™åˆ¶ã€‚</p></div></div>
<p>èšåˆå¯ä»¥å°†ç»“æœä½œä¸ºç»„æˆ–æ ‡é‡æä¾›ã€‚ä¾‹å¦‚ï¼Œåƒ <code>hash_count</code> è¿™æ ·çš„æ“  ä½œå°†æ¯ä¸ªå”¯ä¸€è®°å½•çš„è®¡æ•°ä½œä¸ºåˆ†ç»„ç»“æœæä¾›ï¼Œè€Œåƒ <code>sum</code> è¿™æ ·çš„æ“ä½œåˆ™æä¾›å•ä¸ªè®°å½•ã€‚</p>
<p>æ ‡é‡èšåˆç¤ºä¾‹ï¼š</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing an aggregation node to aggregate an entire table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Source-Aggregation-Table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how an aggregation operation can be applied on a</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// execution plan resulting in a scalar output. The source node loads the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// data and the aggregation (counting unique types in column &#x27;a&#x27;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// is applied on this data. The output is collected into a table (that will</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// have exactly one row)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">SourceScalarAggregateSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">MakeBasicBatches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> source_node_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">gen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration source</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">source_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> aggregate_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AggregateNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#6B6B6B;font-style:italic">/*aggregates=*/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;sum&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">nullptr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;a&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;sum(a)&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration aggregate</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#C6105F">&quot;aggregate&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">source</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aggregate_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aggregate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ç»„èšåˆç¤ºä¾‹ï¼š</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing an aggregation node to perform a group-by operation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Source-Aggregation-Table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how an aggregation operation can be applied on a</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// execution plan resulting in grouped output. The source node loads the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// data and the aggregation (counting unique types in column &#x27;a&#x27;) is</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// applied on this data. The output is collected into a table that will contain</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// one row for each unique combination of group keys.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">SourceGroupAggregateSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">MakeBasicBatches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AsyncGenerator</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">optional</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecBatch</span><span class="token operator" style="color:#D73A49">&gt;&gt;</span><span class="token plain"> sink_gen</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> source_node_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">gen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration source</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">source_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function function" style="color:#8250DF">make_shared</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">cp</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">CountOptions</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CountOptions</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ONLY_VALID</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> aggregate_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AggregateNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#6B6B6B;font-style:italic">/*aggregates=*/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;hash_count&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;a&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;count(a)&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               </span><span class="token comment" style="color:#6B6B6B;font-style:italic">/*keys=*/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;b&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration aggregate</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#C6105F">&quot;aggregate&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">source</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aggregate_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aggregate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sink"><code>sink</code><a href="#sink" class="hash-link" aria-label="Direct link to sink" title="Direct link to sink">â€‹</a></h3>
<p><code>sink</code> æ“ä½œæä¾›è¾“å‡ºï¼Œæ˜¯æµå¼æ‰§è¡Œå®šä¹‰çš„æœ€ç»ˆèŠ‚ç‚¹ã€‚<code>SinkNodeOptions</code> æ¥å£ç”¨äºä¼ é€’æ‰€éœ€çš„é€‰é¡¹ã€‚ä¸æºæ“ä½œç¬¦ç±»
ä¼¼ï¼Œsink æ“ä½œç¬¦æ¯æ¬¡è°ƒç”¨æ—¶éƒ½ä¼šä½¿ç”¨è¿”å›è®°å½•æ‰¹å¤„ç†æœªæ¥çš„å‡½æ•°æ¥å…¬å¼€è¾“å‡ºã€‚é¢„è®¡è°ƒç”¨è€…å°†é‡å¤è°ƒç”¨æ­¤å‡½æ•°ï¼Œç›´åˆ°ç”Ÿæˆå™¨å‡½æ•°è€—
å°½ï¼ˆè¿”å›<code>std::optional::nullopt</code>ï¼‰ã€‚å¦‚æœæ­¤å‡½æ•°è°ƒç”¨ä¸å¤Ÿé¢‘ç¹ï¼Œåˆ™è®°å½•æ‰¹å¤„ç†å°†åœ¨å†…å­˜ä¸­ç´¯ç§¯ã€‚æ‰§è¡Œè®¡åˆ’åº”è¯¥åªæœ‰ä¸€ä¸ªâ€œç»ˆç«¯â€èŠ‚ç‚¹ï¼ˆä¸€ä¸ªæ¥æ”¶å™¨èŠ‚
ç‚¹ï¼‰ã€‚<code>ExecPlan</code> å¯èƒ½ä¼šå› å–æ¶ˆæˆ–é”™è¯¯è€Œæå‰ç»ˆæ­¢ï¼Œåœ¨è¾“å‡ºè¢«å®Œå…¨ä½¿ç”¨ä¹‹å‰ã€‚ä½†æ˜¯ï¼Œè¯¥è®¡åˆ’å¯ä»¥ç‹¬ç«‹äºæ¥æ”¶å™¨å®‰å…¨åœ°é”€æ¯ï¼Œæ¥æ”¶å™¨å°†é€š
è¿‡<code>exec_plan-&gt;finished()</code> ä¿å­˜æœªä½¿ç”¨çš„æ‰¹æ¬¡ã€‚</p>
<p>ä½œä¸ºæºç¤ºä¾‹çš„ä¸€éƒ¨åˆ†ï¼Œè¿˜åŒ…æ‹¬ Sink æ“ä½œï¼›</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example demonstrating a source and sink node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Source-Table Example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how a custom source can be used</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// in an execution plan. This includes source node using pregenerated</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// data and collecting it into a table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This sort of custom source is often not needed.  In most cases you can</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// use a scan (for a dataset source) or a source like table_source, array_vector_source,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// exec_batch_source, or record_batch_source (for in-memory data)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">SourceSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">MakeBasicBatches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> source_node_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">gen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration source</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">source_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">source</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="consuming_sink"><code>consuming_sink</code><a href="#consuming_sink" class="hash-link" aria-label="Direct link to consuming_sink" title="Direct link to consuming_sink">â€‹</a></h3>
<p><code>consuming_sink</code> æ“ä½œç¬¦æ˜¯æ‰§è¡Œè®¡åˆ’ä¸­åŒ…å«æ¶ˆè´¹æ“ä½œçš„æ¥æ”¶æ“ä½œï¼ˆå³ï¼Œæ‰§è¡Œè®¡åˆ’åœ¨æ¶ˆè´¹å®Œæˆä¹‹å‰ä¸åº”å®Œæˆï¼‰ã€‚
ä¸ <code>sink</code> èŠ‚ç‚¹ä¸åŒï¼Œæ­¤èŠ‚ç‚¹æ¥æ”¶é¢„æœŸæ¶ˆè´¹æ‰¹æ¬¡çš„å›è°ƒå‡½æ•°ã€‚ä¸€æ—¦æ­¤å›è°ƒå®Œæˆï¼Œæ‰§è¡Œè®¡åˆ’å°†ä¸å†ä¿ç•™å¯¹æ‰¹æ¬¡çš„ä»»ä½•
å¼•ç”¨ã€‚æ¶ˆè´¹å‡½æ•°å¯èƒ½åœ¨ä¸Šä¸€æ¬¡è°ƒç”¨å®Œæˆä¹‹å‰è¢«è°ƒç”¨ã€‚å¦‚æœ  æ¶ˆè´¹å‡½æ•°è¿è¡Œä¸å¤Ÿå¿«ï¼Œé‚£ä¹ˆè®¸å¤šå¹¶å‘æ‰§è¡Œå¯èƒ½ä¼šå †ç§¯èµ·æ¥ï¼Œä»è€Œé˜»å¡ CPU
çº¿ç¨‹æ± ã€‚åœ¨æ‰€æœ‰æ¶ˆè´¹å‡½æ•°å›è°ƒå®Œæˆä¹‹å‰ï¼Œæ‰§è¡Œè®¡åˆ’ä¸ä¼šè¢«æ ‡è®°ä¸ºå®Œæˆã€‚ä¸€æ—¦æ‰€æœ‰æ‰¹æ¬¡éƒ½å·²äº¤ä»˜ï¼Œæ‰§è¡Œè®¡åˆ’å°†ç­‰å¾… <code>finish</code> æœªæ¥å®Œæˆï¼Œç„¶å
å†å°†æ‰§è¡Œè®¡åˆ’æ ‡è®°ä¸ºå®Œæˆã€‚è¿™å…è®¸å·¥ä½œæµï¼Œå…¶ä¸­æ¶ˆè´¹å‡½æ•°å°†æ‰¹æ¬¡è½¬æ¢ä¸ºå¼‚æ­¥ä»»åŠ¡ï¼ˆè¿™ç›®å‰åœ¨æ•°æ®é›†å†™å…¥èŠ‚ç‚¹å†…éƒ¨å®Œæˆï¼‰ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#6B6B6B;font-style:italic">// define a Custom SinkNodeConsumer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">atomic</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token keyword" style="color:#CF222E">uint32_t</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> batches_seen</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#005CC5">0</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Future</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> finish </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">Future</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">Make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">struct</span><span class="token plain"> </span><span class="token class-name" style="color:#116329">CustomSinkNodeConsumer</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token base-clause keyword" style="color:#CF222E">public</span><span class="token base-clause"> cp</span><span class="token base-clause double-colon punctuation" style="color:#393A34">::</span><span class="token base-clause class-name" style="color:#116329">SinkNodeConsumer</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#8250DF">CustomSinkNodeConsumer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">atomic</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token keyword" style="color:#CF222E">uint32_t</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">*</span><span class="token plain">batches_seen</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Future</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain">finish</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#8250DF">batches_seen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">batches_seen</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">finish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">finish</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// Consumption logic can be written here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">Consume</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecBatch batch</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">override</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// data can be consumed in the expected way</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// transfer to another system or just do some work</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// and write to disk</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#D73A49">*</span><span class="token plain">batches_seen</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#D73A49">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">Status</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Future</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">Finish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">override</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> finish</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">atomic</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token keyword" style="color:#CF222E">uint32_t</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">*</span><span class="token plain">batches_seen</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Future</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> finish</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">CustomSinkNodeConsumer</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> consumer </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function function" style="color:#8250DF">make_shared</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">CustomSinkNodeConsumer</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain">batches_seen</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> finish</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">acero</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecNode </span><span class="token operator" style="color:#D73A49">*</span><span class="token plain">consuming_sink</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">consuming_sink</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">MakeExecNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;consuming_sink&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> plan</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">source</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">ConsumingSinkNodeOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">consumer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Consuming-Sink ç¤ºä¾‹:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing a consuming sink node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Source-Consuming-Sink</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how the data can be consumed within the execution plan</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// by using a ConsumingSink node. There is no data output from this execution plan.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">SourceConsumingSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">MakeBasicBatches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> source_node_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">gen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration source</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">source_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">atomic</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token keyword" style="color:#CF222E">uint32_t</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> batches_seen</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#005CC5">0</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Future</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> finish </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">Future</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">Make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">struct</span><span class="token plain"> </span><span class="token class-name" style="color:#116329">CustomSinkNodeConsumer</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token base-clause keyword" style="color:#CF222E">public</span><span class="token base-clause"> ac</span><span class="token base-clause double-colon punctuation" style="color:#393A34">::</span><span class="token base-clause class-name" style="color:#116329">SinkNodeConsumer</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#8250DF">CustomSinkNodeConsumer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">atomic</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token keyword" style="color:#CF222E">uint32_t</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token operator" style="color:#D73A49">*</span><span class="token plain"> batches_seen</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Future</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> finish</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">batches_seen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">batches_seen</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">finish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">finish</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">Init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">const</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Schema</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain"> schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">BackpressureControl</span><span class="token operator" style="color:#D73A49">*</span><span class="token plain"> backpressure_control</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecPlan</span><span class="token operator" style="color:#D73A49">*</span><span class="token plain"> plan</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">override</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// This will be called as the plan is started (before the first call to Consume)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// and provides the schema of the data coming into the node, controls for pausing /</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// resuming input, and a pointer to the plan itself which can be used to access</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// other utilities such as the thread indexer or async task scheduler.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">Status</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">Consume</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecBatch batch</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">override</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#D73A49">*</span><span class="token plain">batches_seen</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#D73A49">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">Status</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Future</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">Finish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">override</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// Here you can perform whatever (possibly async) cleanup is needed, e.g. closing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// output file handles and flushing remaining work</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">Future</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">MakeFinished</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">atomic</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token keyword" style="color:#CF222E">uint32_t</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token operator" style="color:#D73A49">*</span><span class="token plain"> batches_seen</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Future</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> finish</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">CustomSinkNodeConsumer</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> consumer </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function function" style="color:#8250DF">make_shared</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">CustomSinkNodeConsumer</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain">batches_seen</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> finish</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration consuming_sink</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;consuming_sink&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">source</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">ConsumingSinkNodeOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">consumer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// Since we are consuming the data within the plan there is no output and we simply</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// run the plan to completion instead of collecting into a table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_RETURN_NOT_OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">DeclarationToStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">consuming_sink</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;The consuming sink node saw &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> batches_seen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot; batches&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">Status</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="order_by_sink"><code>order_by_sink</code><a href="#order_by_sink" class="hash-link" aria-label="Direct link to order_by_sink" title="Direct link to order_by_sink">â€‹</a></h3>
<p><code>order_by_sink</code> æ“ä½œæ˜¯ <code>sink</code> æ“ä½œçš„æ‰©å±•ã€‚æ­¤æ“ä½œé€šè¿‡æä¾› <code>OrderBySinkNodeOptions</code> æ¥ä¿è¯æµçš„æ’åºã€‚
è¿™é‡Œæä¾›äº† <code>alkaid::compute::SortOptions</code> æ¥å®šä¹‰å“ªäº›åˆ—ç”¨äºæ’åºä»¥åŠæ˜¯å¦æŒ‰å‡åºæˆ–é™åºå€¼æ’åºã€‚</p>
<div></div>
<p>æ­¤èŠ‚ç‚¹æ˜¯ä¸€ä¸ªâ€œç®¡é“æ–­è·¯å™¨â€ï¼Œå®ƒå°†åœ¨å†…å­˜ä¸­å®Œå…¨å®ç°æ•°æ®é›†ã€‚å°†æ¥ï¼Œå°†æ·»åŠ æº¢å‡ºæœºåˆ¶ï¼Œä»¥ç¼“è§£è¿™ä¸€é™åˆ¶ã€‚
:::</p>
<p>Order-By-Sink ç¤ºä¾‹:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTableWithCustomSink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecPlan</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> plan</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Schema</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AsyncGenerator</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">optional</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecBatch</span><span class="token operator" style="color:#D73A49">&gt;&gt;</span><span class="token plain"> sink_gen</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// translate sink_gen (async) to sink_reader (sync)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">RecordBatchReader</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> sink_reader </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">MakeGeneratorReader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sink_gen</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">default_memory_pool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// validate the ExecPlan</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_RETURN_NOT_OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">plan</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">Validate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;ExecPlan created : &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> plan</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">ToString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// start the ExecPlan</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  plan</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">StartProducing</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// collect sink_reader into a Table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Table</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> response_table</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">response_table</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">Table</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">FromRecordBatchReader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sink_reader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;Results : &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> response_table</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">ToString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// stop producing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  plan</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">StopProducing</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// plan mark finished</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> future </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> plan</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">finished</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> future</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing an order-by node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Source-OrderBy-Sink</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// In this example, the data enters through the source node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// and the data is ordered in the sink node. The order can be</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// ASCENDING or DESCENDING and it is configurable. The output</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// is obtained as a table from the sink node.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">SourceOrderBySinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecPlan</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> plan</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">ExecPlan</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">Make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#D73A49">*</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">threaded_exec_context</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">MakeSortTestBasicBatches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AsyncGenerator</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">optional</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecBatch</span><span class="token operator" style="color:#D73A49">&gt;&gt;</span><span class="token plain"> sink_gen</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> source_node_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">gen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecNode </span><span class="token operator" style="color:#D73A49">*</span><span class="token plain"> source</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">MakeExecNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> plan</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> source_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_RETURN_NOT_OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">MakeExecNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#C6105F">&quot;order_by_sink&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> plan</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">source</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">OrderBySinkNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SortOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SortKey</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;a&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SortOrder</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Descending</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain">sink_gen</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTableWithCustomSink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">plan</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sink_gen</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="select_k_sink"><code>select_k_sink</code><a href="#select_k_sink" class="hash-link" aria-label="Direct link to select_k_sink" title="Direct link to select_k_sink">â€‹</a></h3>
<p><code>select_k_sink</code> é€‰é¡¹å…è®¸é€‰æ‹©é¡¶éƒ¨/åº•éƒ¨ K ä¸ªå…ƒç´ ï¼Œ</p>
<p>ç±»ä¼¼äº SQL <code>ORDER BY ... LIMIT K</code> å­å¥ã€‚<code>SelectKOptions</code></p>
<p>æ˜¯ä½¿ç”¨ <code>OrderBySinkNode</code> å®šä¹‰å®šä¹‰çš„ã€‚æ­¤é€‰é¡¹è¿”å›</p>
<p>ä¸€ä¸ªæ¥æ”¶è¾“å…¥ç„¶åè®¡ç®— top_k/bottom_k çš„æ¥æ”¶å™¨èŠ‚ç‚¹ã€‚</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>æ­¤èŠ‚ç‚¹æ˜¯ä¸€ä¸ªâ€œç®¡é“æ–­è·¯å™¨â€ï¼Œå°†åœ¨å†…å­˜ä¸­å®Œå…¨å®ç°è¾“å…¥ã€‚å°†æ¥ï¼Œå°†æ·»åŠ æº¢å‡ºæœºåˆ¶ï¼Œè¿™åº”è¯¥å¯ä»¥ç¼“è§£è¿™ä¸€é™åˆ¶ã€‚</p></div></div>
<p>SelectK ç¤ºä¾‹ï¼š</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing a select-k node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Source-KSelect</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how K number of elements can be selected</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// either from the top or bottom. The output node is a modified</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// sink node where output can be obtained as a table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">SourceKSelectExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> input</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">MakeGroupableBatches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecPlan</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> plan</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">ExecPlan</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">Make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#D73A49">*</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">threaded_exec_context</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AsyncGenerator</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">optional</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecBatch</span><span class="token operator" style="color:#D73A49">&gt;&gt;</span><span class="token plain"> sink_gen</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecNode </span><span class="token operator" style="color:#D73A49">*</span><span class="token plain"> source</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">MakeExecNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> plan</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">gen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SelectKOptions options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">SelectKOptions</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">TopKDefault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token comment" style="color:#6B6B6B;font-style:italic">/*k=*/</span><span class="token number" style="color:#005CC5">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;i32&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_RETURN_NOT_OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">MakeExecNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;select_k_sink&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> plan</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">source</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                       ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SelectKSinkNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain">sink_gen</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> schema </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">schema</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;i32&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">int32</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;str&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">utf8</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTableWithCustomSink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">plan</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sink_gen</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="table_sink"><code>table_sink</code><a href="#table_sink" class="hash-link" aria-label="Direct link to table_sink" title="Direct link to table_sink">â€‹</a></h3>
<p><code>table_sink</code> èŠ‚ç‚¹æä¾›äº†å°†è¾“å‡ºä½œä¸ºå†…å­˜è¡¨æ¥æ”¶çš„åŠŸèƒ½ã€‚è¿™æ¯”æµæ‰§è¡Œå¼•æ“æä¾›çš„å…¶ä»–æ¥æ”¶å™¨èŠ‚ç‚¹æ›´æ˜“äºä½¿ç”¨ï¼Œä½†åªæœ‰å½“è¾“å‡º
é€‚åˆå†…å­˜æ—¶æ‰æœ‰æ„ä¹‰ã€‚è¯¥èŠ‚ç‚¹æ˜¯ä½¿ç”¨<code>TableSinkNodeOptions</code>åˆ›å»ºçš„ã€‚</p>
<p>ä½¿ç”¨ <code>table_sink</code> çš„ç¤ºä¾‹</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing a table sink node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// TableSink Example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how a table_sink can be used</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// in an execution plan. This includes a source node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// receiving data as batches and the table sink node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// which emits the output as a table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">TableSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecPlan</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> plan</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">ExecPlan</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">Make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#D73A49">*</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">threaded_exec_context</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">MakeBasicBatches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> source_node_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">gen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecNode </span><span class="token operator" style="color:#D73A49">*</span><span class="token plain"> source</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">MakeExecNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> plan</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> source_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Table</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> output_table</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> table_sink_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">TableSinkNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain">output_table</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_RETURN_NOT_OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">MakeExecNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;table_sink&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> plan</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">source</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> table_sink_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// validate the ExecPlan</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_RETURN_NOT_OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">plan</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">Validate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;ExecPlan created : &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> plan</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">ToString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// start the ExecPlan</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  plan</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">StartProducing</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// Wait for the plan to finish</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> finished </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> plan</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">finished</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">RETURN_NOT_OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">finished</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;Results : &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> output_table</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">ToString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">Status</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="scan"><code>scan</code><a href="#scan" class="hash-link" aria-label="Direct link to scan" title="Direct link to scan">â€‹</a></h3>
<p><code>scan</code> æ˜¯ç”¨äºåŠ è½½å’Œå¤„ç†æ•°æ®é›†çš„æ“ä½œã€‚å½“æ‚¨çš„è¾“å…¥æ˜¯æ•°æ®é›†æ—¶ï¼Œå®ƒåº”è¯¥ä¼˜äºæ›´é€šç”¨çš„ <code>source</code> èŠ‚ç‚¹ã€‚è¯¥è¡Œä¸º
ä½¿ç”¨ <code>alkaid::dataset::ScanNodeOptions</code> å®šä¹‰ã€‚æœ‰å…³æ•°æ®é›†å’Œå„ç§æ‰«æé€‰é¡¹çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… <code>../dataset</code>ã€‚</p>
<p>æ­¤èŠ‚ç‚¹èƒ½å¤Ÿå°†ä¸‹æ¨è¿‡æ»¤å™¨åº”ç”¨äºæ–‡ä»¶è¯»å–å™¨ï¼Œä»è€Œå‡å°‘éœ€è¦è¯»å–çš„æ•°æ®é‡ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥å‘æ‰«æèŠ‚ç‚¹æä¾›ä¸ FilterNode ç›¸åŒçš„è¿‡æ»¤å™¨è¡¨è¾¾å¼ï¼Œå› ä¸ºè¿‡æ»¤æ˜¯åœ¨ä¸¤ä¸ªä¸åŒçš„åœ°æ–¹å®Œæˆçš„ã€‚</p>
<p>æ‰«æç¤ºä¾‹ï¼š</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example demonstrating a scan and sink node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Scan-Table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how scan operation can be applied on a dataset.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// There are operations that can be applied on the scan (project, filter)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// and the input data can be processed. The output is obtained as a table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">ScanSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Dataset</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetDataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function function" style="color:#8250DF">make_shared</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">dataset</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">ScanOptions</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token plain">projection </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">project</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// create empty projection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// construct the scan node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> scan_node_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ScanNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration scan</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;scan&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scan_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scan</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="write"><code>write</code><a href="#write" class="hash-link" aria-label="Direct link to write" title="Direct link to write">â€‹</a></h3>
<p><code>write</code> èŠ‚ç‚¹ä½¿ç”¨ Alkaid ä¸­çš„ <code>../dataset</code> åŠŸèƒ½å°†æŸ¥è¯¢ç»“æœä¿å­˜ä¸º Parquetã€Featherã€CSV ç­‰æ ¼å¼çš„æ–‡ä»¶æ•°æ®é›†ã€‚å†™å…¥é€‰é¡¹é€š
è¿‡ <code>alkaid::dataset::WriteNodeOptions</code> æä¾›ï¼Œè€Œ <code>alkaid::dataset::FileSystemDatasetWriteOptions</code> åˆåŒ…
å« <code>alkaid::dataset::FileSystemDatasetWriteOptions</code>ã€‚<code>alkaid::dataset::FileSystemDatasetWriteOptions</code> æ
ä¾›å¯¹å†™å…¥æ•°æ®é›†çš„æ§åˆ¶ï¼ŒåŒ…æ‹¬è¾“å‡ºç›®å½•ã€æ–‡ä»¶å‘½åæ–¹æ¡ˆç­‰é€‰é¡¹ã€‚</p>
<p>å†™å…¥ç¤ºä¾‹ï¼š</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing a write node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \param file_path The destination to write to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Scan-Filter-Write</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how scan node can be used to load the data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// and after processing how it can be written to disk.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">ScanFilterWriteExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">const</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">string</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain"> file_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Dataset</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetDataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function function" style="color:#8250DF">make_shared</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">dataset</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">ScanOptions</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// empty projection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token plain">projection </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">project</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> scan_node_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ScanNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration scan</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;scan&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scan_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AsyncGenerator</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">optional</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecBatch</span><span class="token operator" style="color:#D73A49">&gt;&gt;</span><span class="token plain"> sink_gen</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">string root_path </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">string uri </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;file://&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">+</span><span class="token plain"> file_path</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">fs</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">FileSystem</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> filesystem</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">fs</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">FileSystemFromUri</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uri</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain">root_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> base_path </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> root_path </span><span class="token operator" style="color:#D73A49">+</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;/parquet_dataset&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// Uncomment the following line, if run repeatedly</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// TURBO_RETURN_NOT_OK(filesystem-&gt;DeleteDirContents(base_path));</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_RETURN_NOT_OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">filesystem</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">CreateDir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">base_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// The partition schema determines which fields are part of the partitioning.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> partition_schema </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">schema</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;a&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">int32</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// We&#x27;ll use Hive-style partitioning,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// which creates directories with &quot;key=value&quot; pairs.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> partitioning </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function function" style="color:#8250DF">make_shared</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">dataset</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">HivePartitioning</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">partition_schema</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// We&#x27;ll write Parquet files.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> format </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function function" style="color:#8250DF">make_shared</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">dataset</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">ParquetFileFormat</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">FileSystemDatasetWriteOptions write_options</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  write_options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">file_write_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> format</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">DefaultWriteOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  write_options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">filesystem </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> filesystem</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  write_options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">base_dir </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> base_path</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  write_options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">partitioning </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> partitioning</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  write_options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">basename_template </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;part{i}.parquet&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">WriteNodeOptions write_node_options</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">write_options</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration write</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;write&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scan</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">write_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// Since the write node has no output we simply run the plan to completion and the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// data should be written</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_RETURN_NOT_OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">DeclarationToStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;Dataset written to &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> base_path </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">Status</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="union"><code>union</code><a href="#union" class="hash-link" aria-label="Direct link to union" title="Direct link to union">â€‹</a></h3>
<p><code>union</code> å°†å…·æœ‰ç›¸åŒæ¶æ„çš„å¤šä¸ªæ•°æ®æµåˆå¹¶ä¸ºä¸€ä¸ªï¼Œ
ç±»ä¼¼äº SQL <code>UNION ALL</code> å­å¥ã€‚</p>
<p>ä»¥ä¸‹ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ä¸¤ä¸ªæ•°æ®æºå®ç°è¿™ä¸€ç‚¹ã€‚</p>
<p>è”åˆç¤ºä¾‹ï¼š</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing a union node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Source-Union-Table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how a union operation can be applied on two</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// data sources. The output is collected into a table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">SourceUnionSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">MakeBasicBatches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration lhs</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">gen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  lhs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">label </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;lhs&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration rhs</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">gen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rhs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">label </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;rhs&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration union_plan</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#C6105F">&quot;union&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">lhs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rhs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">union_plan</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="hash_join"><code>hash_join</code><a href="#hash_join" class="hash-link" aria-label="Direct link to hash_join" title="Direct link to hash_join">â€‹</a></h3>
<p><code>hash_join</code> æ“ä½œæä¾›å…³ç³»ä»£æ•°æ“ä½œï¼Œä½¿ç”¨åŸºäºå“ˆå¸Œçš„ç®—æ³•è¿›è¡Œè¿æ¥ã€‚<code>HashJoinNodeOptions</code> åŒ…å«å®šä¹‰è¿æ¥æ‰€éœ€çš„é€‰é¡¹ã€‚
hash_join æ”¯æŒ <a href="https://en.wikipedia.org/wiki/Join_(SQL)" target="_blank" rel="noopener noreferrer">å·¦/å³/å…¨åŠ/å/å¤–è¿æ¥</a>ã€‚æ­¤å¤–ï¼Œå¯ä»¥é€šè¿‡è¿æ¥é€‰é¡¹è®¾
ç½®è¿æ¥é”®ï¼ˆå³è¦è¿æ¥çš„åˆ—ï¼‰å’Œåç¼€ï¼ˆå³åç¼€æœ¯è¯­ï¼Œå¦‚â€œ_xâ€ï¼Œå¯ä»¥ä½œä¸ºåœ¨å·¦å…³ç³»å’Œå³å…³ç³»ä¸­é‡å¤çš„åˆ—åçš„åç¼€é™„åŠ ï¼‰ã€‚
<a href="https://en.wikipedia.org/wiki/Hash_join" target="_blank" rel="noopener noreferrer">é˜…è¯»æ›´å¤šå…³äº hash-joins</a>ã€‚</p>
<p>Hash-Join ç¤ºä¾‹ï¼š</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing a hash join node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Source-HashJoin-Table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how source node gets the data and how a self-join</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// is applied on the data. The join options are configurable. The output</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// is collected into a table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">SourceHashJoinSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> input</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">MakeGroupableBatches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration left</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">gen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration right</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">gen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">HashJoinNodeOptions join_opts</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">JoinType</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">INNER</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#6B6B6B;font-style:italic">/*left_keys=*/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;str&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#6B6B6B;font-style:italic">/*right_keys=*/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;str&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">literal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#005CC5">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;l_&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;r_&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration hashjoin</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#C6105F">&quot;hashjoin&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">left</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">right</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">join_opts</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hashjoin</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">â€‹</a></h2>
<p>è¿™äº›èŠ‚ç‚¹çš„ç¤ºä¾‹å¯ä»¥åœ¨ Alkaid æºä¸­çš„
<code>cpp/examples/alkaid/execution_plan_documentation_examples.cc</code> ä¸­æ‰¾åˆ°ã€‚</p>
<p>å®Œæ•´ç¤ºä¾‹ï¼š</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;alkaid/array.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;alkaid/builder.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;alkaid/acero/exec_plan.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;alkaid/compute/api.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;alkaid/compute/api_vector.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;alkaid/compute/cast.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;alkaid/csv/api.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;alkaid/dataset/dataset.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;alkaid/dataset/file_base.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;alkaid/dataset/file_parquet.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;alkaid/dataset/plan.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;alkaid/dataset/scanner.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;alkaid/io/interfaces.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;alkaid/io/memory.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;alkaid/result.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;alkaid/status.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;alkaid/table.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;alkaid/ipc/api.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;alkaid/util/future.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;alkaid/util/range.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;alkaid/util/thread_pool.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;alkaid/util/vector.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;iostream&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;memory&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;utility&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// Demonstrate various operators in Alkaid Streaming Execution Engine</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">namespace</span><span class="token plain"> cp </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">compute</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">namespace</span><span class="token plain"> ac </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">acero</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">constexpr</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">char</span><span class="token plain"> kSep</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;******&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">void</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">PrintBlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">const</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">string</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain"> msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;\n\t&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> kSep </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot; &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> msg </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot; &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> kSep </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;\n&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">template</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token keyword" style="color:#CF222E">typename</span><span class="token plain"> </span><span class="token class-name" style="color:#116329">TYPE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#CF222E">typename</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">typename</span><span class="token plain"> </span><span class="token class-name" style="color:#116329">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">enable_if</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">is_number_type</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">TYPE</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">value </span><span class="token operator" style="color:#D73A49">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                             alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">is_boolean_type</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">TYPE</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">value </span><span class="token operator" style="color:#D73A49">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                             alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">is_temporal_type</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">TYPE</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">value</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">type</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Result</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Array</span><span class="token operator" style="color:#D73A49">&gt;&gt;</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetArrayDataSample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">const</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">vector</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token keyword" style="color:#CF222E">typename</span><span class="token plain"> </span><span class="token class-name" style="color:#116329">TYPE</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">c_type</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain"> values</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">using</span><span class="token plain"> AlkaidBuilderType </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">typename</span><span class="token plain"> </span><span class="token class-name" style="color:#116329">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">TypeTraits</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">TYPE</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">BuilderType</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  AlkaidBuilderType builder</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_RETURN_NOT_OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">Reserve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">values</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_RETURN_NOT_OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">AppendValues</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">values</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">Finish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">template</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token keyword" style="color:#CF222E">class</span><span class="token plain"> </span><span class="token class-name" style="color:#116329">TYPE</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Result</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Array</span><span class="token operator" style="color:#D73A49">&gt;&gt;</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetBinaryArrayDataSample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">const</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">vector</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">string</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain"> values</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">using</span><span class="token plain"> AlkaidBuilderType </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">typename</span><span class="token plain"> </span><span class="token class-name" style="color:#116329">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">TypeTraits</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">TYPE</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">BuilderType</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  AlkaidBuilderType builder</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_RETURN_NOT_OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">Reserve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">values</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_RETURN_NOT_OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">AppendValues</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">values</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">Finish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Result</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">RecordBatch</span><span class="token operator" style="color:#D73A49">&gt;&gt;</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetSampleRecordBatch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">const</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ArrayVector array_vector</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">const</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">FieldVector</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain"> field_vector</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">RecordBatch</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> record_batch</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> struct_result</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">StructArray</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">Make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">array_vector</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> field_vector</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> record_batch</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">FromStructArray</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">struct_result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief Create a sample table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// The table&#x27;s contents will be:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// a,b</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// 1,null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// 2,true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// null,true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// 3,false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// null,true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// 4,false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// 5,null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// 6,false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// 7,false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// 8,true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \return The created table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Result</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Table</span><span class="token operator" style="color:#D73A49">&gt;&gt;</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> null_long </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">numeric_limits</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token keyword" style="color:#CF222E">int64_t</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">quiet_NaN</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> int64_array</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token generic-function function" style="color:#8250DF">GetArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">Int64Type</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#005CC5">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> null_long</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> null_long</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">6</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">7</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">8</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">BooleanBuilder boolean_builder</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">BooleanArray</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> bool_array</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">vector</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token keyword" style="color:#CF222E">uint8_t</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> bool_values </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token boolean" style="color:#005CC5">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token boolean" style="color:#005CC5">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token boolean" style="color:#005CC5">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      </span><span class="token boolean" style="color:#005CC5">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">true</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">vector</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token keyword" style="color:#CF222E">bool</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> is_valid </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token boolean" style="color:#005CC5">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token boolean" style="color:#005CC5">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token boolean" style="color:#005CC5">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token boolean" style="color:#005CC5">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">true</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_RETURN_NOT_OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">boolean_builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">Reserve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#005CC5">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_RETURN_NOT_OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">boolean_builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">AppendValues</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bool_values</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> is_valid</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_RETURN_NOT_OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">boolean_builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">Finish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain">bool_array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> record_batch </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">RecordBatch</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">Make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">schema</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;a&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">int64</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                              alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;b&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">boolean</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               </span><span class="token number" style="color:#005CC5">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">int64_array</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> bool_array</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">Table</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">FromRecordBatches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">record_batch</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief Create a sample dataset</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \return An in-memory dataset based on GetTable()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Result</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Dataset</span><span class="token operator" style="color:#D73A49">&gt;&gt;</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetDataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> ds </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function function" style="color:#8250DF">make_shared</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">dataset</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">InMemoryDataset</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> ds</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Result</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecBatch</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetExecBatchFromVectors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">const</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">FieldVector</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain"> field_vector</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">const</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ArrayVector</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain"> array_vector</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">RecordBatch</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> record_batch</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> res_batch</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetSampleRecordBatch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">array_vector</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> field_vector</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecBatch batch</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#D73A49">*</span><span class="token plain">res_batch</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> batch</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: BatchesWithSchema Definition)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">struct</span><span class="token plain"> </span><span class="token class-name" style="color:#116329">BatchesWithSchema</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">vector</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecBatch</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> batches</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Schema</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> schema</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// This method uses internal alkaid utilities to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// convert a vector of record batches to an AsyncGenerator of optional batches</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AsyncGenerator</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">optional</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecBatch</span><span class="token operator" style="color:#D73A49">&gt;&gt;</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">gen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> opt_batches </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">internal</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">MapVector</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecBatch batch</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">make_optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">batch</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        batches</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AsyncGenerator</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">optional</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecBatch</span><span class="token operator" style="color:#D73A49">&gt;&gt;</span><span class="token plain"> gen</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    gen </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">MakeVectorGenerator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">opt_batches</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> gen</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: BatchesWithSchema Definition)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: MakeBasicBatches Definition)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Result</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">BatchesWithSchema</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">MakeBasicBatches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  BatchesWithSchema out</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> field_vector </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;a&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">int32</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;b&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">boolean</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b1_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token generic-function function" style="color:#8250DF">GetArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">Int32Type</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#005CC5">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">4</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b2_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token generic-function function" style="color:#8250DF">GetArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">Int32Type</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#005CC5">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">6</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">7</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b3_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token generic-function function" style="color:#8250DF">GetArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">Int32Type</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#005CC5">8</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">9</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">10</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b1_bool</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token generic-function function" style="color:#8250DF">GetArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">BooleanType</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token boolean" style="color:#005CC5">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">true</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b2_bool</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token generic-function function" style="color:#8250DF">GetArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">BooleanType</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token boolean" style="color:#005CC5">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">true</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b3_bool</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token generic-function function" style="color:#8250DF">GetArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">BooleanType</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token boolean" style="color:#005CC5">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#005CC5">false</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token function" style="color:#8250DF">GetExecBatchFromVectors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">field_vector</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">b1_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b1_bool</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token function" style="color:#8250DF">GetExecBatchFromVectors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">field_vector</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">b2_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b2_bool</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token function" style="color:#8250DF">GetExecBatchFromVectors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">field_vector</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">b3_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b3_bool</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">batches </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">b1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b3</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">schema</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">field_vector</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> out</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: MakeBasicBatches Definition)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Result</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">BatchesWithSchema</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">MakeSortTestBasicBatches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  BatchesWithSchema out</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> field </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;a&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">int32</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b1_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token generic-function function" style="color:#8250DF">GetArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">Int32Type</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#005CC5">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">2</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b2_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token generic-function function" style="color:#8250DF">GetArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">Int32Type</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#005CC5">121</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">101</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">120</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">12</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b3_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token generic-function function" style="color:#8250DF">GetArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">Int32Type</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#005CC5">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">110</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">210</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">121</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b4_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token generic-function function" style="color:#8250DF">GetArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">Int32Type</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#005CC5">51</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">101</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">34</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b5_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token generic-function function" style="color:#8250DF">GetArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">Int32Type</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#005CC5">11</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">31</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">12</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b6_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token generic-function function" style="color:#8250DF">GetArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">Int32Type</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#005CC5">12</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">101</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">120</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">12</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b7_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token generic-function function" style="color:#8250DF">GetArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">Int32Type</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#005CC5">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">110</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">210</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">11</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b8_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token generic-function function" style="color:#8250DF">GetArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">Int32Type</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#005CC5">51</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">3</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetExecBatchFromVectors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">field</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">b1_int</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetExecBatchFromVectors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">field</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">b2_int</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token function" style="color:#8250DF">GetExecBatchFromVectors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">field</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> field</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">b3_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b8_int</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token function" style="color:#8250DF">GetExecBatchFromVectors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">field</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> field</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> field</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> field</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">b4_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b5_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b6_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b7_int</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">batches </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">b1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b4</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">schema</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">field</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> out</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Result</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">BatchesWithSchema</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">MakeGroupableBatches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">int</span><span class="token plain"> multiplicity </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  BatchesWithSchema out</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> fields </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;i32&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">int32</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;str&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">utf8</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b1_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token generic-function function" style="color:#8250DF">GetArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">Int32Type</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#005CC5">12</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">7</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">3</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b2_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token generic-function function" style="color:#8250DF">GetArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">Int32Type</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#D73A49">-</span><span class="token number" style="color:#005CC5">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">-</span><span class="token number" style="color:#005CC5">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">3</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b3_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token generic-function function" style="color:#8250DF">GetArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">Int32Type</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#005CC5">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">-</span><span class="token number" style="color:#005CC5">8</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b1_str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token generic-function function" style="color:#8250DF">GetBinaryArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">StringType</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                         </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;alpha&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;beta&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;alpha&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b2_str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token generic-function function" style="color:#8250DF">GetBinaryArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">StringType</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                         </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;alpha&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;gamma&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;alpha&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b3_str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token generic-function function" style="color:#8250DF">GetBinaryArrayDataSample</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">StringType</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                         </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;gamma&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;beta&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;alpha&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetExecBatchFromVectors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fields</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">b1_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b1_str</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetExecBatchFromVectors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fields</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">b2_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b2_str</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetExecBatchFromVectors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fields</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">b3_int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b3_str</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">batches </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">b1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b3</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  size_t batch_count </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">batches</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">int</span><span class="token plain"> repeat </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> repeat </span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain"> multiplicity</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">++</span><span class="token plain">repeat</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">size_t i </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain"> batch_count</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">++</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">batches</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">push_back</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">batches</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">schema</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fields</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> out</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration plan</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// collect sink_reader into a Table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Table</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> response_table</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">response_table</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">DeclarationToTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">plan</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;Results : &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> response_table</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">ToString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">Status</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: Scan Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example demonstrating a scan and sink node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Scan-Table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how scan operation can be applied on a dataset.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// There are operations that can be applied on the scan (project, filter)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// and the input data can be processed. The output is obtained as a table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">ScanSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Dataset</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetDataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function function" style="color:#8250DF">make_shared</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">dataset</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">ScanOptions</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token plain">projection </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">project</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// create empty projection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// construct the scan node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> scan_node_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ScanNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration scan</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;scan&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scan_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scan</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: Scan Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: Source Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example demonstrating a source and sink node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Source-Table Example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how a custom source can be used</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// in an execution plan. This includes source node using pregenerated</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// data and collecting it into a table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This sort of custom source is often not needed.  In most cases you can</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// use a scan (for a dataset source) or a source like table_source, array_vector_source,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// exec_batch_source, or record_batch_source (for in-memory data)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">SourceSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">MakeBasicBatches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> source_node_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">gen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration source</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">source_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">source</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: Source Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: Table Source Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing a table source node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// TableSource-Table Example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how a table_source can be used</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// in an execution plan. This includes a table source node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// receiving data from a table.  This plan simply collects the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// data back into a table but nodes could be added that modify</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// or transform the data as well (as is shown in later examples)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">TableSourceSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AsyncGenerator</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">optional</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecBatch</span><span class="token operator" style="color:#D73A49">&gt;&gt;</span><span class="token plain"> sink_gen</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">int</span><span class="token plain"> max_batch_size </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> table_source_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">TableSourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> max_batch_size</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration source</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;table_source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">table_source_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">source</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: Table Source Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: Filter Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing a filter node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Source-Filter-Table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how a filter can be used in an execution plan,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// to filter data from a source. The output from the execution plan</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// is collected into a table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">ScanFilterSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Dataset</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetDataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function function" style="color:#8250DF">make_shared</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">dataset</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">ScanOptions</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// specify the filter.  This filter removes all rows where the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// value of the &quot;a&quot; column is greater than 3.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Expression filter_expr </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">greater</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">field_ref</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;a&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">literal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#005CC5">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// set filter for scanner : on-disk / push-down filtering.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// This step can be skipped if you are not reading from disk.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token plain">filter </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> filter_expr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// empty projection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token plain">projection </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">project</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// construct the scan node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;Initialized Scanning Options&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> scan_node_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ScanNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;Scan node options created&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration scan</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;scan&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scan_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// pipe the scan node into the filter node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// Need to set the filter in scan node options and filter node options.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// At scan node it is used for on-disk / push-down filtering.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// At filter node it is used for in-memory filtering.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration filter</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#C6105F">&quot;filter&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scan</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">FilterNodeOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">filter_expr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">filter</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: Filter Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: Project Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing a project node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Scan-Project-Table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how a Scan operation can be used to load the data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// into the execution plan, how a project operation can be applied on the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// data stream and how the output is collected into a table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">ScanProjectSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Dataset</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetDataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function function" style="color:#8250DF">make_shared</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">dataset</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">ScanOptions</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// projection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Expression a_times_2 </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">call</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;multiply&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">field_ref</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;a&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">literal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#005CC5">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token plain">projection </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">project</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> scan_node_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ScanNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration scan</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;scan&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scan_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration project</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#C6105F">&quot;project&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scan</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">ProjectNodeOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">a_times_2</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">project</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: Project Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// This is a variation of ScanProjectSinkExample introducing how to use the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// Declaration::Sequence function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">ScanProjectSequenceSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Dataset</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetDataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function function" style="color:#8250DF">make_shared</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">dataset</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">ScanOptions</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// projection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Expression a_times_2 </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">call</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;multiply&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">field_ref</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;a&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">literal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#005CC5">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token plain">projection </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">project</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> scan_node_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ScanNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: Project Sequence Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// Inputs do not have to be passed to the project node when using Sequence</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration plan </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">Declaration</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">Sequence</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;scan&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scan_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;project&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">ProjectNodeOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">a_times_2</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: Project Sequence Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">plan</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: Scalar Aggregate Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing an aggregation node to aggregate an entire table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Source-Aggregation-Table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how an aggregation operation can be applied on a</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// execution plan resulting in a scalar output. The source node loads the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// data and the aggregation (counting unique types in column &#x27;a&#x27;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// is applied on this data. The output is collected into a table (that will</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// have exactly one row)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">SourceScalarAggregateSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">MakeBasicBatches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> source_node_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">gen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration source</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">source_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> aggregate_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AggregateNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#6B6B6B;font-style:italic">/*aggregates=*/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;sum&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">nullptr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;a&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;sum(a)&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration aggregate</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#C6105F">&quot;aggregate&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">source</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aggregate_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aggregate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: Scalar Aggregate Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: Group Aggregate Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing an aggregation node to perform a group-by operation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Source-Aggregation-Table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how an aggregation operation can be applied on a</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// execution plan resulting in grouped output. The source node loads the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// data and the aggregation (counting unique types in column &#x27;a&#x27;) is</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// applied on this data. The output is collected into a table that will contain</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// one row for each unique combination of group keys.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">SourceGroupAggregateSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">MakeBasicBatches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AsyncGenerator</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">optional</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecBatch</span><span class="token operator" style="color:#D73A49">&gt;&gt;</span><span class="token plain"> sink_gen</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> source_node_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">gen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration source</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">source_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function function" style="color:#8250DF">make_shared</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">cp</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">CountOptions</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">CountOptions</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ONLY_VALID</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> aggregate_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AggregateNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#6B6B6B;font-style:italic">/*aggregates=*/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;hash_count&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;a&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;count(a)&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               </span><span class="token comment" style="color:#6B6B6B;font-style:italic">/*keys=*/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;b&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration aggregate</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#C6105F">&quot;aggregate&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">source</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aggregate_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">aggregate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: Group Aggregate Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: ConsumingSink Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing a consuming sink node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Source-Consuming-Sink</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how the data can be consumed within the execution plan</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// by using a ConsumingSink node. There is no data output from this execution plan.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">SourceConsumingSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">MakeBasicBatches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> source_node_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">gen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration source</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">source_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">atomic</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token keyword" style="color:#CF222E">uint32_t</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> batches_seen</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#005CC5">0</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Future</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> finish </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">Future</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">Make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">struct</span><span class="token plain"> </span><span class="token class-name" style="color:#116329">CustomSinkNodeConsumer</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token base-clause keyword" style="color:#CF222E">public</span><span class="token base-clause"> ac</span><span class="token base-clause double-colon punctuation" style="color:#393A34">::</span><span class="token base-clause class-name" style="color:#116329">SinkNodeConsumer</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#8250DF">CustomSinkNodeConsumer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">atomic</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token keyword" style="color:#CF222E">uint32_t</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token operator" style="color:#D73A49">*</span><span class="token plain"> batches_seen</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Future</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> finish</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">batches_seen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">batches_seen</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">finish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">finish</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">Init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">const</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Schema</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain"> schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">BackpressureControl</span><span class="token operator" style="color:#D73A49">*</span><span class="token plain"> backpressure_control</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecPlan</span><span class="token operator" style="color:#D73A49">*</span><span class="token plain"> plan</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">override</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// This will be called as the plan is started (before the first call to Consume)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// and provides the schema of the data coming into the node, controls for pausing /</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// resuming input, and a pointer to the plan itself which can be used to access</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// other utilities such as the thread indexer or async task scheduler.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">Status</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">Consume</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecBatch batch</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">override</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#D73A49">*</span><span class="token plain">batches_seen</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#D73A49">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">Status</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Future</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">Finish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">override</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// Here you can perform whatever (possibly async) cleanup is needed, e.g. closing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// output file handles and flushing remaining work</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">Future</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">MakeFinished</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">atomic</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token keyword" style="color:#CF222E">uint32_t</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token operator" style="color:#D73A49">*</span><span class="token plain"> batches_seen</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Future</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> finish</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">CustomSinkNodeConsumer</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> consumer </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function function" style="color:#8250DF">make_shared</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">CustomSinkNodeConsumer</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain">batches_seen</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> finish</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration consuming_sink</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;consuming_sink&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">source</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">ConsumingSinkNodeOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">consumer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// Since we are consuming the data within the plan there is no output and we simply</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// run the plan to completion instead of collecting into a table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_RETURN_NOT_OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">DeclarationToStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">consuming_sink</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;The consuming sink node saw &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> batches_seen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot; batches&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">Status</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: ConsumingSink Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: OrderBySink Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTableWithCustomSink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecPlan</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> plan</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Schema</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AsyncGenerator</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">optional</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecBatch</span><span class="token operator" style="color:#D73A49">&gt;&gt;</span><span class="token plain"> sink_gen</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// translate sink_gen (async) to sink_reader (sync)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">RecordBatchReader</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> sink_reader </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">MakeGeneratorReader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sink_gen</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">default_memory_pool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// validate the ExecPlan</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_RETURN_NOT_OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">plan</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">Validate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;ExecPlan created : &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> plan</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">ToString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// start the ExecPlan</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  plan</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">StartProducing</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// collect sink_reader into a Table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Table</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> response_table</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">response_table</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">Table</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">FromRecordBatchReader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sink_reader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;Results : &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> response_table</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">ToString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// stop producing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  plan</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">StopProducing</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// plan mark finished</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> future </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> plan</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">finished</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> future</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing an order-by node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Source-OrderBy-Sink</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// In this example, the data enters through the source node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// and the data is ordered in the sink node. The order can be</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// ASCENDING or DESCENDING and it is configurable. The output</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// is obtained as a table from the sink node.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">SourceOrderBySinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecPlan</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> plan</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">ExecPlan</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">Make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#D73A49">*</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">threaded_exec_context</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">MakeSortTestBasicBatches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AsyncGenerator</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">optional</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecBatch</span><span class="token operator" style="color:#D73A49">&gt;&gt;</span><span class="token plain"> sink_gen</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> source_node_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">gen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecNode </span><span class="token operator" style="color:#D73A49">*</span><span class="token plain"> source</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">MakeExecNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> plan</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> source_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_RETURN_NOT_OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">MakeExecNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#C6105F">&quot;order_by_sink&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> plan</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">source</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">OrderBySinkNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SortOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SortKey</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;a&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SortOrder</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Descending</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain">sink_gen</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTableWithCustomSink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">plan</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sink_gen</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: OrderBySink Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: HashJoin Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing a hash join node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Source-HashJoin-Table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how source node gets the data and how a self-join</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// is applied on the data. The join options are configurable. The output</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// is collected into a table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">SourceHashJoinSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> input</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">MakeGroupableBatches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration left</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">gen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration right</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">gen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">HashJoinNodeOptions join_opts</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">JoinType</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">INNER</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#6B6B6B;font-style:italic">/*left_keys=*/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;str&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#6B6B6B;font-style:italic">/*right_keys=*/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;str&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">literal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#005CC5">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;l_&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;r_&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration hashjoin</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#C6105F">&quot;hashjoin&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">left</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">right</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">join_opts</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hashjoin</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: HashJoin Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: KSelect Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing a select-k node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Source-KSelect</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how K number of elements can be selected</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// either from the top or bottom. The output node is a modified</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// sink node where output can be obtained as a table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">SourceKSelectExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> input</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">MakeGroupableBatches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecPlan</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> plan</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">ExecPlan</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">Make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#D73A49">*</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">threaded_exec_context</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AsyncGenerator</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">optional</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecBatch</span><span class="token operator" style="color:#D73A49">&gt;&gt;</span><span class="token plain"> sink_gen</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecNode </span><span class="token operator" style="color:#D73A49">*</span><span class="token plain"> source</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">MakeExecNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> plan</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> input</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">gen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SelectKOptions options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">SelectKOptions</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">TopKDefault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token comment" style="color:#6B6B6B;font-style:italic">/*k=*/</span><span class="token number" style="color:#005CC5">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;i32&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_RETURN_NOT_OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">MakeExecNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;select_k_sink&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> plan</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">source</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                       ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SelectKSinkNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain">sink_gen</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> schema </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">schema</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;i32&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">int32</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;str&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">utf8</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTableWithCustomSink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">plan</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sink_gen</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: KSelect Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: Write Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing a write node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \param file_path The destination to write to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Scan-Filter-Write</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how scan node can be used to load the data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// and after processing how it can be written to disk.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">ScanFilterWriteExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">const</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">string</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain"> file_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Dataset</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetDataset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function function" style="color:#8250DF">make_shared</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">dataset</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">ScanOptions</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// empty projection</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token plain">projection </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">project</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> scan_node_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ScanNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">dataset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration scan</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;scan&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scan_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AsyncGenerator</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">optional</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecBatch</span><span class="token operator" style="color:#D73A49">&gt;&gt;</span><span class="token plain"> sink_gen</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">string root_path </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">string uri </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;file://&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">+</span><span class="token plain"> file_path</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">fs</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">FileSystem</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> filesystem</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">fs</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">FileSystemFromUri</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uri</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain">root_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> base_path </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> root_path </span><span class="token operator" style="color:#D73A49">+</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;/parquet_dataset&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// Uncomment the following line, if run repeatedly</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// TURBO_RETURN_NOT_OK(filesystem-&gt;DeleteDirContents(base_path));</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_RETURN_NOT_OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">filesystem</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">CreateDir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">base_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// The partition schema determines which fields are part of the partitioning.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> partition_schema </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">schema</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">field</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;a&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">int32</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// We&#x27;ll use Hive-style partitioning,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// which creates directories with &quot;key=value&quot; pairs.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> partitioning </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function function" style="color:#8250DF">make_shared</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">dataset</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">HivePartitioning</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">partition_schema</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// We&#x27;ll write Parquet files.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> format </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function function" style="color:#8250DF">make_shared</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">dataset</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">ParquetFileFormat</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">FileSystemDatasetWriteOptions write_options</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  write_options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">file_write_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> format</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">DefaultWriteOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  write_options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">filesystem </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> filesystem</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  write_options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">base_dir </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> base_path</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  write_options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">partitioning </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> partitioning</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  write_options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">basename_template </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;part{i}.parquet&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">WriteNodeOptions write_node_options</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">write_options</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration write</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;write&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scan</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">write_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// Since the write node has no output we simply run the plan to completion and the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// data should be written</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_RETURN_NOT_OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">DeclarationToStatus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;Dataset written to &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> base_path </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">Status</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: Write Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: Union Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing a union node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// Source-Union-Table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how a union operation can be applied on two</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// data sources. The output is collected into a table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">SourceUnionSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">MakeBasicBatches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration lhs</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">gen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  lhs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">label </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;lhs&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration rhs</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">gen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rhs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">label </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;rhs&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration union_plan</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#C6105F">&quot;union&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">lhs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rhs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">union_plan</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: Union Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: Table Sink Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing a table sink node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// TableSink Example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how a table_sink can be used</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// in an execution plan. This includes a source node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// receiving data as batches and the table sink node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// which emits the output as a table.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">TableSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecPlan</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> plan</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">ExecPlan</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">Make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#D73A49">*</span><span class="token plain">cp</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">threaded_exec_context</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">MakeBasicBatches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> source_node_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">schema</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> basic_data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">gen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">ExecNode </span><span class="token operator" style="color:#D73A49">*</span><span class="token plain"> source</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">MakeExecNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> plan</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> source_node_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Table</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> output_table</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> table_sink_options </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">TableSinkNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain">output_table</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_RETURN_NOT_OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">MakeExecNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;table_sink&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> plan</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">source</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> table_sink_options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// validate the ExecPlan</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_RETURN_NOT_OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">plan</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">Validate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;ExecPlan created : &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> plan</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">ToString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// start the ExecPlan</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  plan</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">StartProducing</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// Wait for the plan to finish</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> finished </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> plan</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">finished</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">RETURN_NOT_OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">finished</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;Results : &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> output_table</span><span class="token operator" style="color:#D73A49">-&gt;</span><span class="token function" style="color:#8250DF">ToString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token class-name" style="color:#116329">Status</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">OK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: Table Sink Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: RecordBatchReaderSource Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// \brief An example showing the usage of a RecordBatchReader as the data source.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">///</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// RecordBatchReaderSourceSink Example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// This example shows how a record_batch_reader_source can be used</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// in an execution plan. This includes the source node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">/// receiving data from a TableRecordBatchReader.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status </span><span class="token function" style="color:#8250DF">RecordBatchReaderSourceSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#8250DF">TURBO_MOVE_OR_RAISE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> table</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">GetTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain">alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">RecordBatchReader</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> reader </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function function" style="color:#8250DF">make_shared</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&lt;</span><span class="token generic-function generic class-name" style="color:#116329">alkaid</span><span class="token generic-function generic class-name double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function generic class-name" style="color:#116329">TableBatchReader</span><span class="token generic-function generic class-name operator" style="color:#D73A49">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">table</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Declaration reader_source</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;record_batch_reader_source&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                ac</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">RecordBatchReaderSourceNodeOptions</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">reader</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ExecutePlanAndCollectAsTable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">reader_source</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// (Doc section: RecordBatchReaderSource Example)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">enum</span><span class="token plain"> </span><span class="token class-name" style="color:#116329">ExampleMode</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SOURCE_SINK </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  TABLE_SOURCE_SINK </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SCAN </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  FILTER </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  PROJECT </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SCALAR_AGGREGATION </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  GROUP_AGGREGATION </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">6</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  CONSUMING_SINK </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">7</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ORDER_BY_SINK </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">8</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HASHJOIN </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">9</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  KSELECT </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  WRITE </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">11</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  UNION </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">12</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  TABLE_SOURCE_TABLE_SINK </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">13</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  RECORD_BATCH_READER_SOURCE </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">14</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  PROJECT_SEQUENCE </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">15</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">int</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">int</span><span class="token plain"> argc</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">char</span><span class="token operator" style="color:#D73A49">*</span><span class="token operator" style="color:#D73A49">*</span><span class="token plain"> argv</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">argc </span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// Fake success for CI purposes.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> EXIT_SUCCESS</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">string base_save_path </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> argv</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#005CC5">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">int</span><span class="token plain"> mode </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">atoi</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">argv</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#005CC5">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  turbo</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Status status</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// ensure alkaid::dataset node factories are in the registry</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alkaid</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">dataset</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">internal</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">Initialize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">case</span><span class="token plain"> SOURCE_SINK</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#8250DF">PrintBlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;Source Sink Example&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      status </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">SourceSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#CF222E">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">case</span><span class="token plain"> TABLE_SOURCE_SINK</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#8250DF">PrintBlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;Table Source Sink Example&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      status </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">TableSourceSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#CF222E">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">case</span><span class="token plain"> SCAN</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#8250DF">PrintBlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;Scan Example&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      status </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ScanSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#CF222E">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">case</span><span class="token plain"> FILTER</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#8250DF">PrintBlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;Filter Example&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      status </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ScanFilterSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#CF222E">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">case</span><span class="token plain"> PROJECT</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#8250DF">PrintBlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;Project Example&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      status </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ScanProjectSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#CF222E">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">case</span><span class="token plain"> PROJECT_SEQUENCE</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#8250DF">PrintBlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;Project Example (using Declaration::Sequence)&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      status </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ScanProjectSequenceSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#CF222E">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">case</span><span class="token plain"> GROUP_AGGREGATION</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#8250DF">PrintBlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;Aggregate Example&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      status </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">SourceGroupAggregateSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#CF222E">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">case</span><span class="token plain"> SCALAR_AGGREGATION</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#8250DF">PrintBlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;Aggregate Example&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      status </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">SourceScalarAggregateSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#CF222E">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">case</span><span class="token plain"> CONSUMING_SINK</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#8250DF">PrintBlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;Consuming-Sink Example&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      status </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">SourceConsumingSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#CF222E">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">case</span><span class="token plain"> ORDER_BY_SINK</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#8250DF">PrintBlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;OrderBy Example&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      status </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">SourceOrderBySinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#CF222E">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">case</span><span class="token plain"> HASHJOIN</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#8250DF">PrintBlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;HashJoin Example&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      status </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">SourceHashJoinSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#CF222E">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">case</span><span class="token plain"> KSELECT</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#8250DF">PrintBlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;KSelect Example&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      status </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">SourceKSelectExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#CF222E">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">case</span><span class="token plain"> WRITE</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#8250DF">PrintBlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;Write Example&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      status </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">ScanFilterWriteExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">base_save_path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#CF222E">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">case</span><span class="token plain"> UNION</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#8250DF">PrintBlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;Union Example&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      status </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">SourceUnionSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#CF222E">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">case</span><span class="token plain"> TABLE_SOURCE_TABLE_SINK</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#8250DF">PrintBlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;TableSink Example&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      status </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">TableSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#CF222E">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">case</span><span class="token plain"> RECORD_BATCH_READER_SOURCE</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#8250DF">PrintBlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;RecordBatchReaderSource Example&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      status </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">RecordBatchReaderSourceSinkExample</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#CF222E">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">default</span><span class="token operator" style="color:#D73A49">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#CF222E">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">status</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">ok</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> EXIT_SUCCESS</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;Error occurred: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> status</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">message</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> EXIT_FAILURE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-05-24T10:16:12.000Z" itemprop="dateModified">May 24, 2025</time></b> by <b>Jeff lothar</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/cpp/alkaid/acero/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">æ¦‚è§ˆ</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/cpp/alkaid/acero/developer_guide"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">å¼€å‘è€…æŒ‡å—</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ä½¿ç”¨-acero" class="table-of-contents__link toc-highlight">ä½¿ç”¨ Acero</a></li><li><a href="#åˆ›å»ºè®¡åˆ’" class="table-of-contents__link toc-highlight">åˆ›å»ºè®¡åˆ’</a><ul><li><a href="#using-substrait" class="table-of-contents__link toc-highlight">Using Substrait</a></li><li><a href="#ç¨‹åºåŒ–è®¡åˆ’åˆ¶å®š" class="table-of-contents__link toc-highlight">ç¨‹åºåŒ–è®¡åˆ’åˆ¶å®š</a></li><li><a href="#æ‰§è¡Œè®¡åˆ’" class="table-of-contents__link toc-highlight">æ‰§è¡Œè®¡åˆ’</a></li><li><a href="#declarationtotable" class="table-of-contents__link toc-highlight">DeclarationToTable</a></li><li><a href="#declarationtoreader" class="table-of-contents__link toc-highlight">DeclarationToReader</a></li><li><a href="#declarationtostatus" class="table-of-contents__link toc-highlight">DeclarationToStatus</a></li><li><a href="#running-a-plan-directly" class="table-of-contents__link toc-highlight">Running a Plan Directly</a></li></ul></li><li><a href="#æä¾›è¾“å…¥" class="table-of-contents__link toc-highlight">æä¾›è¾“å…¥</a></li><li><a href="#å¯ç”¨çš„-execnode-å®ç°" class="table-of-contents__link toc-highlight">å¯ç”¨çš„ <code>ExecNode</code> å®ç°</a><ul><li><a href="#æºèŠ‚ç‚¹----sources-nodes" class="table-of-contents__link toc-highlight">æºèŠ‚ç‚¹ -- Sources Nodes</a></li><li><a href="#è®¡ç®—èŠ‚ç‚¹----compute-nodes" class="table-of-contents__link toc-highlight">è®¡ç®—èŠ‚ç‚¹ -- Compute Nodes</a></li><li><a href="#æ’åˆ—èŠ‚ç‚¹----arrangement-nodes" class="table-of-contents__link toc-highlight">æ’åˆ—èŠ‚ç‚¹ -- Arrangement Nodes</a></li><li><a href="#æ±‡èšèŠ‚ç‚¹----sink-nodes" class="table-of-contents__link toc-highlight">æ±‡èšèŠ‚ç‚¹ -- Sink Nodes</a></li></ul></li><li><a href="#ç¤ºä¾‹" class="table-of-contents__link toc-highlight">ç¤ºä¾‹</a><ul><li><a href="#æº-source" class="table-of-contents__link toc-highlight"><code>æº</code> <code>source</code></a></li><li><a href="#table_source" class="table-of-contents__link toc-highlight"><code>table_source</code></a></li><li><a href="#filter" class="table-of-contents__link toc-highlight"><code>filter</code></a></li><li><a href="#project" class="table-of-contents__link toc-highlight"><code>project</code></a></li><li><a href="#aggregate" class="table-of-contents__link toc-highlight"><code>aggregate</code></a></li><li><a href="#sink" class="table-of-contents__link toc-highlight"><code>sink</code></a></li><li><a href="#consuming_sink" class="table-of-contents__link toc-highlight"><code>consuming_sink</code></a></li><li><a href="#order_by_sink" class="table-of-contents__link toc-highlight"><code>order_by_sink</code></a></li><li><a href="#select_k_sink" class="table-of-contents__link toc-highlight"><code>select_k_sink</code></a></li><li><a href="#table_sink" class="table-of-contents__link toc-highlight"><code>table_sink</code></a></li><li><a href="#scan" class="table-of-contents__link toc-highlight"><code>scan</code></a></li><li><a href="#write" class="table-of-contents__link toc-highlight"><code>write</code></a></li><li><a href="#union" class="table-of-contents__link toc-highlight"><code>union</code></a></li><li><a href="#hash_join" class="table-of-contents__link toc-highlight"><code>hash_join</code></a></li></ul></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">é˜…è¯»</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">æ–‡æ¡£</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/installation">å®‰è£…</a></li></ul></div><div class="col footer__col"><div class="footer__title">æ”¯æŒä¸èµ„æº</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/feature-requests">Feature Requests</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/community/support">Help</a></li></ul></div><div class="col footer__col"><div class="footer__title">æ›´å¤š</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">åšå®¢</a></li><li class="footer__item"><a class="footer__link-item" href="/changelog">æ›´æ–°</a></li><li class="footer__item"><a href="https://gitee.com/kumo-pub" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitee<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://kumo-ai.tech" target="_blank" rel="noopener noreferrer" class="footer__link-item">ç½‘ç«™<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/cookie-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cookie Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">ç‰ˆæƒ Â© 2025 åŒ—äº¬ç§‘ç±³æ™ºåˆ›ç§‘æŠ€æœ‰é™å…¬å¸</div></div></div></footer></div>
</body>
</html>