"use strict";(self.webpackChunkkumo_website=self.webpackChunkkumo_website||[]).push([[18309],{97132:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>c,toc:()=>p});var n=a(74848),s=a(28453),l=a(49489),r=a(7227);const i={date:"7/16/2024"},o="\u6559\u7a0b\uff1a kmcmake \u5de5\u7a0b\u751f\u6210",c={id:"kmpkg/get_started/kmcmake",title:"\u6559\u7a0b\uff1a kmcmake \u5de5\u7a0b\u751f\u6210",description:"\u672c\u6559\u7a0b\u5411\u60a8\u5c55\u793a\u5982\u4f55\u901a\u8fc7 CMake \u548c kmcmake \u521b\u5efa\u4f7f\u7528 C++\u201cHello World\u201d\u7a0b\u5e8f\u3002\u60a8\u5c06\u4e00\u952e\u751f\u6210\u4e00\u4e2a\u57fa\u4e8eCMake\u6784\u5efa\u7cfb\u7edf\u7684\u7b80\u5355\u7684\u5e94\u7528\u7a0b\u5e8f\u3002",source:"@site/versioned_docs/version-1.1.1/kmpkg/get_started/kmcmake.mdx",sourceDirName:"kmpkg/get_started",slug:"/kmpkg/get_started/kmcmake",permalink:"/docs/kmpkg/get_started/kmcmake",draft:!1,unlisted:!1,tags:[],version:"1.1.1",frontMatter:{date:"7/16/2024"},sidebar:"docs",previous:{title:"\u6559\u7a0b\uff1a\u5b89\u88c5kmpkg",permalink:"/docs/kmpkg/get_started/setup-kmpkg"},next:{title:"\u6559\u7a0b\uff1aCMake \u5de5\u7a0b\u96c6\u6210",permalink:"/docs/kmpkg/get_started/get-started-cmake"}},u={},p=[{value:"\u5148\u51b3\u6761\u4ef6",id:"\u5148\u51b3\u6761\u4ef6",level:2},{value:"1 - \u521b\u5efa\u9879\u76ee",id:"1-create-project",level:2},{value:"2 - \u521d\u59cb\u5316\u9879\u76ee",id:"2-init-project",level:2},{value:"3 - \u7f16\u8bd1\u4ee5\u53ca\u8fd0\u884c\u9879\u76ee",id:"3-run-project",level:2},{value:"1 - \u914d\u7f6e <code>cmake</code>",id:"1---\u914d\u7f6e-cmake",level:3},{value:"2 - \u7f16\u8bd1\u9879\u76ee",id:"2---\u7f16\u8bd1\u9879\u76ee",level:3},{value:"3 - \u8fd0\u884c\u9879\u76ee",id:"3---\u8fd0\u884c\u9879\u76ee",level:3}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"\u6559\u7a0b-kmcmake-\u5de5\u7a0b\u751f\u6210",children:"\u6559\u7a0b\uff1a kmcmake \u5de5\u7a0b\u751f\u6210"})}),"\n",(0,n.jsxs)(t.p,{children:["\u672c\u6559\u7a0b\u5411\u60a8\u5c55\u793a\u5982\u4f55\u901a\u8fc7 CMake \u548c kmcmake \u521b\u5efa\u4f7f\u7528 C++\u201cHello World\u201d\u7a0b\u5e8f\u3002\u60a8\u5c06\u4e00\u952e\u751f\u6210\u4e00\u4e2a\u57fa\u4e8e",(0,n.jsx)(t.code,{children:"CMake"}),"\u6784\u5efa\u7cfb\u7edf\u7684\u7b80\u5355\u7684\u5e94\u7528\u7a0b\u5e8f\u3002"]}),"\n",(0,n.jsx)(t.h2,{id:"\u5148\u51b3\u6761\u4ef6",children:"\u5148\u51b3\u6761\u4ef6"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"\u4e00\u4e2a\u7ec8\u7aef"}),"\n",(0,n.jsx)(t.li,{children:"C++ \u7f16\u8bd1\u5668"}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"https://cmake.org/download/",children:"CMake"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"https://git-scm.com/downloads",children:"Git"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/docs/kmpkg/get_started/setup-kmpkg",children:"\u5b89\u88c5 kmpkg"})}),"\n"]}),"\n",(0,n.jsx)(t.admonition,{title:"\u91cd\u8981",type:"warning",children:(0,n.jsxs)(t.p,{children:["cmake \u6700\u4f4e\u8981\u6c42 ",(0,n.jsx)(t.code,{children:"3.24.3"}),"\uff0c\u8bf7\u6b63\u786e\u5b89\u88c5cmake"]})}),"\n",(0,n.jsx)(t.h2,{id:"1-create-project",children:"1 - \u521b\u5efa\u9879\u76ee"}),"\n",(0,n.jsx)(t.p,{children:"\u521b\u5efa\u9879\u76ee\u76ee\u5f55:"}),"\n",(0,n.jsx)(l.A,{children:(0,n.jsx)(r.A,{value:"shell",label:"shell",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:"mkdir hello\n"})})})}),"\n",(0,n.jsx)(t.p,{children:"\u8fdb\u5165\u5230\u76ee\u5f55\u4e2d\uff1a"}),"\n",(0,n.jsx)(l.A,{children:(0,n.jsx)(r.A,{value:"shell",label:"shell",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:"cd hello\n"})})})}),"\n",(0,n.jsx)(t.h2,{id:"2-init-project",children:"2 - \u521d\u59cb\u5316\u9879\u76ee"}),"\n",(0,n.jsxs)(t.p,{children:["\u521d\u59cb\u5316\u9879\u76ee\u540d\u79f0\u4e3a ",(0,n.jsx)(t.code,{children:'"hello"'})," \u7684c++\u9879\u76ee\uff1a"]}),"\n",(0,n.jsx)(l.A,{children:(0,n.jsx)(r.A,{value:"shell",label:"shell",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:'>kmcmake hello\nkmpkg root directory "/data/package/kmpkg"\ncurrent project directory "/data/gitee/kumo-pub/pkg-temp"\nyour project name is hello\n-- The CXX compiler identification is GNU 9.4.0\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Check for working CXX compiler: /usr/bin/c++ - skipped\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Configuring done\n-- Generating done\n-- Build files have been written to: /data/gitee/kumo-pub/pkg-temp/kmncmake_temp_build\n-- Install configuration: ""\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./cmake\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./cmake/deb\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./cmake/deb/postrm\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./cmake/deb/.gitignore\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./cmake/deb/preinst\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./cmake/deb/prerm\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./cmake/deb/postinst.in\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./cmake/hello_cpack_config.cmake\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./cmake/rpm\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./cmake/rpm/postrm\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./cmake/rpm/.gitignore\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./cmake/rpm/preinst\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./cmake/rpm/prerm\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./cmake/rpm/postinst.in\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./cmake/hello_cxx_config.cmake\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./cmake/hello_test.cmake\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./cmake/hello_deps.cmake\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./cmake/hello_config.cmake.in\n-- Installing: /data/gitee/kumo-pub/pkg-temp/examples/foo_ex.cc\n-- Installing: /data/gitee/kumo-pub/pkg-temp/examples/CMakeLists.txt\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./CMakeLists.txt\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./LICENSE\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./README.md\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./benchmark\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./benchmark/CMakeLists.txt\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./kmcmake\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./kmcmake/README.md\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./kmcmake/copts\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./kmcmake/copts/generate_copts.py\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./kmcmake/copts/copts.py\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./kmcmake/kmcmake_module.cmake\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./kmcmake/package\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./kmcmake/package/pkg_dump_template.pc.in\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./kmcmake/package/CPack.STGZ_Header.sh.in\n-- Installing: /data/gitee/kumo-pub/pkg-temp/./kmcmake/package/README.md\n-- Installing: /data/gitee/kumo-pub/pkg-temp/hello/api.h\n-- Installing: /data/gitee/kumo-pub/pkg-temp/hello/CMakeLists.txt\n-- Installing: /data/gitee/kumo-pub/pkg-temp/hello/foo.h\n-- Installing: /data/gitee/kumo-pub/pkg-temp/hello/main.cc\n-- Installing: /data/gitee/kumo-pub/pkg-temp/hello/version.h.in\n-- Installing: /data/gitee/kumo-pub/pkg-temp/hello/foo.cc\n-- Installing: /data/gitee/kumo-pub/pkg-temp/tests/foo_test.cc\n-- Installing: /data/gitee/kumo-pub/pkg-temp/tests/foo_doctest.cc\n-- Installing: /data/gitee/kumo-pub/pkg-temp/tests/args_test.cc\n-- Installing: /data/gitee/kumo-pub/pkg-temp/tests/CMakeLists.txt\n-- Installing: /data/gitee/kumo-pub/pkg-temp/tests/pass_test.cc\n-- Installing: /data/gitee/kumo-pub/pkg-temp/tests/raw_test.cc\n'})})})}),"\n",(0,n.jsx)(t.h2,{id:"3-run-project",children:"3 - \u7f16\u8bd1\u4ee5\u53ca\u8fd0\u884c\u9879\u76ee"}),"\n",(0,n.jsxs)(t.h3,{id:"1---\u914d\u7f6e-cmake",children:["1 - \u914d\u7f6e ",(0,n.jsx)(t.code,{children:"cmake"})]}),"\n",(0,n.jsx)(t.p,{children:"\u914d\u7f6ecmake configure\uff1a"}),"\n",(0,n.jsxs)(l.A,{children:[(0,n.jsx)(r.A,{value:"without-shell",label:"\u4e0d\u7f16\u8bd1\u6d4b\u8bd5",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:"cmake -S . -B build\n"})})}),(0,n.jsx)(r.A,{value:"with-shell",label:"\u7f16\u8bd1\u6d4b\u8bd5",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:"cmake -S . -B build -DKMCMAKE_BUILD_TEST=ON\n"})})})]}),"\n",(0,n.jsx)(t.h3,{id:"2---\u7f16\u8bd1\u9879\u76ee",children:"2 - \u7f16\u8bd1\u9879\u76ee"}),"\n",(0,n.jsx)(t.p,{children:"\u7f16\u8bd1\u9879\u76ee\u547d\u4ee4\uff1a"}),"\n",(0,n.jsx)(l.A,{children:(0,n.jsx)(r.A,{value:"shell",label:"\u7f16\u8bd1",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:"cmake --build build -j 4\n"})})})}),"\n",(0,n.jsx)(t.h3,{id:"3---\u8fd0\u884c\u9879\u76ee",children:"3 - \u8fd0\u884c\u9879\u76ee"}),"\n",(0,n.jsx)(t.p,{children:"\u7f16\u8bd1\u9879\u76ee\u547d\u4ee4\uff1a"}),"\n",(0,n.jsxs)(l.A,{children:[(0,n.jsx)(r.A,{value:"shell",label:"\u8fd0\u884c",children:(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:"./build/hello/shared_main\n"})})}),(0,n.jsxs)(r.A,{value:"test",label:"\u8fd0\u884c\u6d4b\u8bd5",children:[(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-shell",children:'>ctest --test-dir build\nInternal ctest changing into directory: /data/gitee/kumo-pub/pkg-temp/build\nTest project /data/gitee/kumo-pub/pkg-temp/build\nStart  1: base_raw_test\n1/11 Test  #1: base_raw_test ....................   Passed    0.00 sec\nStart  2: base_pass_test_1\n2/11 Test  #2: base_pass_test_1 .................   Passed    0.00 sec\nStart  3: base_pass_test_2\n3/11 Test  #3: base_pass_test_2 .................   Passed    0.00 sec\nStart  4: base_pass_test_foo\n4/11 Test  #4: base_pass_test_foo ...............   Passed    0.00 sec\nStart  5: base_pass_test_bar\n5/11 Test  #5: base_pass_test_bar ...............   Passed    0.00 sec\nStart  6: base_args_test_fail\n6/11 Test  #6: base_args_test_fail ..............***Failed  Error regular expression found in output. Regex=[Failed]  0.00 sec\nStart  7: base_args_test_fail_args\n7/11 Test  #7: base_args_test_fail_args .........***Failed  Error regular expression found in output. Regex=[Failed]  0.00 sec\nStart  8: base_args_test_skip_fail\n8/11 Test  #8: base_args_test_skip_fail .........***Failed  Error regular expression found in output. Regex=[Failed]  0.00 sec\nStart  9: base_args_test_skip\n9/11 Test  #9: base_args_test_skip ..............***Skipped   0.00 sec\nStart 10: base_args_test_skip_pass\n10/11 Test #10: base_args_test_skip_pass .........   Passed    0.00 sec\nStart 11: base_args_test_skip_diabled\n11/11 Test #11: base_args_test_skip_diabled ......   Passed    0.00 sec\n\n73% tests passed, 3 tests failed out of 11\n\nTotal Test time (real) =   0.01 sec\n\nThe following tests did not run:\n9 - base_args_test_skip (Skipped)\n\nThe following tests FAILED:\n6 - base_args_test_fail (Failed)\n7 - base_args_test_fail_args (Failed)\n8 - base_args_test_skip_fail (Failed)\nErrors while running CTest\nOutput from these tests are in: /data/gitee/kumo-pub/pkg-temp/build/Testing/Temporary/LastTest.log\nUse "--rerun-failed --output-on-failure" to re-run the failed cases verbosely.\n\n'})}),(0,n.jsx)(t.admonition,{title:"\u91cd\u8981",type:"warning",children:(0,n.jsx)(t.p,{children:"\u8fd0\u884c\u6d4b\u8bd5\u4f1a\u6709\u4e09\u4e2a\u5931\u8d25\u7684\u6d4b\u8bd5\uff0c\u8fd9\u662f\u6b63\u5e38\u7684\uff0c\u662f\u6211\u4eec\u6709\u610f\u505a\u7684\u5931\u8d25\u6d4b\u8bd5\u6848\u4f8b"})})]})]})]})}function m(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},7227:(e,t,a)=>{a.d(t,{A:()=>r});a(96540);var n=a(34164);const s={tabItem:"tabItem_Ymn6"};var l=a(74848);function r(e){let{children:t,hidden:a,className:r}=e;return(0,l.jsx)("div",{role:"tabpanel",className:(0,n.A)(s.tabItem,r),hidden:a,children:t})}},49489:(e,t,a)=>{a.d(t,{A:()=>v});var n=a(96540),s=a(34164),l=a(24245),r=a(56347),i=a(36494),o=a(62814),c=a(45167),u=a(81269);function p(e){return n.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function d(e){const{values:t,children:a}=e;return(0,n.useMemo)((()=>{const e=t??function(e){return p(e).map((e=>{let{props:{value:t,label:a,attributes:n,default:s}}=e;return{value:t,label:a,attributes:n,default:s}}))}(a);return function(e){const t=(0,c.XI)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function m(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function g(e){let{queryString:t=!1,groupId:a}=e;const s=(0,r.W6)(),l=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:t,groupId:a});return[(0,o.aZ)(l),(0,n.useCallback)((e=>{if(!l)return;const t=new URLSearchParams(s.location.search);t.set(l,e),s.replace({...s.location,search:t.toString()})}),[l,s])]}function k(e){const{defaultValue:t,queryString:a=!1,groupId:s}=e,l=d(e),[r,o]=(0,n.useState)((()=>function(e){let{defaultValue:t,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const n=a.find((e=>e.default))??a[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:l}))),[c,p]=g({queryString:a,groupId:s}),[k,h]=function(e){let{groupId:t}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(t),[s,l]=(0,u.Dv)(a);return[s,(0,n.useCallback)((e=>{a&&l.set(e)}),[a,l])]}({groupId:s}),b=(()=>{const e=c??k;return m({value:e,tabValues:l})?e:null})();(0,i.A)((()=>{b&&o(b)}),[b]);return{selectedValue:r,selectValue:(0,n.useCallback)((e=>{if(!m({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);o(e),p(e),h(e)}),[p,h,l]),tabValues:l}}var h=a(11062);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var _=a(74848);function f(e){let{className:t,block:a,selectedValue:n,selectValue:r,tabValues:i}=e;const o=[],{blockElementScrollPositionUntilNextRender:c}=(0,l.a_)(),u=e=>{const t=e.currentTarget,a=o.indexOf(t),s=i[a].value;s!==n&&(c(t),r(s))},p=e=>{let t=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const a=o.indexOf(e.currentTarget)+1;t=o[a]??o[0];break}case"ArrowLeft":{const a=o.indexOf(e.currentTarget)-1;t=o[a]??o[o.length-1];break}}t?.focus()};return(0,_.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":a},t),children:i.map((e=>{let{value:t,label:a,attributes:l}=e;return(0,_.jsx)("li",{role:"tab",tabIndex:n===t?0:-1,"aria-selected":n===t,ref:e=>o.push(e),onKeyDown:p,onClick:u,...l,className:(0,s.A)("tabs__item",b.tabItem,l?.className,{"tabs__item--active":n===t}),children:a??t},t)}))})}function x(e){let{lazy:t,children:a,selectedValue:l}=e;const r=(Array.isArray(a)?a:[a]).filter(Boolean);if(t){const e=r.find((e=>e.props.value===l));return e?(0,n.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,_.jsx)("div",{className:"margin-top--md",children:r.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==l})))})}function j(e){const t=k(e);return(0,_.jsxs)("div",{className:(0,s.A)("tabs-container",b.tabList),children:[(0,_.jsx)(f,{...t,...e}),(0,_.jsx)(x,{...t,...e})]})}function v(e){const t=(0,h.A)();return(0,_.jsx)(j,{...e,children:p(e.children)},String(t))}},28453:(e,t,a)=>{a.d(t,{R:()=>r,x:()=>i});var n=a(96540);const s={},l=n.createContext(s);function r(e){const t=n.useContext(l);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),n.createElement(l.Provider,{value:t},e.children)}}}]);