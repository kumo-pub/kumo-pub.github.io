"use strict";(self.webpackChunkkumo_website=self.webpackChunkkumo_website||[]).push([[20598],{21676:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>d,toc:()=>l});var s=n(74848),r=n(28453);const i={title:"Xbox",description:"Use x64 community triplets for Xbox development.",author:"walbourn","ms.author":"viromer",date:"01/10/2024","ms.topic":"concept-article"},o="Xbox",d={id:"kmpkg/users/platforms/xbox",title:"Xbox",description:"Use x64 community triplets for Xbox development.",source:"@site/docs/kmpkg/users/platforms/xbox.md",sourceDirName:"kmpkg/users/platforms",slug:"/kmpkg/users/platforms/xbox",permalink:"/docs/next/kmpkg/users/platforms/xbox",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Xbox",description:"Use x64 community triplets for Xbox development.",author:"walbourn","ms.author":"viromer",date:"01/10/2024","ms.topic":"concept-article"}},c={},l=[{value:"Xbox community triplets",id:"xbox-community-triplets",level:2},{value:"Building with the Windows SDK",id:"building-with-the-windows-sdk",level:2},{value:"Building with the Microsoft GDK with Xbox Extensions",id:"building-with-the-microsoft-gdk-with-xbox-extensions",level:2},{value:"UWP on Xbox",id:"uwp-on-xbox",level:2},{value:"Maintainer notes",id:"maintainer-notes",level:2},{value:"Further reading",id:"further-reading",level:2}];function a(e){const t={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"xbox",children:"Xbox"})}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsx)(t.p,{children:"[!NOTE]\nXbox is not tested as part of kmpkg repository's continuous integration process, so regressions can occur as part of library updates."}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"xbox-community-triplets",children:"Xbox community triplets"}),"\n",(0,s.jsxs)(t.p,{children:["kmpkg includes ",(0,s.jsx)(t.a,{href:"https://gitee.com/kumo-pub/kmpkg/tree/master/triplets/community",children:"community triplets"})," for ",(0,s.jsx)(t.a,{href:"https://aka.ms/gdk",children:"Microsoft GDK"})," PC and ",(0,s.jsx)(t.a,{href:"https://aka.ms/gdkx",children:"Xbox"})," development. They make use of the MSVC compiler toolset (Visual Studio 2019 version 16.11 or later)."]}),"\n",(0,s.jsx)(t.p,{children:"There are two variants for each triplet: static and dynamic linking."}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Console"}),(0,s.jsx)(t.th,{children:"kmpkg community triplets"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Xbox One"}),(0,s.jsx)(t.td,{children:"x64-xbox-xboxone"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"x64-xbox-xboxone-static"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Xbox Series X|S"}),(0,s.jsx)(t.td,{children:"x64-xbox-scarlett"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"x64-xbox-scarlett-static"})]})]})]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"static"})," linking triplets are set to use the MSVC Runtime as a DLL (i.e. ",(0,s.jsx)(t.code,{children:"KMPKG_CRT_LINKAGE dynamic"}),") as that's the recommended and supported usage scenario."]}),"\n",(0,s.jsx)(t.h2,{id:"building-with-the-windows-sdk",children:"Building with the Windows SDK"}),"\n",(0,s.jsxs)(t.p,{children:["The Windows SDK (19041) or later includes the system headers required to build against the ",(0,s.jsx)(t.code,{children:"WINAPI_FAMILY_GAMES"})," API partition used by the Xbox Game OS. Therefore, most libraries can be built against these triplets without having access to the NDA ",(0,s.jsx)(t.em,{children:"Microsoft GDK with Xbox Extensions"}),"."]}),"\n",(0,s.jsx)(t.h2,{id:"building-with-the-microsoft-gdk-with-xbox-extensions",children:"Building with the Microsoft GDK with Xbox Extensions"}),"\n",(0,s.jsxs)(t.p,{children:["Libraries that make use of DirectX graphics APIs must be built using a custom variant of Direct3D 12.X used by the Xbox Game OS, and this requires access to the NDA ",(0,s.jsx)(t.em,{children:"Microsoft GDK with Xbox Extensions"}),". Note that the Xbox Game OS does not support Direct3D 11, Direct2D/DirectWrite, OpenGL, GDI, or any older version of Direct3D."]}),"\n",(0,s.jsxs)(t.p,{children:["Libraries that require these headers must use the ",(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.code,{children:"ms-gdkx"})}),' "stub" port to indicate this requirement. This port looks for paths pointed to by ',(0,s.jsx)(t.code,{children:"GameDKLatest"}),", ",(0,s.jsx)(t.code,{children:"GameGXDKLatest"}),", and ",(0,s.jsx)(t.code,{children:"GameGRDKLatest"})," environment variables."]}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsx)(t.p,{children:"[!NOTE]\nXbox game developers are responsible for ensuring that they and their publishers have appropriate and correct licensing terms for use of any 3rd party software components per the terms of their Title License Agreement. Be sure to seek appropriate legal advice for any use of open-source components in your title."}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"uwp-on-xbox",children:"UWP on Xbox"}),"\n",(0,s.jsxs)(t.p,{children:["If building for UWP on Xbox, use the existing ",(0,s.jsx)(t.code,{children:"x64-uwp"})," triplet instead."]}),"\n",(0,s.jsx)(t.h2,{id:"maintainer-notes",children:"Maintainer notes"}),"\n",(0,s.jsxs)(t.p,{children:["CMake projects for these triplets are built using ",(0,s.jsx)(t.code,{children:"CMAKE_SYSTEM_NAME"}),' set to "Windows". To indicate the Xbox console being targeted, the ',(0,s.jsx)(t.code,{children:"XBOX_CONSOLE_TARGET"}),' variable is set to "',(0,s.jsx)(t.code,{children:"xboxone"}),'" or "',(0,s.jsx)(t.code,{children:"scarlett"}),'".']}),"\n",(0,s.jsxs)(t.p,{children:["Xbox triplets build with ",(0,s.jsx)(t.code,{children:"/DWINAPI_FAMILY=WINAPI_FAMILY_GAMES"})," and either ",(0,s.jsx)(t.code,{children:"/arch:AVX"})," or ",(0,s.jsx)(t.code,{children:"/arch:AVX2"})," depending on the target console."]}),"\n",(0,s.jsxs)(t.p,{children:["The Xbox triplets also build with ",(0,s.jsx)(t.code,{children:"/DUNICODE /D_UNICODE"})," as these are both strongly recommended for modern development. See the ",(0,s.jsx)(t.a,{href:"https://utf8everywhere.org/",children:"UTF-8 Everywhere manifesto"})," for more information."]}),"\n",(0,s.jsxs)(t.p,{children:["For dynamic libraries, be sure to avoid explict linking to ",(0,s.jsx)(t.code,{children:"KERNEL32.LIB"})," or ",(0,s.jsx)(t.code,{children:"ONECORE.LIB"}),". For the Xbox platform, a platform umbrella library is used instead which conflicts with ",(0,s.jsx)(t.code,{children:"kernel32"}),", etc. See Microsoft Learn."]}),"\n",(0,s.jsx)(t.h2,{id:"further-reading",children:"Further reading"}),"\n",(0,s.jsxs)(t.p,{children:["For more information, see ",(0,s.jsx)(t.a,{href:"https://walbourn.github.io/kmpkg-now-supports-targeting-xbox/",children:"this blog post"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["See also the ",(0,s.jsx)(t.a,{href:"https://github.com/microsoft/Xbox-GDK-Samples/tree/main/Samples/Tools/CMakeExample",children:"CMakeExample sample on GitHub"}),"."]})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>d});var s=n(96540);const r={},i=s.createContext(r);function o(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);