"use strict";(self.webpackChunkkumo_website=self.webpackChunkkumo_website||[]).push([[78306],{11499:(t,e,p)=>{p.r(e),p.d(e,{assets:()=>o,contentTitle:()=>s,default:()=>l,frontMatter:()=>h,metadata:()=>c,toc:()=>i});var n=p(74848),r=p(28453);const h={},s="http\u5ef6\u5c55\u9605\u8bfb",c={id:"cpp/krpc/http_derivatives",title:"http\u5ef6\u5c55\u9605\u8bfb",description:"http/h2\u534f\u8bae\u7684\u57fa\u672c\u7528\u6cd5\u89c1httpclient\u548chttpservice",source:"@site/versioned_docs/version-1.1.1/cpp/krpc/http_derivatives.mdx",sourceDirName:"cpp/krpc",slug:"/cpp/krpc/http_derivatives",permalink:"/docs/cpp/krpc/http_derivatives",draft:!1,unlisted:!1,tags:[],version:"1.1.1",frontMatter:{},sidebar:"docs",previous:{title:"http\u5ba2\u6237\u7aef",permalink:"/docs/cpp/krpc/http_client"},next:{title:"\u670d\u52a1\u6cbb\u7406",permalink:"/docs/cpp/krpc/combo_channel"}},o={},i=[{value:"http, h2",id:"http-h2",level:2},{value:"http, h2",id:"http-h2-1",level:2},{value:"h2",id:"h2grpc",level:2},{value:"h2+json",id:"h2json",level:2}];function d(t){const e={a:"a",h1:"h1",h2:"h2",header:"header",p:"p",...(0,r.R)(),...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.header,{children:(0,n.jsx)(e.h1,{id:"http\u5ef6\u5c55\u9605\u8bfb",children:"http\u5ef6\u5c55\u9605\u8bfb"})}),"\n",(0,n.jsxs)(e.p,{children:["http/h2\u534f\u8bae\u7684\u57fa\u672c\u7528\u6cd5\u89c1",(0,n.jsx)(e.a,{href:"/docs/cpp/krpc/http_client",children:"http_client"}),"\u548c",(0,n.jsx)(e.a,{href:"/docs/cpp/krpc/http_service",children:"http_service"})]}),"\n",(0,n.jsx)(e.p,{children:"\u4e0b\u6587\u4e2d\u7684\u5c0f\u8282\u540d\u5747\u4e3a\u53ef\u586b\u5165ChannelOptions.protocol\u4e2d\u7684\u534f\u8bae\u540d\u3002\u5192\u53f7\u540e\u7684\u5185\u5bb9\u662f\u534f\u8bae\u53c2\u6570\uff0c\u7528\u4e8e\u52a8\u6001\u9009\u62e9\u884d\u751f\u884c\u4e3a\uff0c\u4f46\u57fa\u672c\u534f\u8bae\u4ecd\u7136\u662fhttp/1.x\u6216http/2\uff0c\u6545\u8fd9\u4e9b\u534f\u8bae\u5728\u670d\u52a1\u7aef\u53ea\u4f1a\u88ab\u663e\u793a\u4e3ahttp\u6216h2/h2c\u3002"}),"\n",(0,n.jsxs)(e.h2,{id:"http-h2",children:["http",":json",", h2",":json"]}),"\n",(0,n.jsx)(e.p,{children:"\u5982\u679cpb request\u4e0d\u4e3a\u7a7a\uff0c\u5219\u4f1a\u88ab\u8f6c\u4e3ajson\u5e76\u4f5c\u4e3ahttp/h2\u8bf7\u6c42\u7684body\uff0c\u6b64\u65f6Controller.request_attachment()\u5fc5\u987b\u4e3a\u7a7a\u5426\u5219\u62a5\u9519\u3002"}),"\n",(0,n.jsx)(e.p,{children:"\u5982\u679cpb response\u4e0d\u4e3a\u7a7a\uff0c\u5219\u4f1a\u4ee5json\u89e3\u6790http/h2\u56de\u590d\u7684body\uff0c\u5e76\u8f6c\u586b\u81f3pb response\u7684\u5bf9\u5e94\u5b57\u6bb5\u3002"}),"\n",(0,n.jsxs)(e.p,{children:['http/1.x\u9ed8\u8ba4\u662f\u8fd9\u4e2a\u884c\u4e3a\uff0c\u6240\u4ee5"http"\u548c"http',":json",'"\u7b49\u4ef7\u3002']}),"\n",(0,n.jsxs)(e.h2,{id:"http-h2-1",children:["http",":proto",", h2",":proto"]}),"\n",(0,n.jsx)(e.p,{children:"\u5982\u679cpb request\u4e0d\u4e3a\u7a7a\uff0c\u5219\u4f1a\u628apb\u5e8f\u5217\u5316\u7ed3\u679c\u4f5c\u4e3ahttp/h2\u8bf7\u6c42\u7684body\uff0c\u6b64\u65f6Controller.request_attachment()\u5fc5\u987b\u4e3a\u7a7a\u5426\u5219\u62a5\u9519\u3002"}),"\n",(0,n.jsx)(e.p,{children:"\u5982\u679cpb response\u4e0d\u4e3a\u7a7a\uff0c\u5219\u4f1a\u4ee5pb\u5e8f\u5217\u5316\u683c\u5f0f\u89e3\u6790http/h2\u56de\u590d\u7684body\uff0c\u5e76\u586b\u81f3pb response\u3002"}),"\n",(0,n.jsxs)(e.p,{children:['http/2\u9ed8\u8ba4\u662f\u8fd9\u4e2a\u884c\u4e3a\uff0c\u6240\u4ee5"h2"\u548c"h2',":proto",'"\u7b49\u4ef7\u3002']}),"\n",(0,n.jsxs)(e.h2,{id:"h2grpc",children:["h2",":grpc"]}),"\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:"https://github.com/grpc",children:"gRPC"}),"\u7684\u9ed8\u8ba4\u534f\u8bae\uff0c\u5177\u4f53\u683c\u5f0f\u53ef\u9605\u8bfb",(0,n.jsx)(e.a,{href:"https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-HTTP2.mdx",children:"gRPC over HTTP2"})]}),"\n",(0,n.jsxs)(e.p,{children:['\u4f7f\u7528krpc\u7684\u5ba2\u6237\u7aef\u628aChannelOptions.protocol\u8bbe\u7f6e\u4e3a"h2',":grpc",'"\u4e00\u822c\u5c31\u80fd\u8fde\u901agRPC\u3002']}),"\n",(0,n.jsx)(e.p,{children:"\u4f7f\u7528krpc\u7684\u670d\u52a1\u7aef\u4e00\u822c\u65e0\u9700\u4fee\u6539\u4ee3\u7801\u5373\u53ef\u81ea\u52a8\u88abgRPC\u5ba2\u6237\u7aef\u8bbf\u95ee\u3002"}),"\n",(0,n.jsxs)(e.p,{children:['gRPC\u9ed8\u8ba4\u5e8f\u5217\u5316\u662fpb\u4e8c\u8fdb\u5236\u683c\u5f0f\uff0c\u6240\u4ee5"h2',":grpc",'"\u548c"h2',":grpc",'+proto"\u7b49\u4ef7\u3002']}),"\n",(0,n.jsx)(e.p,{children:"TODO: gRPC\u5176\u4ed6\u914d\u7f6e"}),"\n",(0,n.jsxs)(e.h2,{id:"h2json",children:["h2",":grpc","+json"]}),"\n",(0,n.jsxs)(e.p,{children:["\u8fd9\u4e2a\u534f\u8bae\u76f8\u6bd4h2",":grpc","\u5c31\u662f\u7528json\u5e8f\u5217\u5316\u7ed3\u679c\u4ee3\u66ffpb\u5e8f\u5217\u5316\u7ed3\u679c\u3002gRPC\u672a\u5fc5\u76f4\u63a5\u652f\u6301\u8fd9\u4e2a\u683c\u5f0f\uff0c\u5982grpc-go\u7528\u6237\u53ef\u53c2\u8003",(0,n.jsx)(e.a,{href:"https://github.com/johanbrandhorst/grpc-json-example/blob/master/codec/json.go",children:"\u8fd9\u91cc"}),"\u6ce8\u518c\u76f8\u5e94\u7684codec\u540e\u624d\u652f\u6301\u3002"]})]})}function l(t={}){const{wrapper:e}={...(0,r.R)(),...t.components};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(d,{...t})}):d(t)}},28453:(t,e,p)=>{p.d(e,{R:()=>s,x:()=>c});var n=p(96540);const r={},h=n.createContext(r);function s(t){const e=n.useContext(h);return n.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function c(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(r):t.components||r:s(t.components),n.createElement(h.Provider,{value:e},t.children)}}}]);