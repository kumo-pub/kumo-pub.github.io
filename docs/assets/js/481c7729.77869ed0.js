"use strict";(self.webpackChunkkumo_website=self.webpackChunkkumo_website||[]).push([[73158],{13532:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>p,frontMatter:()=>r,metadata:()=>t,toc:()=>o});var c=s(74848),i=s(28453);const r={date:"7/22/2024"},d="\u6e05\u5355\u6a21\u5f0f",t={id:"kmpkg/concepts/manifest-mode",title:"\u6e05\u5355\u6a21\u5f0f",description:"\u672c\u6587\u4ecb\u7ecd\u4e86 kmpkg \u7684\u6e05\u5355\u6a21\u5f0f\u6982\u5ff5\u3002",source:"@site/docs/kmpkg/concepts/manifest-mode.mdx",sourceDirName:"kmpkg/concepts",slug:"/kmpkg/concepts/manifest-mode",permalink:"/docs/next/kmpkg/concepts/manifest-mode",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{date:"7/22/2024"},sidebar:"docs",previous:{title:"Concept: \u529f\u80fd",permalink:"/docs/next/kmpkg/concepts/features"},next:{title:"\u652f\u6301\u4e3b\u673a",permalink:"/docs/next/kmpkg/concepts/supported-hosts"}},l={},o=[{value:"\u7aef\u53e3\u4e2d\u7684\u6e05\u5355\u6587\u4ef6",id:"\u7aef\u53e3\u4e2d\u7684\u6e05\u5355\u6587\u4ef6",level:2},{value:"\u5305\u6e05\u5355\u793a\u4f8b",id:"\u5305\u6e05\u5355\u793a\u4f8b",level:3},{value:"\u9879\u76ee\u4e2d\u7684\u6e05\u5355\u6587\u4ef6",id:"\u9879\u76ee\u4e2d\u7684\u6e05\u5355\u6587\u4ef6",level:2},{value:"\u9879\u76ee\u6e05\u5355\u793a\u4f8b",id:"\u9879\u76ee\u6e05\u5355\u793a\u4f8b",level:3},{value:"\u914d\u7f6e\u6587\u4ef6",id:"\u914d\u7f6e\u6587\u4ef6",level:2},{value:"\u914d\u7f6e\u6587\u4ef6\u793a\u4f8b",id:"\u914d\u7f6e\u6587\u4ef6\u793a\u4f8b",level:3},{value:"\u4ee5\u6e05\u5355\u6a21\u5f0f\u5b89\u88c5\u5305",id:"install-manifest-mode",level:2},{value:"\u4f7f\u7528\u9879\u76ee\u6e05\u5355\u4e2d\u7684\u529f\u80fd",id:"\u4f7f\u7528\u9879\u76ee\u6e05\u5355\u4e2d\u7684\u529f\u80fd",level:2},{value:"\u793a\u4f8b\uff1a\u9879\u76ee\u6e05\u5355\u4e2d\u7684\u529f\u80fd",id:"\u793a\u4f8b\u9879\u76ee\u6e05\u5355\u4e2d\u7684\u529f\u80fd",level:3},{value:"\u540e\u7eed\u6b65\u9aa4",id:"\u540e\u7eed\u6b65\u9aa4",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"\u6e05\u5355\u6a21\u5f0f",children:"\u6e05\u5355\u6a21\u5f0f"})}),"\n",(0,c.jsx)(n.p,{children:"\u672c\u6587\u4ecb\u7ecd\u4e86 kmpkg \u7684\u6e05\u5355\u6a21\u5f0f\u6982\u5ff5\u3002"}),"\n",(0,c.jsx)(n.p,{children:"##\u4ec0\u4e48\u662f\u6e05\u5355\u6a21\u5f0f\uff1f"}),"\n",(0,c.jsxs)(n.p,{children:["kmpkg\u6709\u4e24\u79cd\u8fd0\u884c\u6a21\u5f0f\uff1a",(0,c.jsx)(n.a,{href:"/docs/next/kmpkg/concepts/classic-mode",children:"\u7ecf\u5178\u6a21\u5f0f"}),"\u548cmanifest\n\u6a21\u5f0f\u3002\u5bf9\u4e8e\u5927\u591a\u6570\u7528\u6237\uff0c\u6211\u4eec\u5efa\u8bae\u4f7f\u7528\u6e05\u5355\u6a21\u5f0f\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["\u6e05\u5355\u6a21\u5f0f\u4f7f\u7528\u58f0\u660e\u6027 JSON \u6587\u4ef6\u6765\u63cf\u8ff0\u6709\u5173\u60a8\u7684\u5143\u6570\u636e\n\u9879\u76ee\u6216\u5305\u3002\u6e05\u5355\u6587\u4ef6\u9700\u8981\u5177\u6709\n",(0,c.jsx)(n.a,{href:"/docs/next/kmpkg/reference/kmpkg-json",children:(0,c.jsx)(n.code,{children:"kmpkg.json"})})," \u540d\u79f0\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["\u901a\u8fc7\u8fd0\u884c\u201ckmpkg install\u201d\u547d\u4ee4\u6765\u542f\u7528\u6e05\u5355\u6a21\u5f0f\n\u5de5\u4f5c\u76ee\u5f55\u4e2d\u7684\u6e05\u5355\u6587\u4ef6\uff08",(0,c.jsx)(n.code,{children:"kmpkg.json"}),"\uff09\u3002\u7ee7\u7eed\u9605\u8bfb\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\n\u5982\u4f55",(0,c.jsx)(n.a,{href:"#install-manifest-mode",children:"\u4ee5\u6e05\u5355\u6a21\u5f0f\u5b89\u88c5\u8f6f\u4ef6\u5305"}),"\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["\u8fd8\u9700\u8981\u6e05\u5355\u6a21\u5f0f\u624d\u80fd\u4f7f\u7528\u9ad8\u7ea7\u529f\u80fd\uff0c\u4f8b\u5982\n",(0,c.jsx)(n.a,{href:"/docs/next/kmpkg/users/versioning",children:"\u7248\u672c\u63a7\u5236"})," \u548c\n",(0,c.jsx)(n.a,{href:"/docs/next/kmpkg/concepts/registries",children:"\u81ea\u5b9a\u4e49\u6ce8\u518c\u8868"}),"\u3002"]}),"\n",(0,c.jsx)(n.h2,{id:"\u7aef\u53e3\u4e2d\u7684\u6e05\u5355\u6587\u4ef6",children:"\u7aef\u53e3\u4e2d\u7684\u6e05\u5355\u6587\u4ef6"}),"\n",(0,c.jsx)(n.p,{children:"\u6240\u6709 kmpkg \u7aef\u53e3\u5fc5\u987b\u5305\u542b\u4e00\u4e2a\u201ckmpkg.json\u201d\u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u63cf\u8ff0\u6709\u5173\u4ee5\u4e0b\u5185\u5bb9\u7684\u5143\u6570\u636e\uff1a\n\u4ed6\u4eec\u5b89\u88c5\u7684\u8f6f\u4ef6\u5305\u3002"}),"\n",(0,c.jsx)(n.p,{children:"kmpkg \u5c06\u5305\u6e05\u5355\u4e2d\u7684\u5143\u6570\u636e\u7528\u4e8e\u5404\u79cd\u76ee\u7684\uff0c\u4f8b\u5982\uff0c\n\u8ba1\u7b97\u4f9d\u8d56\u6811\uff0c\u6309\u540d\u79f0\u6216\u63cf\u8ff0\u641c\u7d22\u5305\uff0c\n\u89e3\u51b3\u7279\u5f81\u7b49"}),"\n",(0,c.jsx)(n.h3,{id:"\u5305\u6e05\u5355\u793a\u4f8b",children:"\u5305\u6e05\u5355\u793a\u4f8b"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-json",children:'{\n  "name": "fmt",\n  "version": "10.1.1",\n  "description": "Formatting library for C++. It can be used as a safe alternative to printf or as a fast alternative to IOStreams.",\n  "homepage": "https://github.com/fmtlib/fmt",\n  "license": "MIT",\n  "dependencies": [\n    {\n      "name": "kmpkg-cmake",\n      "host": true\n    },\n    {\n      "name": "kmpkg-cmake-config",\n      "host": true\n    }\n  ]\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"\u9879\u76ee\u4e2d\u7684\u6e05\u5355\u6587\u4ef6",children:"\u9879\u76ee\u4e2d\u7684\u6e05\u5355\u6587\u4ef6"}),"\n",(0,c.jsx)(n.p,{children:"\u5728\u9879\u76ee\u4e2d\u4f7f\u7528\u6e05\u5355\u6587\u4ef6\u7684\u4e3b\u8981\u76ee\u7684\u662f\u58f0\u660e\u60a8\u7684\n\u4f9d\u8d56\u5173\u7cfb\u3002\u4f7f\u7528\u9879\u76ee\u6e05\u5355\u65f6\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a\u7248\u672c\n\u7ea6\u675f\u548c\u8986\u76d6\u4ee5\u9501\u5b9a\u4f9d\u8d56\u9879\u7684\u7279\u5b9a\u7248\u672c\u3002\u8fd9\n\u8be5\u529f\u80fd\u5728\u7ecf\u5178\u6a21\u5f0f\u4e0b\u4e0d\u53ef\u7528\u3002"}),"\n",(0,c.jsx)(n.h3,{id:"\u9879\u76ee\u6e05\u5355\u793a\u4f8b",children:"\u9879\u76ee\u6e05\u5355\u793a\u4f8b"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-json",children:'{\n  "dependencies": [ "fmt", "zlib" ],\n  "builtin-baseline": "3426db05b996481ca31e95fff3734cf23e0f51bc",\n  "overrides": [\n    { "name": "zlib", "version": "1.2.8" }\n  ]\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"\u914d\u7f6e\u6587\u4ef6",children:"\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,c.jsxs)(n.p,{children:["kmpkg \u53ef\u4ee5\u901a\u8fc7 ",(0,c.jsx)(n.code,{children:"kmpkg-configuration.json"})," \u6587\u4ef6\u8fdb\u884c\u914d\u7f6e\u4ee5\u6dfb\u52a0\u66f4\u591a\n",(0,c.jsx)(n.a,{href:"/docs/next/kmpkg/concepts/registries",children:"\u5305\u6ce8\u518c\u8868"})," \u6216\n",(0,c.jsx)(n.a,{href:"/docs/next/kmpkg/concepts/overlay-ports",children:"\u8986\u76d6\u7aef\u53e3\u548c\u4e09\u5143\u7ec4"})," \u4f4d\u7f6e\u3002"]}),"\n",(0,c.jsx)(n.h3,{id:"\u914d\u7f6e\u6587\u4ef6\u793a\u4f8b",children:"\u914d\u7f6e\u6587\u4ef6\u793a\u4f8b"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-json",children:'{\n  "default-registry": {\n    "kind": "git",\n    "baseline": "7476f0d4e77d3333fbb249657df8251c28c4faae",\n    "repository": "https://gitee.com/kumo-pub/kmpkg"\n  },\n  "registries": [\n    {\n      "kind": "git",\n      "repository": "https://gitee.com/kumo-pub/kmpkg-docs",\n      "reference": "kmpkg-registry",\n      "baseline": "768f6a3ad9f9b6c4c2ff390137690cf26e3c3453",\n      "packages": [ "beicode", "beison" ]\n    }\n  ],\n  "overlay-ports": [\n    "C:\\\\dev\\\\my_kmpkg_ports"\n  ]\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"install-manifest-mode",children:"\u4ee5\u6e05\u5355\u6a21\u5f0f\u5b89\u88c5\u5305"}),"\n",(0,c.jsxs)(n.p,{children:["\u8981\u4f7f\u7528\u6e05\u5355\u6587\u4ef6\u5b89\u88c5\u8f6f\u4ef6\u5305\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528",(0,c.jsx)(n.a,{href:"/docs/next/kmpkg/commands/install",children:(0,c.jsx)(n.code,{children:"kmpkg install"})})," \u547d\u4ee4\uff0c\u4e0d\u5e26\u4efb\u4f55\u5305\u53c2\u6570\u3002\n\u8be5\u547d\u4ee4\u5fc5\u987b\u4ece\u5305\u542b\u6e05\u5355\u7684\u76ee\u5f55\u6267\u884c(",(0,c.jsx)(n.a,{href:"/docs/next/kmpkg/reference/kmpkg-json",children:(0,c.jsx)(n.code,{children:"kmpkg.json"})}),") \u6587\u4ef6\uff0c\u6216\u6e05\u5355\u7684\u8def\u5f84\n\u4f7f\u7528",(0,c.jsx)(n.code,{children:"--x-manifest-root=<path>"}),"\u9009\u9879\u63d0\u4f9b\u7684\u6587\u4ef6\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["\u4ee5\u6e05\u5355\u6a21\u5f0f\u5b89\u88c5\u7684\u8f6f\u4ef6\u5305\u4e0d\u4f1a\u5b89\u88c5\u5728\u5168\u5c40\u4e2d\n",(0,c.jsx)(n.a,{href:"/docs/next/kmpkg/reference/installation-tree-layout",children:(0,c.jsx)(n.code,{children:"installed"})})," \u76ee\u5f55\uff0c\u5982\u4e0b\u6240\u793a\n\u7ecf\u5178\u6a21\u5f0f\u3002\u76f8\u53cd\uff0c\u6bcf\u4e2a\u6e05\u5355\u90fd\u6709\u81ea\u5df1\u7684\u5b89\u88c5\u76ee\u5f55\uff0c\u540d\u4e3a\n",(0,c.jsx)(n.code,{children:"kmpkg_installed"}),"; ",(0,c.jsx)(n.code,{children:"kmpkg_installed"})," \u76ee\u5f55\u662f\u5728\u540c\u4e00\u4e2a\u76ee\u5f55\u4e2d\u521b\u5efa\u7684\n\u5305\u542b\u6e05\u5355\u6587\u4ef6\u7684\u76ee\u5f55\u3002"]}),"\n",(0,c.jsx)(n.p,{children:"\u6bcf\u4e2a\u6e05\u5355\u90fd\u6709\u72ec\u7acb\u7684\u5b89\u88c5\u6811\uff0c\u53ef\u4ee5\u5c06\u4e0d\u540c\u9879\u76ee\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u3002\u8fd9\u89c4\u907f\u4e86\u4e00\u4e2a\u5173\u952e\u7684\u9650\u5236\n\u7ecf\u5178\u6a21\u5f0f\uff0c\u4ec5\u5141\u8bb8\u5b89\u88c5\u6bcf\u4e2a\u7aef\u53e3\u7684\u4e00\u4e2a\u7248\u672c\u3002\u6e05\u5355\u6a21\u5f0f\u5c06\u6bcf\u4e2a\u9879\u76ee\u7684\u7aef\u53e3\u7248\u672c\u5206\u5f00\u3002"}),"\n",(0,c.jsx)(n.h2,{id:"\u4f7f\u7528\u9879\u76ee\u6e05\u5355\u4e2d\u7684\u529f\u80fd",children:"\u4f7f\u7528\u9879\u76ee\u6e05\u5355\u4e2d\u7684\u529f\u80fd"}),"\n",(0,c.jsxs)(n.p,{children:["\u6e05\u5355\u6587\u4ef6\u53ef\u4ee5\u5b9a\u4e49\u9644\u52a0\u7684\u529f\u80fd\u3001\u884c\u4e3a\u548c\n\u901a\u8fc7\u4f7f\u7528\u4f9d\u8d56\n",(0,c.jsx)(n.a,{href:"/docs/next/kmpkg/reference/kmpkg-json#features",children:(0,c.jsx)(n.code,{children:"features"})}),"\u3002"]}),"\n",(0,c.jsx)(n.p,{children:"\u5728\u60a8\u7684\u9879\u76ee\u4e2d\uff0c\u60a8\u53ef\u4ee5\u5b9a\u4e49\u529f\u80fd\u6765\u542f\u7528\u6216\u7981\u7528\u4f9d\u8d56\u9879\u9002\u7528\u4e8e\u60a8\u9879\u76ee\u7684\u67d0\u4e9b\u90e8\u5206\u3002\u4f8b\u5982\uff0c\u5982\u679c\u60a8\u7684\u9879\u76ee\u5305\u542b\u591a\u4e2a\n\u7ec4\u4ef6\uff0c\u60a8\u53ef\u80fd\u5e0c\u671b\u5728\u201c\u4f9d\u8d56\u9879\u201d\u4e2d\u4fdd\u7559\u5e38\u89c1\u7684\u4f9d\u8d56\u9879\u5217\u51fa\u4f46\u5c06\u5176\u4ed6\u4e00\u4e9b\u9650\u5236\u4e3a\u5176\u5404\u81ea\u7684\u7ec4\u4ef6\u3002"}),"\n",(0,c.jsx)(n.p,{children:"\u8981\u542f\u7528\u9879\u76ee\u7684\u529f\u80fd\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u65b9\u6cd5\u4e4b\u4e00\uff1a"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u5c06 ",(0,c.jsx)(n.a,{href:"/docs/next/kmpkg/commands/install#feature",children:(0,c.jsx)(n.code,{children:"--x-feature"})})," \u9009\u9879\u4f20\u9012\u7ed9\u60a8\u7684 ",(0,c.jsx)(n.code,{children:"kmpkg \u5b89\u88c5"}),"\u547d\u4ee4\u3002"]}),"\n",(0,c.jsxs)(n.li,{children:["\u5728 CMake \u4e0a\uff0c\u8bbe\u7f6e\n",(0,c.jsx)(n.a,{href:"/docs/next/kmpkg/users/buildsystems/cmake-integration",children:(0,c.jsx)(n.code,{children:"KMPKG_MANIFEST_FEATURES"})})," \u4e4b\u524d\n\u7b2c\u4e00\u6b21\u8c03\u7528\u201cproject()\u201d\u3002"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"\u793a\u4f8b\u9879\u76ee\u6e05\u5355\u4e2d\u7684\u529f\u80fd",children:"\u793a\u4f8b\uff1a\u9879\u76ee\u6e05\u5355\u4e2d\u7684\u529f\u80fd"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-json",children:'{\n  "name": "my-game",\n  "dependencies": [ "grpc" ],\n  "features": {\n    "client": {\n      "description": "client game executable",\n      "dependencies": [ "sdl2", "bullet3" ]\n    },\n    "server": {\n      "description": "multiplayer server executable",\n      "dependencies": [ "proxygen" ]\n    },\n    "tests": {\n      "description": "development tests",\n      "dependencies": [ "gtest" ]\n    }\n  }\n}\n'})}),"\n",(0,c.jsx)(n.p,{children:"\u8981\u4ec5\u6784\u5efa\u201c\u5ba2\u6237\u7aef\u201d\u7ec4\u4ef6\u7684\u4f9d\u8d56\u9879\uff0c\u8bf7\u8fd0\u884c\uff1a"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-Console",children:"kmpkg install --x-feature=client\n"})}),"\n",(0,c.jsx)(n.h2,{id:"\u540e\u7eed\u6b65\u9aa4",children:"\u540e\u7eed\u6b65\u9aa4"}),"\n",(0,c.jsx)(n.p,{children:"\u4ee5\u4e0b\u662f\u63a5\u4e0b\u6765\u8981\u5c1d\u8bd5\u7684\u4e00\u4e9b\u4efb\u52a1\uff1a"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\u5b8c\u6210",(0,c.jsx)(n.a,{href:"/docs/next/kmpkg/consume/manifest-mode",children:"\u6e05\u5355\u6a21\u5f0f\u6559\u7a0b"})]}),"\n",(0,c.jsxs)(n.li,{children:["\u9605\u8bfb ",(0,c.jsx)(n.a,{href:"/docs/next/kmpkg/reference/kmpkg-json",children:(0,c.jsx)(n.code,{children:"kmpkg.json"})})," \u5e76\u53c2\u8003\u6587\u7ae0",(0,c.jsx)(n.a,{href:"/docs/next/kmpkg/reference/kmpkg-configuration-json",children:(0,c.jsx)(n.code,{children:"kmpkg-configuration.json"})}),"\u3002"]}),"\n",(0,c.jsxs)(n.li,{children:["\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u9501\u5b9a\u60a8\u7684\u7248\u672c\u4ee5\u8fdb\u884c\u53ef\u91cd\u590d\u6784\u5efa",(0,c.jsx)(n.a,{href:"/docs/next/kmpkg/users/versioning.concepts",children:"\u7248\u672c\u63a7\u5236"})]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>t});var c=s(96540);const i={},r=c.createContext(i);function d(e){const n=c.useContext(r);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),c.createElement(r.Provider,{value:n},e.children)}}}]);