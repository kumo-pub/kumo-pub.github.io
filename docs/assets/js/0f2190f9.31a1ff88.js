"use strict";(self.webpackChunkkumo_website=self.webpackChunkkumo_website||[]).push([[54706],{40823:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>a,toc:()=>l});var r=t(74848),c=t(28453);const s={},o="URL Functions",a={id:"pollux/functions/presto/url",title:"URL Functions",description:"Introduction",source:"@site/versioned_docs/version-1.1.1/pollux/functions/presto/url.mdx",sourceDirName:"pollux/functions/presto",slug:"/pollux/functions/presto/url",permalink:"/docs/pollux/functions/presto/url",draft:!1,unlisted:!1,tags:[],version:"1.1.1",lastUpdatedBy:"Jeff lothar",lastUpdatedAt:1748143706e3,frontMatter:{},sidebar:"docs",previous:{title:"window",permalink:"/docs/pollux/functions/presto/window"},next:{title:"string",permalink:"/docs/pollux/functions/presto/string"}},i={},l=[{value:"Introduction",id:"introduction",level:2},{value:"Invalid URI&#39;s",id:"invalid-uris",level:2},{value:"Extraction Functions",id:"extraction-functions",level:2},{value:"Encoding Functions",id:"encoding-functions",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"url-functions",children:"URL Functions"})}),"\n",(0,r.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsxs)(n.p,{children:["The URL extraction functions extract components from HTTP URLs (or any valid URIs conforming to ",(0,r.jsx)(n.code,{children:"RFC 3986 <https://tools.ietf.org/html/rfc3986.html>"}),"_). The following syntax is supported:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"\n    [protocol:][//host[:port]][path][?query][#fragment]\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The extracted components do not contain URI syntax separators such as ",(0,r.jsx)(n.code,{children:":"})," , ",(0,r.jsx)(n.code,{children:"?"})," and ",(0,r.jsx)(n.code,{children:"#"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Consider for example the below URI:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"\n    http://www.ics.uci.edu/pub/ietf/uri/?k1=v1#Related\n\n    scheme    = http\n    authority = www.ics.uci.edu\n    path      = /pub/ietf/uri/\n    query     = k1=v1\n    fragment  = Related\n"})}),"\n",(0,r.jsx)(n.h2,{id:"invalid-uris",children:"Invalid URI's"}),"\n",(0,r.jsxs)(n.p,{children:["Well formed URI's should not contain ascii whitespace. ",(0,r.jsx)(n.code,{children:"Percent-encoded URI's <https://www.rfc-editor.org/rfc/rfc3986#section-2.1>"}),'_ should be followed by two hexadecimal\ndigits after the percent character "%". All the url extract functions will return null when passed an invalid uri.']}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"\n    # Examples of url functions with Invalid URI's.\n\n    # Invalid URI due to whitespace\n    SELECT url_extract_path('foo '); -- NULL (1 row)\n    SELECT url_extract_host('http://www.foo.com '); -- NULL (1 row)\n\n    # Invalid URI due to improper escaping of '%'\n    SELECT url_extract_path('https://www.ucu.edu.uy/agenda/evento/%%UCUrlCompartir%%'); -- NULL (1 row)\n    SELECT url_extract_host('https://www.ucu.edu.uy/agenda/evento/%%UCUrlCompartir%%'); -- NULL (1 row)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"extraction-functions",children:"Extraction Functions"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:"    url_extract_fragment(url) -> varchar\n\n    Returns the fragment identifier from ``url``.\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:"    url_extract_host(url) -> varchar\n\n    Returns the host from ``url``.\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:"    url_extract_parameter(url, name) -> varchar\n\n    Returns the value of the first query string parameter named ``name`` from ``url``. Parameter extraction is handled in the typical manner as specified by `RFC 1866#section-8.2.1 <https://tools.ietf.org/html/rfc1866.html#section-8.2.1>`_.\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:"    url_extract_path(url) -> varchar\n\n    Returns the path from ``url``.\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:"    url_extract_port(url) -> bigint\n\n    Returns the port number from ``url``. Returns NULL if port is missing.\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:"    url_extract_protocol(url) -> varchar\n\n    Returns the protocol from ``url``.\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:"    url_extract_query(url) -> varchar\n\n    Returns the query string from ``url``.\n"})}),"\n",(0,r.jsx)(n.h2,{id:"encoding-functions",children:"Encoding Functions"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:"    url_encode(value) -> varchar\n\n    Escapes ``value`` by encoding it so that it can be safely included in\n    URL query parameter names and values:\n\n    * Alphanumeric characters are not encoded.\n    * The characters ``.``, ``-``, ``*`` and ``_`` are not encoded.\n    * The ASCII space character is encoded as ``+``.\n    * All other characters are converted to UTF-8 and the bytes are encoded\n      as the string ``%XX`` where ``XX`` is the uppercase hexadecimal\n      value of the UTF-8 byte.\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:"    url_decode(value) -> varchar\n\n    Unescapes the URL encoded ``value``.\n    This function is the inverse of :func:`url_encode`.\n"})})]})}function u(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var r=t(96540);const c={},s=r.createContext(c);function o(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);