(self.webpackChunkkumo_website=self.webpackChunkkumo_website||[]).push([[94607],{86424:(e,s,r)=>{e.exports={src:{srcSet:r.p+"assets/ideal-img/foobar_kvar.c38d9ff.530.png 530w",images:[{path:r.p+"assets/ideal-img/foobar_kvar.c38d9ff.530.png",width:530,height:392}],src:r.p+"assets/ideal-img/foobar_kvar.c38d9ff.530.png",toString:function(){return r.p+"assets/ideal-img/foobar_kvar.c38d9ff.530.png"},placeholder:void 0,width:530,height:392},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAHCAYAAAAxrNxjAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAyElEQVR4nG2MQWqDQABFPWCz9AIuPZIighcR0nTTiLht4kqdQUfUDComjPpK3ZX2w+dtHs8KwxDf97Ftm7fTCcdxcF0Xz/OIooggCA5al48LcRzzfj5zvX5yu9/J85wkSciy7GCaplhaa8ZxZJ5n9n4AY/hvlhQCUVVUQvKQkvXrhhGSbdt+3arKkrIoEFLSti2sK2zb36JqGuq6plGKruuYioJpGJiXBTNN7A/NPk1YPxWlFH3XM9YNS6N4PZ+8jGHVmq0oD/EbR+X7Z7XEprkAAAAASUVORK5CYII="}},9190:(e,s,r)=>{e.exports={src:{srcSet:r.p+"assets/ideal-img/foobar_latency_cdf.0a216cd.640.png 640w,"+r.p+"assets/ideal-img/foobar_latency_cdf.cf9533f.819.png 819w",images:[{path:r.p+"assets/ideal-img/foobar_latency_cdf.0a216cd.640.png",width:640,height:175},{path:r.p+"assets/ideal-img/foobar_latency_cdf.cf9533f.819.png",width:819,height:224}],src:r.p+"assets/ideal-img/foobar_latency_cdf.0a216cd.640.png",toString:function(){return r.p+"assets/ideal-img/foobar_latency_cdf.0a216cd.640.png"},placeholder:void 0,width:640,height:175},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAADCAYAAACqPZ51AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAU0lEQVR4nF3IywqAMAxE0f7/L7pSUKn0YRKdtKsRCt24ONxhwhUjU8pUVbo7ARCYBV/4+IOIsHcfWsPQ29zOBuWTFwbTQqk7TU7affyc1LLS6sYPvipzB5L52jAAAAAASUVORK5CYII="}},29072:(e,s,r)=>{e.exports={src:{srcSet:r.p+"assets/ideal-img/full_worker_usage.3fcb0f9.640.png 640w,"+r.p+"assets/ideal-img/full_worker_usage.864d100.791.png 791w",images:[{path:r.p+"assets/ideal-img/full_worker_usage.3fcb0f9.640.png",width:640,height:364},{path:r.p+"assets/ideal-img/full_worker_usage.864d100.791.png",width:791,height:450}],src:r.p+"assets/ideal-img/full_worker_usage.3fcb0f9.640.png",toString:function(){return r.p+"assets/ideal-img/full_worker_usage.3fcb0f9.640.png"},placeholder:void 0,width:640,height:364},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAgklEQVR4nE2OQQ6EMAwD+/+vFkEb4qQpIK+a1a44zMWKMy61Vm5bpYjQzP5AT0I7oZIUAHyeh3NejJic80u4cg7njEE3sIh0Sj/Y2049Ow1nsjJVEDCuZ2U/drbWkhX81JrKl1pVeV13at8MByMGIyKLxQx0W8OFBuFwTXKGGd09Dz9m9Oghjfl1lgAAAABJRU5ErkJggg=="}},64131:(e,s,r)=>{e.exports={src:{srcSet:r.p+"assets/ideal-img/full_worker_usage_2.65c2318.640.png 640w,"+r.p+"assets/ideal-img/full_worker_usage_2.35ef220.810.png 810w",images:[{path:r.p+"assets/ideal-img/full_worker_usage_2.65c2318.640.png",width:640,height:358},{path:r.p+"assets/ideal-img/full_worker_usage_2.35ef220.810.png",width:810,height:453}],src:r.p+"assets/ideal-img/full_worker_usage_2.65c2318.640.png",toString:function(){return r.p+"assets/ideal-img/full_worker_usage_2.65c2318.640.png"},placeholder:void 0,width:640,height:358},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAgUlEQVR4nD2NWwqAMAwEe/+jWlCT5lmRlZTixxACuzvt6Ad672BmmNmPCm8IZoqmqnjfF8/zIHNizomZgQxF1s1AZRrTDaYLRCdkEEzHWmG+oWqLMrTrOkF3hSukcLOFDlqF0psKmohsbf5EOMJl/1vtXguylEV4rQpEBtx9ERH4AGqR6DWZtEGDAAAAAElFTkSuQmCC"}},99229:(e,s,r)=>{e.exports={src:{srcSet:r.p+"assets/ideal-img/high_cpu_usage.e72e60d.640.png 640w,"+r.p+"assets/ideal-img/high_cpu_usage.3f04beb.790.png 790w",images:[{path:r.p+"assets/ideal-img/high_cpu_usage.e72e60d.640.png",width:640,height:366},{path:r.p+"assets/ideal-img/high_cpu_usage.3f04beb.790.png",width:790,height:452}],src:r.p+"assets/ideal-img/high_cpu_usage.e72e60d.640.png",toString:function(){return r.p+"assets/ideal-img/high_cpu_usage.e72e60d.640.png"},placeholder:void 0,width:640,height:366},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAgElEQVR4nF2O2woDMQhE8/+/GsgmOuZiukyJLUvpw2FEcI4p58xSClWVvfcHs5NGaA3SWd73TXfnWk73/bDWoq8RR6m1SmlXoNpopoFKJSA0KAEwXaWw1osi8qe2byqhjQkw7v0K7VF98meeRjuN5+HRlQZhN+EcCIDGOZRjIJrfgAnoQ+SigHcAAAAASUVORK5CYII="}},23795:(e,s,r)=>{e.exports={src:{srcSet:r.p+"assets/ideal-img/kthread_concurrency_1.2feafd3.460.png 460w",images:[{path:r.p+"assets/ideal-img/kthread_concurrency_1.2feafd3.460.png",width:460,height:375}],src:r.p+"assets/ideal-img/kthread_concurrency_1.2feafd3.460.png",toString:function(){return r.p+"assets/ideal-img/kthread_concurrency_1.2feafd3.460.png"},placeholder:void 0,width:460,height:375},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAICAYAAADA+m62AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA8ElEQVR4nDWPTW7CMBCFfTvIqpyDU0SinAEpYQOimyJUVnCablokRP7s2DUkdshX2WpHepofvTdvRpzPZ44fR15mM6bTKUmSMJlMmM/nHA4H3vd7TqcTIs9z1us1q9WKPM/Isozd7o3tdsPrcslisSBNU0Rd1ygl+b5cKEvJ8/lESYVSLeM44pxDSokoioKyLDHG4v2A9x5jTESoA3EYBkTTNFHRNC3WPnDOY62l67pI+oe4Xq/cbjXaaFql47DVbdzo+p7+D0JrzY+1GHNnGEZCBMtwX+hiHsfwTIVSKtrLzy/cvaN/PHBVhVcqioLwF60IHGSVzf2UAAAAAElFTkSuQmCC"}},78040:(e,s,r)=>{e.exports={src:{srcSet:r.p+"assets/ideal-img/kthread_concurrency_2.c14b60f.640.png 640w,"+r.p+"assets/ideal-img/kthread_concurrency_2.6634c64.765.png 765w",images:[{path:r.p+"assets/ideal-img/kthread_concurrency_2.c14b60f.640.png",width:640,height:62},{path:r.p+"assets/ideal-img/kthread_concurrency_2.6634c64.765.png",width:765,height:74}],src:r.p+"assets/ideal-img/kthread_concurrency_2.c14b60f.640.png",toString:function(){return r.p+"assets/ideal-img/kthread_concurrency_2.c14b60f.640.png"},placeholder:void 0,width:640,height:62},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAABCAYAAADn9T9+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAMElEQVR4nB3DsQkAMAgAwey/iJ0O4TA2sRDU9gM5uJN5cXdEBDUlIqiqf3fpbmaGB8gjI/7LxW1RAAAAAElFTkSuQmCC"}},99169:(e,s,r)=>{e.exports={src:{srcSet:r.p+"assets/ideal-img/kthread_concurrency_3.698695b.399.png 399w",images:[{path:r.p+"assets/ideal-img/kthread_concurrency_3.698695b.399.png",width:399,height:39}],src:r.p+"assets/ideal-img/kthread_concurrency_3.698695b.399.png",toString:function(){return r.p+"assets/ideal-img/kthread_concurrency_3.698695b.399.png"},placeholder:void 0,width:399,height:39},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAABCAYAAADn9T9+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAALklEQVR4nAXBxw0AIAwAMfYflJrQhJTA57BDqRkRRVVoTVhz4+9yRsdTxFPGzfgG2iYAuycrrAAAAABJRU5ErkJggg=="}},94524:(e,s,r)=>{e.exports={src:{srcSet:r.p+"assets/ideal-img/kthread_creation_qps.817ed84.640.png 640w,"+r.p+"assets/ideal-img/kthread_creation_qps.48c521c.789.png 789w",images:[{path:r.p+"assets/ideal-img/kthread_creation_qps.817ed84.640.png",width:640,height:232},{path:r.p+"assets/ideal-img/kthread_creation_qps.48c521c.789.png",width:789,height:286}],src:r.p+"assets/ideal-img/kthread_creation_qps.817ed84.640.png",toString:function(){return r.p+"assets/ideal-img/kthread_creation_qps.817ed84.640.png"},placeholder:void 0,width:640,height:232},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAECAYAAAC3OK7NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAWElEQVR4nHXNsRLDMAwCUP//p3qpIiSheCFnp0uHDu9Y4BhzTpmZslJrrb/GLlXVwcJXqHamiwnBTQNw3U0xQ5UQeYvsd8g+gNAIuPz66DpMEXGuuvlz/QClwpsL5oTogAAAAABJRU5ErkJggg=="}},84788:(e,s,r)=>{e.exports={src:{srcSet:r.p+"assets/ideal-img/normal_cpu_usage.efcae84.640.png 640w,"+r.p+"assets/ideal-img/normal_cpu_usage.0ded2ba.800.png 800w",images:[{path:r.p+"assets/ideal-img/normal_cpu_usage.efcae84.640.png",width:640,height:366},{path:r.p+"assets/ideal-img/normal_cpu_usage.0ded2ba.800.png",width:800,height:457}],src:r.p+"assets/ideal-img/normal_cpu_usage.efcae84.640.png",toString:function(){return r.p+"assets/ideal-img/normal_cpu_usage.efcae84.640.png"},placeholder:void 0,width:640,height:366},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAg0lEQVR4nFWOyw7CMAwE8///StLGj8Ru0KAUBOIw8l68s6XWB7VWRAV3f2OGacdMvhQzZ60nmUlGknkR4cR0IiaZgalSRDrSj5vd4rtBT0R+BjOjtNY4jkbvJ+72QVE574fNzkXVuNYiIokIIq63do5/tZsyfA/e2s4cyhiC6r7jZutfhvboTTrIDosAAAAASUVORK5CYII="}},92486:(e,s,r)=>{e.exports={src:{srcSet:r.p+"assets/ideal-img/normal_worker_usage.5576ed0.640.png 640w,"+r.p+"assets/ideal-img/normal_worker_usage.bf70b6d.800.png 800w",images:[{path:r.p+"assets/ideal-img/normal_worker_usage.5576ed0.640.png",width:640,height:358},{path:r.p+"assets/ideal-img/normal_worker_usage.bf70b6d.800.png",width:800,height:448}],src:r.p+"assets/ideal-img/normal_worker_usage.5576ed0.640.png",toString:function(){return r.p+"assets/ideal-img/normal_worker_usage.5576ed0.640.png"},placeholder:void 0,width:640,height:358},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAgklEQVR4nE3NSwoEMQhF0ex/qVVQbRk/0RBeEzuDHlwQRE+7rgv3fYOZYWYw00pVIf2tVBhtL9dayJyITOQpIhBDkRkQETRmAr+fal+b9qozQaVD1SGiaM/zgIjwEhX3461mlc0eer+dcyLicKcxBsY/bSZw2wQXOVyr/clN4e4lfAFkD+gfZjCa6wAAAABJRU5ErkJggg=="}},95363:(e,s,r)=>{e.exports={src:{srcSet:r.p+"assets/ideal-img/rpcz.72f340d.640.png 640w,"+r.p+"assets/ideal-img/rpcz.00f7dc2.820.png 820w",images:[{path:r.p+"assets/ideal-img/rpcz.72f340d.640.png",width:640,height:363},{path:r.p+"assets/ideal-img/rpcz.00f7dc2.820.png",width:820,height:465}],src:r.p+"assets/ideal-img/rpcz.72f340d.640.png",toString:function(){return r.p+"assets/ideal-img/rpcz.72f340d.640.png"},placeholder:void 0,width:640,height:363},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAz0lEQVR4nAXB21KCQACAYd6Ux7BnsHepbOAObKYbRsEUkdLWZZezHK1uUi/6+z7Dsm3up1NM0+RuMsG2ZsyeHrCeH3lxHVzHwXVdjLflEhFFlFKi4g828xD/NWAxX7PzQ+JVwOc2wsiUQmtNX5WkMidcXTkcflhv/lBqIM81fT9gJPKI0pqhrkiTAj+4EcdnfP+CEA06lbRthyGFQCYJXVWQiJSF98s2HPC8K/t9Q6IEp7rBKLOMqij56lqq/MR7fOEov9ntbuTZSFUXjOOZf9fK0RqOi7IcAAAAAElFTkSuQmCC"}},27156:(e,s,r)=>{e.exports={src:{srcSet:r.p+"assets/ideal-img/rpcz_2.2525e35.640.png 640w,"+r.p+"assets/ideal-img/rpcz_2.b233c06.1030.png 1030w",images:[{path:r.p+"assets/ideal-img/rpcz_2.2525e35.640.png",width:640,height:106},{path:r.p+"assets/ideal-img/rpcz_2.b233c06.1030.png",width:1030,height:171}],src:r.p+"assets/ideal-img/rpcz_2.2525e35.640.png",toString:function(){return r.p+"assets/ideal-img/rpcz_2.2525e35.640.png"},placeholder:void 0,width:640,height:106},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAACCAYAAABhYU3QAAAACXBIWXMAAAsTAAALEwEAmpwYAAAARklEQVR4nEXFsQlAIQxAQTc3C1kqpBFX8YMgEowbPMHmF8eFnDMxRkSEUgopJVSV1tpTa31C/zpmxpyTMQZrLc5x9t64/18s2UPbynXs0wAAAABJRU5ErkJggg=="}},43837:(e,s,r)=>{e.exports={src:{srcSet:r.p+"assets/ideal-img/rpcz_3.1c543ba.640.png 640w,"+r.p+"assets/ideal-img/rpcz_3.57c689e.1030.png 1030w",images:[{path:r.p+"assets/ideal-img/rpcz_3.1c543ba.640.png",width:640,height:68},{path:r.p+"assets/ideal-img/rpcz_3.57c689e.1030.png",width:1030,height:110}],src:r.p+"assets/ideal-img/rpcz_3.1c543ba.640.png",toString:function(){return r.p+"assets/ideal-img/rpcz_3.1c543ba.640.png"},placeholder:void 0,width:640,height:68},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAABCAYAAADn9T9+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAMUlEQVR4nAXBwQoAEBBFUf//i1NMYkHZEb1ZXOek5oU1Jr1WmjvZjLs37xykQBIRwQf5KSXKEv7MXwAAAABJRU5ErkJggg=="}},4105:(e,s,r)=>{e.exports={src:{srcSet:r.p+"assets/ideal-img/trace_printf.232b2cc.640.png 640w,"+r.p+"assets/ideal-img/trace_printf.94641b6.683.png 683w",images:[{path:r.p+"assets/ideal-img/trace_printf.232b2cc.640.png",width:640,height:54},{path:r.p+"assets/ideal-img/trace_printf.94641b6.683.png",width:683,height:58}],src:r.p+"assets/ideal-img/trace_printf.232b2cc.640.png",toString:function(){return r.p+"assets/ideal-img/trace_printf.232b2cc.640.png"},placeholder:void 0,width:640,height:54},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAABCAYAAADn9T9+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAMElEQVR4nAXBOQ4AIAgAQf//QiyxJEYbDhOKdWbIFJYqb2/KjDSjzqXD6Qjanc7iA/21JfHMJEbPAAAAAElFTkSuQmCC"}},27981:(e,s,r)=>{"use strict";r.r(s),r.d(s,{assets:()=>z,contentTitle:()=>y,default:()=>K,frontMatter:()=>V,metadata:()=>Y,toc:()=>M});var A=r(74848),i=r(28453),n=r(29072),a=r.n(n),c=r(92486),t=r.n(c),p=r(99229),d=r.n(p),g=r(84788),l=r.n(g),h=r(94524),o=r.n(h),u=r(23795),m=r.n(u),_=r(78040),w=r.n(_),f=r(99169),k=r.n(f),x=r(64131),E=r.n(x),b=r(95363),j=r.n(b),v=r(27156),S=r.n(v),R=r(4105),C=r.n(R),U=r(43837),B=r.n(U),T=r(86424),I=r.n(T),X=r(9190),Q=r.n(X);const V={},y="rpc\u8c03\u8bd5",Y={id:"cpp/krpc/server_debugging",title:"rpc\u8c03\u8bd5",description:"1.\u68c0\u67e5\u5de5\u4f5c\u7ebf\u7a0b\u7684\u6570\u91cf",source:"@site/docs/cpp/krpc/server_debugging.mdx",sourceDirName:"cpp/krpc",slug:"/cpp/krpc/server_debugging",permalink:"/docs/next/cpp/krpc/server_debugging",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedBy:"Jeff lothar",lastUpdatedAt:1748081772e3,frontMatter:{},sidebar:"docs",previous:{title:"\u81ea\u9002\u5e94\u9650\u6d41",permalink:"/docs/next/cpp/krpc/auto_concurrency_limiter"},next:{title:"\u641c\u7d22\u5e94\u7528\u5f00\u53d1",permalink:"/docs/next/category/\u641c\u7d22\u5e94\u7528\u5f00\u53d1"}},z={},M=[{value:"1.\u68c0\u67e5\u5de5\u4f5c\u7ebf\u7a0b\u7684\u6570\u91cf",id:"1\u68c0\u67e5\u5de5\u4f5c\u7ebf\u7a0b\u7684\u6570\u91cf",level:2},{value:"2.\u68c0\u67e5CPU\u7684\u4f7f\u7528\u7a0b\u5ea6",id:"2\u68c0\u67e5cpu\u7684\u4f7f\u7528\u7a0b\u5ea6",level:2},{value:"3.\u5b9a\u4f4d\u95ee\u9898",id:"3\u5b9a\u4f4d\u95ee\u9898",level:2},{value:"3.1 \u5b9a\u4f4dcpu-bound\u95ee\u9898",id:"31-\u5b9a\u4f4dcpu-bound\u95ee\u9898",level:3},{value:"\u6392\u9664\u4e0a\u6e38\u5206\u6d41\u4e0d\u5747\u7684\u5acc\u7591",id:"\u6392\u9664\u4e0a\u6e38\u5206\u6d41\u4e0d\u5747\u7684\u5acc\u7591",level:4},{value:"\u4f18\u5316\u5355\u673a\u6027\u80fd",id:"\u4f18\u5316\u5355\u673a\u6027\u80fd",level:4},{value:"3.2 \u5b9a\u4f4dio-bound\u95ee\u9898",id:"32-\u5b9a\u4f4dio-bound\u95ee\u9898",level:3},{value:"\u6392\u9664\u5de5\u4f5c\u7ebf\u7a0b\u6570\u4e0d\u591f\u7684\u5acc\u7591",id:"\u6392\u9664\u5de5\u4f5c\u7ebf\u7a0b\u6570\u4e0d\u591f\u7684\u5acc\u7591",level:4},{value:"\u6392\u9664\u9501\u7684\u5acc\u7591",id:"\u6392\u9664\u9501\u7684\u5acc\u7591",level:4},{value:"\u4f7f\u7528rpcz",id:"\u4f7f\u7528rpcz",level:4},{value:"\u4f7f\u7528kvar",id:"\u4f7f\u7528kvar",level:4},{value:"\u53ea\u4f7f\u7528\u4e86krpc client",id:"\u53ea\u4f7f\u7528\u4e86krpc-client",level:4}];function G(e){const s={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(s.header,{children:(0,A.jsx)(s.h1,{id:"rpc\u8c03\u8bd5",children:"rpc\u8c03\u8bd5"})}),"\n",(0,A.jsx)(s.h2,{id:"1\u68c0\u67e5\u5de5\u4f5c\u7ebf\u7a0b\u7684\u6570\u91cf",children:"1.\u68c0\u67e5\u5de5\u4f5c\u7ebf\u7a0b\u7684\u6570\u91cf"}),"\n",(0,A.jsxs)(s.p,{children:["\u67e5\u770b /vars/kthread_worker_",(0,A.jsx)(s.strong,{children:"count"})," \u548c /vars/kthread_worker_",(0,A.jsx)(s.strong,{children:"usage"}),"\u3002\u5206\u522b\u662f\u5de5\u4f5c\u7ebf\u7a0b\u7684\u4e2a\u6570\uff0c\u548c\u6b63\u5728\u88ab\u4f7f\u7528\u7684\u5de5\u4f5c\u7ebf\u7a0b\u4e2a\u6570\u3002"]}),"\n",(0,A.jsxs)(s.blockquote,{children:["\n",(0,A.jsx)(s.p,{children:"\u5982\u679cusage\u548ccount\u63a5\u8fd1\uff0c\u8bf4\u660e\u7ebf\u7a0b\u4e0d\u591f\u7528\u4e86\u3002"}),"\n"]}),"\n",(0,A.jsx)(s.p,{children:"\u6bd4\u5982\uff0c\u4e0b\u56fe\u4e2d\u670924\u4e2a\u5de5\u4f5c\u7ebf\u7a0b\uff0c\u6b63\u5728\u4f7f\u7528\u7684\u662f23.93\u4e2a\uff0c\u8bf4\u660e\u6240\u6709\u7684\u5de5\u4f5c\u7ebf\u7a0b\u90fd\u88ab\u6253\u6ee1\u4e86\uff0c\u4e0d\u591f\u7528\u4e86\u3002"}),"\n","\n",(0,A.jsx)("img",{src:a()}),"\n",(0,A.jsx)(s.p,{children:"\u4e0b\u56fe\u4e2d\u6b63\u5728\u4f7f\u7528\u7684\u53ea\u67092.36\u4e2a\uff0c\u5de5\u4f5c\u7ebf\u7a0b\u660e\u663e\u662f\u8db3\u591f\u7684\u3002"}),"\n","\n",(0,A.jsx)("img",{src:t()}),"\n",(0,A.jsxs)(s.p,{children:["\u628a /vars/kthread_worker_count;kthread_worker_usage?expand \u62fc\u5728\u670d\u52a1url\u540e\u76f4\u63a5\u770b\u5230\u8fd9\u4e24\u5e45\u56fe\uff0c\u5c31\u50cf",(0,A.jsx)(s.a,{href:"http://krpc.baidu.com:8765/vars/kthread_worker_count;kthread_worker_usage?expand",children:"\u8fd9\u6837"}),"\u3002"]}),"\n",(0,A.jsx)(s.h2,{id:"2\u68c0\u67e5cpu\u7684\u4f7f\u7528\u7a0b\u5ea6",children:"2.\u68c0\u67e5CPU\u7684\u4f7f\u7528\u7a0b\u5ea6"}),"\n",(0,A.jsxs)(s.p,{children:["\u67e5\u770b /vars/system_core_",(0,A.jsx)(s.strong,{children:"count"})," \u548c /vars/process_cpu_",(0,A.jsx)(s.strong,{children:"usage"}),"\u3002\u5206\u522b\u662fcpu\u6838\u5fc3\u7684\u4e2a\u6570\uff0c\u548c\u6b63\u5728\u4f7f\u7528\u7684cpu\u6838\u6570\u3002"]}),"\n",(0,A.jsxs)(s.blockquote,{children:["\n",(0,A.jsx)(s.p,{children:"\u5982\u679cusage\u548ccount\u63a5\u8fd1\uff0c\u8bf4\u660eCPU\u4e0d\u591f\u7528\u4e86\u3002"}),"\n"]}),"\n",(0,A.jsx)(s.p,{children:"\u4e0b\u56fe\u4e2dcpu\u6838\u6570\u4e3a24\uff0c\u6b63\u5728\u4f7f\u7528\u7684\u6838\u5fc3\u6570\u662f20.9\u4e2a\uff0cCPU\u662f\u74f6\u9888\u4e86\u3002"}),"\n","\n",(0,A.jsx)("img",{src:d()}),"\n",(0,A.jsx)(s.p,{children:"\u4e0b\u56fe\u4e2d\u6b63\u5728\u4f7f\u7528\u7684\u6838\u5fc3\u6570\u662f2.06\uff0cCPU\u662f\u591f\u7528\u7684\u3002"}),"\n","\n",(0,A.jsx)("img",{src:l()}),"\n",(0,A.jsx)(s.h2,{id:"3\u5b9a\u4f4d\u95ee\u9898",children:"3.\u5b9a\u4f4d\u95ee\u9898"}),"\n",(0,A.jsx)(s.p,{children:"\u5982\u679cprocess_cpu_usage\u548ckthread_worker_usage\u63a5\u8fd1\uff0c\u8bf4\u660e\u662fcpu-bound\uff0c\u5de5\u4f5c\u7ebf\u7a0b\u5927\u90e8\u5206\u65f6\u95f4\u5728\u505a\u8ba1\u7b97\u3002"}),"\n",(0,A.jsx)(s.p,{children:"\u5982\u679cprocess_cpu_usage\u660e\u663e\u5c0f\u4e8ekthread_worker_usage\uff0c\u8bf4\u660e\u662fio-bound\uff0c\u5de5\u4f5c\u7ebf\u7a0b\u5927\u90e8\u5206\u65f6\u95f4\u5728\u963b\u585e\u3002"}),"\n",(0,A.jsx)(s.p,{children:"1 - process_cpu_usage / kthread_worker_usage\u5c31\u662f\u5927\u7ea6\u5728\u963b\u585e\u4e0a\u82b1\u8d39\u7684\u65f6\u95f4\u6bd4\u4f8b\uff0c\u6bd4\u5982process_cpu_usage = 2.4\uff0ckthread_worker_usage = 18.5\uff0c\u90a3\u4e48\u5de5\u4f5c\u7ebf\u7a0b\u5927\u7ea6\u82b1\u8d39\u4e8687.1% \u7684\u65f6\u95f4\u5728\u963b\u585e\u4e0a\u3002"}),"\n",(0,A.jsx)(s.h3,{id:"31-\u5b9a\u4f4dcpu-bound\u95ee\u9898",children:"3.1 \u5b9a\u4f4dcpu-bound\u95ee\u9898"}),"\n",(0,A.jsx)(s.p,{children:"\u539f\u56e0\u53ef\u80fd\u662f\u5355\u673a\u6027\u80fd\u4e0d\u8db3\uff0c\u6216\u4e0a\u6e38\u5206\u6d41\u4e0d\u5747\u3002"}),"\n",(0,A.jsx)(s.h4,{id:"\u6392\u9664\u4e0a\u6e38\u5206\u6d41\u4e0d\u5747\u7684\u5acc\u7591",children:"\u6392\u9664\u4e0a\u6e38\u5206\u6d41\u4e0d\u5747\u7684\u5acc\u7591"}),"\n",(0,A.jsxs)(s.p,{children:["\u5728\u4e0d\u540c\u670d\u52a1\u7684",(0,A.jsx)(s.a,{href:"http://krpc.baidu.com:8765/vars",children:"vars\u754c\u9762"}),"\u8f93\u5165qps\uff0c\u67e5\u770b\u4e0d\u540c\u7684qps\u662f\u5426\u7b26\u5408\u9884\u671f\uff0c\u5c31\u50cf\u8fd9\u6837\uff1a"]}),"\n","\n",(0,A.jsx)("img",{src:o()}),"\n",(0,A.jsx)(s.p,{children:"\u6216\u8005\u5728\u547d\u4ee4\u884c\u4e2d\u7528curl\u76f4\u63a5\u8bbf\u95ee\uff0c\u50cf\u8fd9\u6837\uff1a"}),"\n",(0,A.jsx)(s.pre,{children:(0,A.jsx)(s.code,{className:"language-shell",children:"$ curl krpc.baidu.com:8765/vars/*qps*\nkthread_creation_qps : 95\nrpc_server_8765_example_echo_service_echo_qps : 57\n"})}),"\n",(0,A.jsxs)(s.p,{children:["\u5982\u679c\u4e0d\u540c\u673a\u5668\u7684\u5206\u6d41\u786e\u5b9e\u4e0d\u5747\uff0c\u4e14\u96be\u4ee5\u89e3\u51b3\uff0c\u53ef\u4ee5\u8003\u8651",(0,A.jsx)(s.a,{href:"/docs/next/cpp/krpc/server#%E9%99%90%E5%88%B6%E6%9C%80%E5%A4%A7%E5%B9%B6%E5%8F%91",children:"\u9650\u5236\u6700\u5927\u5e76\u53d1"}),"\u3002"]}),"\n",(0,A.jsx)(s.h4,{id:"\u4f18\u5316\u5355\u673a\u6027\u80fd",children:"\u4f18\u5316\u5355\u673a\u6027\u80fd"}),"\n",(0,A.jsxs)(s.p,{children:["\u8bf7\u4f7f\u7528",(0,A.jsx)(s.a,{href:"/docs/next/cpp/krpc/cpu_profiler",children:"CPU profiler"}),"\u5206\u6790\u7a0b\u5e8f\u7684\u70ed\u70b9\uff0c\u7528\u6570\u636e\u9a71\u52a8\u4f18\u5316\u3002\u4e00\u822c\u6765\u8bf4\u4e00\u4e2a\u5361\u987f\u7684cpu-bound\u7a0b\u5e8f\u4e00\u822c\u80fd\u770b\u5230\u663e\u8457\u7684\u70ed\u70b9\u3002"]}),"\n",(0,A.jsx)(s.h3,{id:"32-\u5b9a\u4f4dio-bound\u95ee\u9898",children:"3.2 \u5b9a\u4f4dio-bound\u95ee\u9898"}),"\n",(0,A.jsx)(s.p,{children:"\u539f\u56e0\u53ef\u80fd\u6709\uff1a"}),"\n",(0,A.jsxs)(s.ul,{children:["\n",(0,A.jsx)(s.li,{children:"\u7ebf\u7a0b\u786e\u5b9e\u914d\u5c11\u4e86"}),"\n",(0,A.jsx)(s.li,{children:"\u8bbf\u95ee\u4e0b\u6e38\u670d\u52a1\u7684client\u4e0d\u652f\u6301kthread\uff0c\u4e14\u5ef6\u65f6\u8fc7\u957f"}),"\n",(0,A.jsx)(s.li,{children:"\u963b\u585e\u6765\u81ea\u7a0b\u5e8f\u5185\u90e8\u7684\u9501\uff0cIO\u7b49\u7b49\u3002"}),"\n"]}),"\n",(0,A.jsx)(s.p,{children:"\u5982\u679c\u963b\u585e\u65e0\u6cd5\u907f\u514d\uff0c\u8003\u8651\u7528\u5f02\u6b65\u3002"}),"\n",(0,A.jsx)(s.h4,{id:"\u6392\u9664\u5de5\u4f5c\u7ebf\u7a0b\u6570\u4e0d\u591f\u7684\u5acc\u7591",children:"\u6392\u9664\u5de5\u4f5c\u7ebf\u7a0b\u6570\u4e0d\u591f\u7684\u5acc\u7591"}),"\n",(0,A.jsx)(s.p,{children:"\u5982\u679c\u7ebf\u7a0b\u6570\u4e0d\u591f\uff0c\u4f60\u53ef\u4ee5\u5c1d\u8bd5\u52a8\u6001\u8c03\u5927\u5de5\u4f5c\u7ebf\u7a0b\u6570\uff0c\u5207\u6362\u5230/flags\u9875\u9762\uff0c\u70b9\u51fbkthread_concurrency\u53f3\u8fb9\u7684(R):"}),"\n","\n",(0,A.jsx)("img",{src:m()}),"\n",(0,A.jsx)(s.p,{children:"\u8fdb\u5165\u540e\u586b\u5165\u65b0\u7684\u7ebf\u7a0b\u6570\u786e\u8ba4\u5373\u53ef\uff1a"}),"\n","\n",(0,A.jsx)("img",{src:w()}),"\n",(0,A.jsx)(s.p,{children:"\u56de\u5230/flags\u754c\u9762\u53ef\u4ee5\u770b\u5230kthread_concurrency\u5df2\u53d8\u6210\u4e86\u65b0\u503c\u3002"}),"\n","\n",(0,A.jsx)("img",{src:k()}),"\n",(0,A.jsx)(s.p,{children:"\u4e0d\u8fc7\uff0c\u8c03\u5927\u7ebf\u7a0b\u6570\u672a\u5fc5\u6709\u7528\u3002\u5982\u679c\u5de5\u4f5c\u7ebf\u7a0b\u662f\u7531\u4e8e\u8bbf\u95ee\u4e0b\u6e38\u800c\u5927\u91cf\u963b\u585e\uff0c\u8c03\u5927\u5de5\u4f5c\u7ebf\u7a0b\u6570\u662f\u6ca1\u6709\u7528\u7684\u3002\u56e0\u4e3a\u771f\u6b63\u7684\u74f6\u9888\u5728\u4e8e\u540e\u7aef\u7684\uff0c\u8c03\u5927\u7ebf\u7a0b\u540e\u53ea\u662f\u8ba9\u6bcf\u4e2a\u7ebf\u7a0b\u7684\u963b\u585e\u65f6\u95f4\u53d8\u5f97\u66f4\u957f\u3002"}),"\n",(0,A.jsx)(s.p,{children:"\u6bd4\u5982\u5728\u6211\u4eec\u8fd9\u7684\u4f8b\u5b50\u4e2d\uff0c\u8c03\u5927\u7ebf\u7a0b\u540e\u65b0\u589e\u7684\u5de5\u4f5c\u7ebf\u7a0b\u4ecd\u7136\u88ab\u6253\u6ee1\u4e86\u3002"}),"\n","\n",(0,A.jsx)("img",{src:E()}),"\n",(0,A.jsx)(s.h4,{id:"\u6392\u9664\u9501\u7684\u5acc\u7591",children:"\u6392\u9664\u9501\u7684\u5acc\u7591"}),"\n",(0,A.jsxs)(s.p,{children:["\u5982\u679c\u7a0b\u5e8f\u88ab\u67d0\u628a\u9501\u6321\u4f4f\u4e86\uff0c\u4e5f\u53ef\u80fd\u5448\u73b0\u51fa\u201cio-bound\u201d\u7684\u7279\u5f81\u3002\u5148\u7528",(0,A.jsx)(s.a,{href:"/docs/next/cpp/krpc/contention_profiler",children:"contention profiler"}),"\u6392\u67e5\u9501\u7684\u7ade\u4e89\u72b6\u51b5\u3002"]}),"\n",(0,A.jsx)(s.h4,{id:"\u4f7f\u7528rpcz",children:"\u4f7f\u7528rpcz"}),"\n",(0,A.jsx)(s.p,{children:"rpcz\u53ef\u4ee5\u5e2e\u52a9\u4f60\u770b\u5230\u6700\u8fd1\u7684\u6240\u6709\u8bf7\u6c42\uff0c\u548c\u5904\u7406\u5b83\u4eec\u65f6\u5728\u6bcf\u4e2a\u9636\u6bb5\u82b1\u8d39\u7684\u65f6\u95f4\uff08\u5355\u4f4d\u90fd\u662f\u5fae\u79d2\uff09\u3002"}),"\n","\n",(0,A.jsx)("img",{src:j()}),"\n",(0,A.jsx)(s.p,{children:"\u70b9\u51fb\u4e00\u4e2aspan\u94fe\u63a5\u540e\u770b\u5230\u8be5\u6b21RPC\u4f55\u65f6\u5f00\u59cb\uff0c\u6bcf\u4e2a\u9636\u6bb5\u82b1\u8d39\u7684\u65f6\u95f4\uff0c\u4f55\u65f6\u7ed3\u675f\u3002"}),"\n","\n",(0,A.jsx)("img",{src:S()}),"\n",(0,A.jsx)(s.p,{children:"\u8fd9\u662f\u4e00\u4e2a\u5178\u578b\u7684server\u5728\u4e25\u91cd\u963b\u585e\u7684\u4f8b\u5b50\u3002\u4ece\u63a5\u6536\u5230\u8bf7\u6c42\u5230\u5f00\u59cb\u8fd0\u884c\u82b1\u8d39\u4e8620ms\uff0c\u8bf4\u660eserver\u5df2\u7ecf\u6ca1\u6709\u8db3\u591f\u7684\u5de5\u4f5c\u7ebf\u7a0b\u6765\u53ca\u65f6\u5b8c\u6210\u5de5\u4f5c\u4e86\u3002"}),"\n",(0,A.jsx)(s.p,{children:"\u73b0\u5728\u8fd9\u4e2aspan\u7684\u4fe1\u606f\u6bd4\u8f83\u5c11\uff0c\u6211\u4eec\u53bb\u7a0b\u5e8f\u91cc\u52a0\u4e00\u4e9b\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528TRACEPRINTF\u5411rpcz\u6253\u5370\u65e5\u5fd7\u3002\u6253\u5370\u5185\u5bb9\u4f1a\u5d4c\u5165\u5728rpcz\u7684\u65f6\u95f4\u6d41\u4e2d\u3002"}),"\n","\n",(0,A.jsx)("img",{src:C()}),"\n",(0,A.jsx)(s.p,{children:"\u91cd\u65b0\u8fd0\u884c\u540e\uff0c\u67e5\u770b\u4e00\u4e2aspan\uff0c\u91cc\u9762\u7684\u6253\u5370\u5185\u5bb9\u679c\u7136\u5305\u542b\u4e86\u6211\u4eec\u589e\u52a0\u7684TRACEPRINTF\u3002"}),"\n","\n",(0,A.jsx)("img",{src:B()}),"\n",(0,A.jsx)(s.p,{children:"\u5728\u8fd0\u884c\u5230\u7b2c\u4e00\u6761TRACEPRINTF\u524d\uff0c\u7528\u6237\u56de\u8c03\u5df2\u8fd0\u884c\u4e862051\u5fae\u79d2\uff08\u5047\u8bbe\u8fd9\u7b26\u5408\u6211\u4eec\u7684\u9884\u671f\uff09\uff0c\u7d27\u63a5\u7740foobar()\u5374\u82b1\u8d39\u4e868036\u5fae\u79d2\uff0c\u6211\u4eec\u672c\u6765\u4ee5\u4e3a\u8fd9\u4e2a\u51fd\u6570\u4f1a\u5f88\u5feb\u8fd4\u56de\u7684\u3002\u8303\u56f4\u8fdb\u4e00\u6b65\u7f29\u5c0f\u4e86\u3002"}),"\n",(0,A.jsx)(s.p,{children:"\u91cd\u590d\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u76f4\u5230\u627e\u5230\u90a3\u4e2a\u9020\u6210\u95ee\u9898\u7684\u51fd\u6570\u3002"}),"\n",(0,A.jsx)(s.h4,{id:"\u4f7f\u7528kvar",children:"\u4f7f\u7528kvar"}),"\n",(0,A.jsx)(s.p,{children:"TRACEPRINTF\u4e3b\u8981\u9002\u5408\u82e5\u5e72\u6b21\u7684\u51fd\u6570\u8c03\u7528\uff0c\u5982\u679c\u4e00\u4e2a\u51fd\u6570\u8c03\u7528\u4e86\u5f88\u591a\u6b21\uff0c\u6216\u8005\u51fd\u6570\u672c\u8eab\u5f00\u9500\u5f88\u5c0f\uff0c\u6bcf\u6b21\u90fd\u5f80rpcz\u6253\u5370\u65e5\u5fd7\u662f\u4e0d\u5408\u9002\u7684\u3002\u8fd9\u65f6\u5019\u4f60\u53ef\u4ee5\u4f7f\u7528kvar\u3002"}),"\n",(0,A.jsxs)(s.p,{children:[(0,A.jsx)(s.a,{href:"/docs/next/cpp/krpc/kvar",children:"kvar"}),"\u662f\u4e00\u4e2a\u591a\u7ebf\u7a0b\u4e0b\u7684\u8ba1\u6570\u5e93\uff0c\u53ef\u4ee5\u4ee5\u6781\u4f4e\u7684\u5f00\u9500\u7edf\u8ba1\u7528\u6237\u9012\u6765\u7684\u6570\u503c\uff0c\u76f8\u6bd4\u201c\u6253\u65e5\u5fd7\u5927\u6cd5\u201d\u51e0\u4e4e\u4e0d\u5f71\u54cd\u7a0b\u5e8f\u884c\u4e3a\u3002\u4f60\u4e0d\u7528\u5b8c\u5168\u4e86\u89e3kvar\u7684\u5b8c\u6574\u7528\u6cd5\uff0c\u53ea\u8981\u4f7f\u7528kvar::LatencyRecorder\u5373\u53ef\u3002"]}),"\n",(0,A.jsx)(s.p,{children:"\u4eff\u7167\u5982\u4e0b\u4ee3\u7801\u5bf9foobar\u7684\u8fd0\u884c\u65f6\u95f4\u8fdb\u884c\u76d1\u63a7\u3002"}),"\n",(0,A.jsx)(s.pre,{children:(0,A.jsx)(s.code,{className:"language-c++",children:'#include <kutil/time.h>\n#include <kvar/kvar.h>\n \nkvar::LatencyRecorder g_foobar_latency("foobar");\n \n...\nvoid search() {\n    ...\n    kutil::Timer tm;\n    tm.start();\n    foobar();\n    tm.stop();\n    g_foobar_latency << tm.u_elapsed();\n    ...\n}\n'})}),"\n",(0,A.jsx)(s.p,{children:"\u91cd\u65b0\u8fd0\u884c\u7a0b\u5e8f\u540e\uff0c\u5728vars\u7684\u641c\u7d22\u6846\u4e2d\u952e\u5165foobar\uff0c\u663e\u793a\u5982\u4e0b\uff1a"}),"\n","\n",(0,A.jsx)("img",{src:I()}),"\n",(0,A.jsx)(s.p,{children:"\u70b9\u51fb\u4e00\u4e2akvar\u53ef\u4ee5\u770b\u5230\u52a8\u6001\u56fe\uff0c\u6bd4\u5982\u70b9\u51fbcdf\u540e\u770b\u5230"}),"\n","\n",(0,A.jsx)("img",{src:Q()}),"\n",(0,A.jsx)(s.p,{children:"\u6839\u636e\u5ef6\u65f6\u7684\u5206\u5e03\uff0c\u4f60\u53ef\u4ee5\u63a8\u6d4b\u51fa\u8fd9\u4e2a\u51fd\u6570\u7684\u6574\u4f53\u884c\u4e3a\uff0c\u5bf9\u5927\u591a\u6570\u8bf7\u6c42\u8868\u73b0\u5982\u4f55\uff0c\u5bf9\u957f\u5c3e\u8868\u73b0\u5982\u4f55\u3002"}),"\n",(0,A.jsx)(s.p,{children:"\u4f60\u53ef\u4ee5\u5728\u5b50\u51fd\u6570\u4e2d\u7ee7\u7eed\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u589e\u52a0\u66f4\u591akvar\uff0c\u5e76\u6bd4\u5bf9\u4e0d\u540c\u7684\u5206\u5e03\uff0c\u6700\u540e\u5b9a\u4f4d\u6765\u6e90\u3002"}),"\n",(0,A.jsx)(s.h4,{id:"\u53ea\u4f7f\u7528\u4e86krpc-client",children:"\u53ea\u4f7f\u7528\u4e86krpc client"}),"\n",(0,A.jsxs)(s.p,{children:["\u5f97\u6253\u5f00dummy server\u63d0\u4f9b\u5185\u7f6e\u670d\u52a1\uff0c\u65b9\u6cd5\u89c1",(0,A.jsx)(s.a,{href:"/docs/next/cpp/krpc/dummy_server",children:"\u8fd9\u91cc"}),"\u3002"]})]})}function K(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,A.jsx)(s,{...e,children:(0,A.jsx)(G,{...e})}):G(e)}},28453:(e,s,r)=>{"use strict";r.d(s,{R:()=>a,x:()=>c});var A=r(96540);const i={},n=A.createContext(i);function a(e){const s=A.useContext(n);return A.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),A.createElement(n.Provider,{value:s},e.children)}}}]);