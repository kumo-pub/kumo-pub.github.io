"use strict";(self.webpackChunkkumo_website=self.webpackChunkkumo_website||[]).push([[27266],{48651:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>a,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>d});var n=t(74848),c=t(28453);const i={},r="\u5feb\u901f\u5f00\u59cb",l={id:"cpp/base/testing/kt/quickstart",title:"\u5feb\u901f\u5f00\u59cb",description:"\u672c\u6559\u7a0b\u65e8\u5728\u5e2e\u52a9\u60a8\u4f7f\u7528 CMake \u542f\u52a8\u5e76\u8fd0\u884c KumoTest\u3002\u5982\u679c\u60a8\u662f\u7b2c\u4e00\u6b21\u4f7f\u7528 KumoTest \u6216\u9700\u8981\u590d\u4e60\u4e00\u4e0b\uff0c\u6211\u4eec\u5efa\u8bae\u60a8",source:"@site/versioned_docs/version-1.1.1/cpp/base/testing/kt/quickstart.mdx",sourceDirName:"cpp/base/testing/kt",slug:"/cpp/base/testing/kt/quickstart",permalink:"/docs/cpp/base/testing/kt/quickstart",draft:!1,unlisted:!1,tags:[],version:"1.1.1",lastUpdatedBy:"Jeff lothar",lastUpdatedAt:1748081772e3,frontMatter:{},sidebar:"docs",previous:{title:"Kumo test",permalink:"/docs/category/kumo-test"},next:{title:"ktest \u5165\u95e8",permalink:"/docs/cpp/base/testing/kt/primer"}},a={},d=[{value:"\u5148\u51b3\u6761\u4ef6",id:"prerequisites",level:2},{value:"\u5efa\u7acb\u4e00\u4e2a\u9879\u76ee",id:"set-up-a-project",level:2},{value:"\u521b\u5efa\u5e76\u8fd0\u884c\u4e8c\u8fdb\u5236\u6587\u4ef6",id:"create-and-run-a-binary",level:2},{value:"\u540e\u7eed\u6b65\u9aa4",id:"\u540e\u7eed\u6b65\u9aa4",level:2}];function o(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"\u5feb\u901f\u5f00\u59cb",children:"\u5feb\u901f\u5f00\u59cb"})}),"\n",(0,n.jsx)(s.p,{children:"\u672c\u6559\u7a0b\u65e8\u5728\u5e2e\u52a9\u60a8\u4f7f\u7528 CMake \u542f\u52a8\u5e76\u8fd0\u884c KumoTest\u3002\u5982\u679c\u60a8\u662f\u7b2c\u4e00\u6b21\u4f7f\u7528 KumoTest \u6216\u9700\u8981\u590d\u4e60\u4e00\u4e0b\uff0c\u6211\u4eec\u5efa\u8bae\u60a8\n\u672c\u6559\u7a0b\u4f5c\u4e3a\u8d77\u70b9\u3002"}),"\n",(0,n.jsx)(s.h2,{id:"prerequisites",children:"\u5148\u51b3\u6761\u4ef6"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"/docs/env_prepare_be",children:"\u540e\u7aef\u5f00\u53d1\u73af\u5883"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsxs)(s.a,{href:"/docs/kmpkg/get_started/setup-kmpkg",children:["\u5b89\u88c5",(0,n.jsx)(s.code,{children:"kmpkg"})]})}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"set-up-a-project",children:"\u5efa\u7acb\u4e00\u4e2a\u9879\u76ee"}),"\n",(0,n.jsxs)(s.p,{children:["CMake \u4f7f\u7528\u540d",(0,n.jsx)(s.code,{children:"CMakeLists.txt"}),"\u7684\u6587\u4ef6\u6765\u914d\u7f6e\u6784\u5efa\u7cfb\u7edf\u9879\u76ee\u3002\u60a8\u5c06\u4f7f\u7528\u6b64\u6587\u4ef6\u6765\u8bbe\u7f6e\u60a8\u7684\u9879\u76ee\u5e76\u58f0\u660e\u5bf9\n\u4e91\u6d4b\u8bd5\u3002"]}),"\n",(0,n.jsx)(s.p,{children:"\u9996\u5148\uff0c\u4e3a\u60a8\u7684\u9879\u76ee\u521b\u5efa\u4e00\u4e2a\u76ee\u5f55\uff1a"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-shell",children:"$ mkdir my_project && cd my_project\n"})}),"\n",(0,n.jsxs)(s.p,{children:["\u5b89\u88c5",(0,n.jsx)(s.code,{children:"ktest"}),":"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-shell",children:"kmpkg install ktest\n"})}),"\n",(0,n.jsxs)(s.p,{children:["\u63a5\u4e0b\u6765\uff0c\u60a8\u5c06\u521b\u5efa\u201cCMakeLists.txt\u201d\u6587\u4ef6\u5e76\u58f0\u660e\u5bf9",(0,n.jsx)(s.code,{children:"KumoTest"}),"\u3002\n\u4e3a\u6b64\uff0c\u8bf7\u5728\u9879\u76ee\u76ee\u5f55 (",(0,n.jsx)(s.code,{children:"my_project"}),") \u4e2d\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a",(0,n.jsx)(s.code,{children:"CMakeLists.txt"})," \u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-cmake",children:"cmake_minimum_required(VERSION 3.24.3)\nproject(my_project)\n\n# KumoTest requires at least C++17\nset(CMAKE_CXX_STANDARD 17)\n"})}),"\n",(0,n.jsx)(s.h2,{id:"create-and-run-a-binary",children:"\u521b\u5efa\u5e76\u8fd0\u884c\u4e8c\u8fdb\u5236\u6587\u4ef6"}),"\n",(0,n.jsx)(s.p,{children:"\u5c06 KumoTest \u58f0\u660e\u4e3a\u4f9d\u8d56\u9879\u540e\uff0c\u60a8\u53ef\u4ee5\u5728\u5176\u4e2d\u4f7f\u7528 KumoTest \u4ee3\u7801\n\u4f60\u81ea\u5df1\u7684\u9879\u76ee\u3002"}),"\n",(0,n.jsxs)(s.p,{children:["\u4f8b\u5982\uff0c\u5728",(0,n.jsx)(s.code,{children:"my_project"}),"\u4e2d\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a",(0,n.jsx)(s.code,{children:"hello_test.cc"}),"\u7684\u6587\u4ef6\n\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\u7684\u76ee\u5f55\uff1a"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-cpp",children:'#include <ktest/ktest.h>\n\n// Demonstrate some basic assertions.\nTEST(HelloTest, BasicAssertions) {\n  // Expect two strings not to be equal.\n  EXPECT_STRNE("hello", "world");\n  // Expect equality.\n  EXPECT_EQ(7 * 6, 42);\n}\n'})}),"\n",(0,n.jsxs)(s.p,{children:["KumoTest \u63d0\u4f9b\u4e86\u7528\u4e8e\u6d4b\u8bd5\u7684 ",(0,n.jsx)(s.a,{href:"/docs/cpp/base/testing/kt/primer#assertions",children:"\u65ad\u8a00"}),"\n\u60a8\u7684\u4ee3\u7801\u7684\u884c\u4e3a\u3002\u4e0a\u9762\u7684\u793a\u4f8b\u5305\u542b\u4e3b\u8981\u7684 KumoTest \u5934\u6587\u4ef6\n\u5e76\u8bba\u8bc1\u4e86\u4e00\u4e9b\u57fa\u672c\u65ad\u8a00\u3002"]}),"\n",(0,n.jsxs)(s.p,{children:["\u8981\u6784\u5efa\u4ee3\u7801\uff0c\u8bf7\u5c06\u4ee5\u4e0b\u5185\u5bb9\u6dfb\u52a0\u5230",(0,n.jsx)(s.code,{children:"CMakeLists.txt"}),"\u6587\u4ef6\u7684\u672b\u5c3e\uff1a"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-cmake",children:"find_package(KTest REQUIRED)\nenable_testing()\n\nadd_executable(\n  hello_test\n  hello_test.cc\n)\ntarget_link_libraries(\n    hello_test\n    KTest::ktest\n    KTest::ktest_main\n)\n\ninclude(KumoTest)\nadd_test(NAME hello_test COMMAND hello_test)\n"})}),"\n",(0,n.jsxs)(s.p,{children:["\u4e0a\u8ff0\u914d\u7f6e\u542f\u7528\u4e86 CMake \u4e2d\u7684\u6d4b\u8bd5\uff0c\u58f0\u660e\u4e86 C++ \u6d4b\u8bd5\u4e8c\u8fdb\u5236\u6587\u4ef6\n\u60a8\u60f3\u8981\u6784\u5efa (",(0,n.jsx)(s.code,{children:"hello_test"}),")\uff0c\u5e76\u5c06\u5176\u94fe\u63a5\u5230 KumoTest (",(0,n.jsx)(s.code,{children:"ktest_main"}),")\u3002"]}),"\n",(0,n.jsx)(s.p,{children:"\u73b0\u5728\u60a8\u53ef\u4ee5\u6784\u5efa\u5e76\u8fd0\u884c\u6d4b\u8bd5\uff1a"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-cmake",children:"my_project$ cmake -S . -B build -DCMAKE_TOOLCHAIN_FILE=$KMPKG_CMAKE\n-- The C compiler identification is GNU 10.2.1\n-- The CXX compiler identification is GNU 10.2.1\n...\n-- Build files have been written to: .../my_project/build\nmy_project$ cmake --build build\nScanning dependencies of target ktest\n...\n[100%] Built target gmock_main\nmy_project$ cd build && ctest\nTest project .../my_project/build\n    Start 1: HelloTest.BasicAssertions\n1/1 Test #1: HelloTest.BasicAssertions ........   Passed    0.00 sec\n\n100% tests passed, 0 tests failed out of 1\n\nTotal Test time (real) =   0.01 sec\n"})}),"\n",(0,n.jsxs)(s.p,{children:["\u606d\u559c\uff01\u60a8\u5df2\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6210\u529f\u6784\u5efa\u5e76\u8fd0\u884c\u4e86\u6d4b\u8bd5\u4e8c\u8fdb\u5236\u6587\u4ef6\n",(0,n.jsx)(s.code,{children:"ktest"}),"\u3002"]}),"\n",(0,n.jsx)(s.h2,{id:"\u540e\u7eed\u6b65\u9aa4",children:"\u540e\u7eed\u6b65\u9aa4"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"/docs/cpp/base/testing/kt/primer",children:"\u67e5\u770b Primer"})," \u5f00\u59cb\u5b66\u4e60\u5982\u4f55\u7f16\u5199\u7b80\u5355\u7684\u5185\u5bb9\u6d4b\u8bd5\u3002"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"/docs/cpp/base/testing/kt/samples",children:"\u8bf7\u53c2\u9605\u4ee3\u7801\u793a\u4f8b"})," \u4e86\u89e3\u66f4\u591a\u793a\u4f8b\uff0c\u5c55\u793a\u5982\u4f55\u4f7f\u7528\u5404\u79cd KumoTest \u529f\u80fd\u3002"]}),"\n"]})]})}function p(e={}){const{wrapper:s}={...(0,c.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>r,x:()=>l});var n=t(96540);const c={},i=n.createContext(c);function r(e){const s=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:r(e.components),n.createElement(i.Provider,{value:s},e.children)}}}]);