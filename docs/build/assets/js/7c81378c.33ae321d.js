"use strict";(self.webpackChunkkumo_website=self.webpackChunkkumo_website||[]).push([[37113],{61514:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>o});var i=s(74848),a=s(28453);const c={sidebarDepth:2,sitemap:{priority:.7}},r="\u56fe\u50cf\u641c\u7d22",t={id:"api/kmsearch/image-search",title:"\u56fe\u50cf\u641c\u7d22",description:"kumosearch \u652f\u6301\u4ee5\u4e0b\u529f\u80fd\uff1a",source:"@site/docs/api/kmsearch/image-search.mdx",sourceDirName:"api/kmsearch",slug:"/api/kmsearch/image-search",permalink:"/docs/next/api/kmsearch/image-search",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedBy:"Jeff lothar",lastUpdatedAt:1748081772e3,frontMatter:{sidebarDepth:2,sitemap:{priority:.7}},sidebar:"api",previous:{title:"\u8bed\u97f3\u641c\u7d22",permalink:"/docs/next/api/kmsearch/voice-search-query"},next:{title:"\u5bf9\u8bdd\u5f0f\u641c\u7d22 (RAG)",permalink:"/docs/next/api/kmsearch/conversational-search-rag"}},l={},o=[{value:"\u521b\u5efa\u4e00\u4e2a\u7d22\u5f15\u8868",id:"\u521b\u5efa\u4e00\u4e2a\u7d22\u5f15\u8868",level:2},{value:"\u7d22\u5f15\u5e26\u6709\u56fe\u50cf\u7684\u6587\u6863",id:"\u7d22\u5f15\u5e26\u6709\u56fe\u50cf\u7684\u6587\u6863",level:2},{value:"\u4f7f\u7528\u8bed\u4e49\u641c\u7d22\u6765\u641c\u7d22\u56fe\u50cf",id:"\u4f7f\u7528\u8bed\u4e49\u641c\u7d22\u6765\u641c\u7d22\u56fe\u50cf",level:2},{value:"\u641c\u7d22\u76f8\u4f3c\u56fe\u50cf",id:"\u641c\u7d22\u76f8\u4f3c\u56fe\u50cf",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"\u56fe\u50cf\u641c\u7d22",children:"\u56fe\u50cf\u641c\u7d22"})}),"\n",(0,i.jsx)(n.p,{children:"kumosearch \u652f\u6301\u4ee5\u4e0b\u529f\u80fd\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u6839\u636e\u56fe\u50cf\u4e2d\u7269\u54c1\u7684\u63cf\u8ff0\u548c\u5185\u5bb9\u8fdb\u884c\u56fe\u50cf\u8bed\u4e49\u641c\u7d22"}),"\n",(0,i.jsx)(n.li,{children:"\u56fe\u50cf\u76f8\u4f3c\u5ea6\u641c\u7d22"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u5229\u7528\u4e86 kumosearch \u5bf9 ",(0,i.jsx)(n.a,{href:"https://openai.com/research/clip",children:"CLIP ML \u6a21\u578b"})," \u7684\u5185\u7f6e\u652f\u6301\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"\u521b\u5efa\u4e00\u4e2a\u7d22\u5f15\u8868",children:"\u521b\u5efa\u4e00\u4e2a\u7d22\u5f15\u8868"}),"\n",(0,i.jsxs)(n.p,{children:["\u6211\u4eec\u5c06\u521b\u5efa\u4e00\u4e2a\u65b0\u7d22\u5f15\u8868\u5e76\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"ts/clip-vit-b-p32"})," CLIP \u6a21\u578b\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u662f\u8981\u4f7f\u7528\u7684 ",(0,i.jsx)(n.a,{href:"/docs/next/api/kmsearch/collections#create-a-collection",children:"\u7d22\u5f15\u8868 schema"}),"\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json{8-12,16-22}",children:'{\n  "name": "images",\n  "fields": [\n    {\n      "name": "name",\n      "type": "string"\n    },\n    {\n      "name": "image",\n      "type": "image",\n      "store": false\n    },\n    {\n      "name": "embedding",\n      "type": "float[]",\n      "embed": {\n        "from": [\n          "image"\n        ],\n        "model_config": {\n          "model_name": "ts/clip-vit-b-p32"\n        }\n      }\n    }\n  ]\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u8bf7\u6ce8\u610f\u540d\u4e3a ",(0,i.jsx)(n.code,{children:"image"})," \u7684\u5b57\u6bb5\u4f7f\u7528\u4e86\u65b0\u6570\u636e\u7c7b\u578b ",(0,i.jsx)(n.code,{children:"type: image"}),"\uff0c\u5b83\u662f BMP\u3001JPG \u6216 PNG \u683c\u5f0f\u7684\u56fe\u50cf\u7684 Base64 \u7f16\u7801\u5b57\u7b26\u4e32\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5b57\u6bb5\u5b9a\u4e49\u4e2d\u7684 ",(0,i.jsx)(n.code,{children:"store: false"})," \u5c5e\u6027\u544a\u8bc9 kumosearch \u4ec5\u4f7f\u7528\u8be5\u5b57\u6bb5\u6765\u751f\u6210\u5d4c\u5165\uff0c\u7136\u540e\u4ece\u6587\u6863\u4e2d\u4e22\u5f03\u56fe\u50cf\u800c\u4e0d\u5c06\u5176\u5b58\u50a8\u5728\u78c1\u76d8\u4e0a\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"\u7d22\u5f15\u5e26\u6709\u56fe\u50cf\u7684\u6587\u6863",children:"\u7d22\u5f15\u5e26\u6709\u56fe\u50cf\u7684\u6587\u6863"}),"\n",(0,i.jsxs)(n.p,{children:["\u4ee5\u4e0b\u793a\u4f8b\u5c55\u793a\u4e86",(0,i.jsx)(n.a,{href:"/docs/next/api/kmsearch/documents#index-multiple-documents",children:"\u5bfc\u5165"})," \u5230 kumosearch \u4e2d\u7684 JSON \u6587\u6863\u683c\u5f0f\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "name": "an image with a dog",\n  "image": "<base64 encoded string of the image>"\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u4f7f\u7528\u8bed\u4e49\u641c\u7d22\u6765\u641c\u7d22\u56fe\u50cf",children:"\u4f7f\u7528\u8bed\u4e49\u641c\u7d22\u6765\u641c\u7d22\u56fe\u50cf"}),"\n",(0,i.jsx)(n.p,{children:"\u73b0\u5728\u8ba9\u6211\u4eec\u641c\u7d22\u6240\u6709\u5305\u542b\u52a8\u7269\u7684\u56fe\u50cf\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl "http://localhost:8868/multi_search" \\\n        -X POST \\\n        -H "Content-Type: application/json" \\\n        -H "X-KUMOSEARCH-API-KEY: ${KUMOSEARCH_API_KEY}" \\\n        -d \'{\n          "searches": [\n            {\n              "collection": "images",\n              "q": "animals",\n              "query_by": "embedding"\n            }\n          ]\n        }\'\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u5728\u540e\u53f0\uff0ckumosearch \u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"q"})," \u53c2\u6570\u7684\u503c\u751f\u6210\u5d4c\u5165\u5411\u91cf\uff0c\u5bf9\u8fd9\u4e9b\u5411\u91cf\u8fdb\u884c\u6700\u8fd1\u90bb\u641c\u7d22\u5e76\u8fd4\u56de\u6700\u63a5\u8fd1\u7684\u7ed3\u679c\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"\u641c\u7d22\u76f8\u4f3c\u56fe\u50cf",children:"\u641c\u7d22\u76f8\u4f3c\u56fe\u50cf"}),"\n",(0,i.jsx)(n.p,{children:"\u8981\u641c\u7d22\u4e0e\u7279\u5b9a\u56fe\u50cf\u76f8\u4f3c\u7684\u56fe\u50cf\uff0c\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u641c\u7d22\u67e5\u8be2\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl "http://localhost:8868/multi_search" \\\n        -X POST \\\n        -H "Content-Type: application/json" \\\n        -H "X-KUMOSEARCH-API-KEY: ${KUMOSEARCH_API_KEY}" \\\n        -d \'{\n          "searches": [\n            {\n              "collection": "images",\n              "q": "*",\n              "vector_query": "embedding:([], id:123)"\n            }\n          ]\n        }\'\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u5c06\u8fd4\u56de\u4e0e\u6587\u6863 ",(0,i.jsx)(n.code,{children:"id\uff1a123"})," \u4e2d\u7684\u56fe\u50cf\u76f8\u4f3c\u7684\u6240\u6709\u56fe\u50cf\uff0c\u7531 CLIP \u6a21\u578b\u786e\u5b9a\u8fd9\u4e9b\u76f8\u4f3c\u6027\u3002"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>t});var i=s(96540);const a={},c=i.createContext(a);function r(e){const n=i.useContext(c);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(c.Provider,{value:n},e.children)}}}]);