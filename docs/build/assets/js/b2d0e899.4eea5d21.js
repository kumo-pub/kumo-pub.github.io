"use strict";(self.webpackChunkkumo_website=self.webpackChunkkumo_website||[]).push([[28654],{49560:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>c,metadata:()=>i,toc:()=>u});var r=s(74848),t=s(28453),a=s(49489),l=s(7227);const c={},o="\u63a8\u8350",i={id:"kmsearch/recommendations",title:"\u63a8\u8350",description:"kumosearch \u53ef\u4ee5\u4f7f\u7528\u5411\u91cf\u641c\u7d22 \uff0c\u6839\u636e\u7528\u6237\u884c\u4e3a\u751f\u6210\u63a8\u8350\u3002\u8fd9\u6d89\u53ca\u6784\u5efa\u673a\u5668\u5b66\u4e60\u6a21\u578b\u6765\u751f\u6210\u5d4c\u5165 \uff0c\u5c06\u5b83\u4eec\u5b58\u50a8\u5728 kumosearch \u4e2d\uff0c\u7136\u540e\u5728 kumosearch \u4e2d\u8fdb\u884c\u6700\u8fd1\u90bb\u641c\u7d22\u3002",source:"@site/versioned_docs/version-1.1.1/kmsearch/recommendations.mdx",sourceDirName:"kmsearch",slug:"/kmsearch/recommendations",permalink:"/docs/kmsearch/recommendations",draft:!1,unlisted:!1,tags:[],version:"1.1.1",lastUpdatedBy:"Jeff lothar",lastUpdatedAt:1748081772e3,frontMatter:{},sidebar:"docs",previous:{title:"\u8bed\u4e49\u641c\u7d22",permalink:"/docs/kmsearch/semantic-search"},next:{title:"\u4e2a\u6027\u5316\u641c\u7d22",permalink:"/docs/kmsearch/personalization"}},d={},u=[{value:"Step 1: \u51c6\u5907\u6570\u636e",id:"step-1-\u51c6\u5907\u6570\u636e",level:2},{value:"Step 2: \u8bbe\u7f6e\u73af\u5883",id:"step-2-\u8bbe\u7f6e\u73af\u5883",level:2},{value:"\u5b89\u88c5\u7cfb\u7edf\u4f9d\u8d56\u9879",id:"\u5b89\u88c5\u7cfb\u7edf\u4f9d\u8d56\u9879",level:3},{value:"\u5b89\u88c5 Starspace",id:"\u5b89\u88c5-starspace",level:3},{value:"\u5b89\u88c5 Boost",id:"\u5b89\u88c5-boost",level:3},{value:"\u7f16\u8bd1 Starspace",id:"\u7f16\u8bd1-starspace",level:3},{value:"Step 3: \u8bad\u7ec3\u6a21\u578b",id:"step-3-\u8bad\u7ec3\u6a21\u578b",level:2},{value:"Step 4: \u751f\u6210\u5d4c\u5165",id:"step-4-\u751f\u6210\u5d4c\u5165",level:2},{value:"Step 5: \u8fdb\u884c\u7d22\u5f15",id:"step-5-\u8fdb\u884c\u7d22\u5f15",level:2},{value:"Step 6: \u751f\u6210\u63a8\u8350",id:"step-6-\u751f\u6210\u63a8\u8350",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"\u63a8\u8350",children:"\u63a8\u8350"})}),"\n",(0,r.jsxs)(n.p,{children:["kumosearch \u53ef\u4ee5\u4f7f\u7528",(0,r.jsx)(n.a,{href:"/docs/api/kmsearch/vector-search",children:"\u5411\u91cf\u641c\u7d22"})," \uff0c\u6839\u636e\u7528\u6237\u884c\u4e3a\u751f\u6210\u63a8\u8350\u3002\u8fd9\u6d89\u53ca\u6784\u5efa\u673a\u5668\u5b66\u4e60\u6a21\u578b\u6765\u751f\u6210",(0,r.jsx)(n.a,{href:"/docs/api/kmsearch/vector-search#what-is-embedding",children:"\u5d4c\u5165"})," \uff0c\u5c06\u5b83\u4eec\u5b58\u50a8\u5728 kumosearch \u4e2d\uff0c\u7136\u540e\u5728 kumosearch \u4e2d\u8fdb\u884c\u6700\u8fd1\u90bb\u641c\u7d22\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u672c\u6587\u5c06\u8ba8\u8bba\u5982\u4f55\u4f7f\u7528 ",(0,r.jsx)(n.a,{href:"https://ai.meta.com/tools/starspace/",children:"Starspace"})," ML \u6a21\u578b\u6765\u751f\u6210\u5d4c\u5165\u3002",(0,r.jsx)(n.a,{href:"https://github.com/NVIDIA-Merlin/Transformers4Rec",children:"Transformers4Rec"})," \u4e5f\u662f\u53e6\u4e00\u4e2a\u9002\u7528\u4e8e\u6b64\u573a\u666f\u7684 ML \u6a21\u578b\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u6211\u4eec\u5c06\u4f7f\u7528\u7535\u5546\u4ea7\u54c1\u6570\u636e\u96c6\u6765\u6f14\u793a\uff0c\u8fd9\u4e5f\u9002\u7528\u4e8e\u63a8\u8350\u6587\u7ae0\u6216\u7535\u5f71\u7b49\u5176\u4ed6\u9886\u57df\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"step-1-\u51c6\u5907\u6570\u636e",children:"Step 1: \u51c6\u5907\u6570\u636e"}),"\n",(0,r.jsxs)(n.p,{children:["\u6211\u4eec\u5c06\u4f7f\u7528 ",(0,r.jsx)(n.a,{href:"https://ai.meta.com/tools/starspace/",children:"Starspace"})," \u6765\u6784\u5efa\u6211\u4eec\u7684 ML \u6a21\u578b\u3002Starspace \u8bad\u7ec3\u6570\u636e\u96c6\u7684\u683c\u5f0f\u4e3a\u6bcf\u884c\u8868\u793a\u4e00\u4e2a\u7528\u6237\u4ea4\u4e92\u8fc7\u7684\u4e00\u7ec4\u9879\u76ee\u3002"]}),"\n",(0,r.jsx)(a.A,{children:(0,r.jsx)(l.A,{value:"session-data.txt",label:"session-data.txt",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"apple orange banana broccoli mango\ncereals soda bread nuts cookies\ntissue detergent butter cheese milk eggs\nice_cream milk pancake_mix muffins\n"})})})}),"\n",(0,r.jsxs)(n.p,{children:["\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u7b2c\u4e00\u884c\u8868\u793a\u67d0\u4e2a\u7528\u6237\u4e0e\u4ea7\u54c1 ",(0,r.jsx)(n.code,{children:"apple"}),"\u3001",(0,r.jsx)(n.code,{children:"orange"}),"\u3001",(0,r.jsx)(n.code,{children:"banana"}),"\u3001",(0,r.jsx)(n.code,{children:"broccoli"})," \u548c ",(0,r.jsx)(n.code,{children:"mango"})," \u8fdb\u884c\u4e86\u4ea4\u4e92\uff08\u67e5\u770b\u3001\u8d2d\u4e70\u3001\u6dfb\u52a0\u5230\u8d2d\u7269\u8f66\u7b49\uff09\u3002\u53e6\u4e00\u4e2a\u7528\u6237\uff08\u6216\u540c\u4e00\u7528\u6237\uff09\u4e0e\u4ea7\u54c1 ",(0,r.jsx)(n.code,{children:"cereals"}),"\u3001",(0,r.jsx)(n.code,{children:"oda"}),"\u3001",(0,r.jsx)(n.code,{children:"bread"}),"\u3001",(0,r.jsx)(n.code,{children:"nuts"})," \u548c ",(0,r.jsx)(n.code,{children:"cookies"})," \u8fdb\u884c\u4e86\u4ea4\u4e92\u3002"]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"product_name"})," \u662f\u4e3a\u4e86\u4fbf\u4e8e\u9605\u8bfb\u3002\u5728\u5b9e\u9645\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u5efa\u8bae\u4f7f\u7528\u4ea7\u54c1\u7684 ID \u6216 SKU \u4f5c\u4e3a\u8bad\u7ec3\u6570\u636e\u96c6\u7684\u4e00\u90e8\u5206\u3002"]})}),"\n",(0,r.jsx)(n.h2,{id:"step-2-\u8bbe\u7f6e\u73af\u5883",children:"Step 2: \u8bbe\u7f6e\u73af\u5883"}),"\n",(0,r.jsx)(n.h3,{id:"\u5b89\u88c5\u7cfb\u7edf\u4f9d\u8d56\u9879",children:"\u5b89\u88c5\u7cfb\u7edf\u4f9d\u8d56\u9879"}),"\n",(0,r.jsxs)(n.p,{children:["\u786e\u4fdd\u6709 C++11 \u7f16\u8bd1\u5668\uff08gcc-4.6.3 \u6216\u66f4\u9ad8\u7248\u672c\u3001Visual Studio 2015 \u6216 clang-3.3 \u6216\u66f4\u9ad8\u7248\u672c\uff09\u3002\u5728 macOS \u4e0a\uff0c\u9700\u8981\u5b89\u88c5 XCode\uff1b\u5728 Linux \u53d1\u884c\u7248\u4e0a\uff0c\u4f7f\u7528\u53d1\u884c\u7248\u7684\u5305\u7ba1\u7406\u5668\u5b89\u88c5 ",(0,r.jsx)(n.code,{children:"build-essential"})," \u5305\u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"\u5b89\u88c5-starspace",children:"\u5b89\u88c5 Starspace"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"git clone https://github.com/facebookresearch/Starspace.git\ncd Starspace\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u5b89\u88c5-boost",children:"\u5b89\u88c5 Boost"}),"\n",(0,r.jsx)(n.p,{children:"Boost \u662f Starspace \u9700\u8981\u7684\u4e00\u4e2a\u5e93\u3002\u8fdb\u5165 Starspace \u76ee\u5f55\u540e\uff0c\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"curl -LO https://boostorg.jfrog.io/artifactory/main/release/1.82.0/source/boost_1_82_0.tar.gz\ntar -xzvf boost_1_82_0.tar.gz\n"})}),"\n",(0,r.jsx)(n.h3,{id:"\u7f16\u8bd1-starspace",children:"\u7f16\u8bd1 Starspace"}),"\n",(0,r.jsx)(n.p,{children:"\u8fdb\u5165 Starspace \u76ee\u5f55\u540e\uff0c\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"make -e BOOST_DIR=boost_1_82_0 && \\\n  make embed_doc -e BOOST_DIR=boost_1_82_0\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u8981\u9a8c\u8bc1 Starspace \u662f\u5426\u6b63\u5e38\u5de5\u4f5c\uff0c\u8fd0\u884c ",(0,r.jsx)(n.code,{children:"./starspace"}),"\uff0c\u5e94\u770b\u5230\u7c7b\u4f3c\u4ee5\u4e0b\u7684\u8f93\u51fa\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shellsession",children:'$ ./starspace\nUsage: need to specify whether it is train or test.\n\n"starspace train ..."  or "starspace test ..."\n...\n'})}),"\n",(0,r.jsx)(n.h2,{id:"step-3-\u8bad\u7ec3\u6a21\u578b",children:"Step 3: \u8bad\u7ec3\u6a21\u578b"}),"\n",(0,r.jsxs)(n.p,{children:["\u4f7f\u7528\u6b65\u9aa4 1 \u4e2d\u7684\u51c6\u5907\u7684\u8bad\u7ec3\u6570\u636e\u96c6\uff0c\u5c06\u6587\u4ef6\u547d\u540d\u4e3a ",(0,r.jsx)(n.code,{children:"session-data.txt"}),"\uff0c\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u6765\u8bad\u7ec3\u6a21\u578b\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"./starspace train \\\n  -trainFile <path/to/session-data.txt> \\\n  -model productsModel \\\n  -label '' \\\n  -trainMode 1 \\\n  -epoch 25 \\\n  -dim 100\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u8be5\u547d\u4ee4\u8fd0\u884c\u540e\uff0c\u5c06\u751f\u6210\u4e24\u4e2a\u6587\u4ef6\uff1a\u4e00\u4e2a\u540d\u4e3a ",(0,r.jsx)(n.code,{children:"productsModel"})," \u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u548c\u4e00\u4e2a\u540d\u4e3a ",(0,r.jsx)(n.code,{children:"productsModel.tsv"})," \u7684\u5305\u542b\u6a21\u578b\u6743\u91cd\u7684 TSV \u6587\u4ef6\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u968f\u7740\u7528\u6237\u7ee7\u7eed\u8bbf\u95ee\u7f51\u7ad9/\u5e94\u7528\u7a0b\u5e8f\uff0c\u6536\u96c6\u65b0\u7684\u7528\u6237\u6570\u636e\uff0c\u5efa\u8bae\u5b9a\u671f\u8fd0\u884c\u6b64\u8bad\u7ec3\u6b65\u9aa4\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"step-4-\u751f\u6210\u5d4c\u5165",children:"Step 4: \u751f\u6210\u5d4c\u5165"}),"\n",(0,r.jsx)(n.p,{children:"\u9996\u5148\u4ece\u6211\u4eec\u7684\u8bad\u7ec3\u6570\u636e\u96c6\u4e2d\u63d0\u53d6\u6240\u6709\u552f\u4e00\u7684\u4ea7\u54c1\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"export unique_items=$(tr ' ' '\\n' < session-data.txt | sed '/^$/d' | sort -u)\nexport output_jsonl_file=\"products-with-embeddings.jsonl\"\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u5bf9\u4e8e\u6bcf\u4e2a\u4ea7\u54c1\uff0c\u751f\u6210\u5d4c\u5165\u5e76\u5b58\u50a8\u5728 JSONL \u6587\u4ef6\u4e2d\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'echo -n > ${output_jsonl_file}\n\nwhile read -r item; do\n    embedding=$(echo "${item}" | ./embed_doc productsModel | tail -1 | tr \' \' \',\')\n    echo "{\\"id\\":\\"${item}\\",\\"embedding\\":[${embedding%?}]}" >> "${output_jsonl_file}"\ndone <<< "${unique_items}"\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u8fd9\u5c06\u751f\u6210\u4e00\u4e2a\u7c7b\u4f3c\u5982\u4e0b\u5185\u5bb9\u7684 JSONL \u6587\u4ef6\uff1a"}),"\n",(0,r.jsx)(a.A,{children:(0,r.jsx)(l.A,{value:"products -with-embeddings.jsonl",label:"products-with-embeddings.jsonl",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",metastring:"lines",children:'{"id":"apple","embedding":[-0.129717,0.173566,0.105385,0.0413297,-0.0290213,-0.0255852,0.0825889,-0.0261474,-0.0672213,-0.020061,-0.0227523,-0.232531,0.126667,0.053292,0.0092951,-0.117847,-0.0203866,0.067803,0.0669588,-0.0958568,-0.126915,0.120737,0.0547092,0.00512978,0.0257105,-0.0784047,-0.0348654,-0.125596,0.087177,0.132318,0.151595,-0.0326471,-0.169206,-0.00846743,0.184474,-0.148861,0.0110634,-0.0613974,0.0422888,-0.137809,0.0259965,-0.0851748,0.0202873,-0.120347,0.182447,0.110794,-0.200759,0.130639,-0.157653,-0.0173171,0.101569,-0.224391,-0.0160616,-0.0754992,-0.0967191,0.00498547,-0.144638,0.046945,-0.11333,-0.0533871,0.0118368,0.0670858,-0.0714718,-0.0474113,0.0123388,0.0553516,-0.163903,0.0201541,-0.0880148,0.0344916,-0.0213696,0.111026,0.0823451,-0.0152207,0.0427815,0.00890293,-0.163427,-0.165768,0.0409641,0.0668304,0.0868884,-0.0690655,-0.120059,-0.157864,-0.12657,0.0895369,-0.0551588,-0.138711,-0.0834502,0.0384778,-0.122425,0.00729352,-0.108975,-0.201364,-0.0596544,-0.0512629,-0.0172166,-0.147633,0.048211,0.0167111]}\n{"id":"banana","embedding":[-0.151976,0.167556,0.0984403,0.0582992,-0.0267645,-0.0632901,0.0818063,-0.0577236,-0.0661825,-0.0224044,-0.0083418,-0.235444,0.106222,0.098582,-0.0422992,-0.16124,-0.0754309,0.0859816,0.0505005,-0.0773229,-0.0878463,0.126327,0.0319473,0.0662375,0.0288876,-0.099176,-0.0356668,-0.118937,0.085241,0.145321,0.127992,-0.0275212,-0.164231,0.007687,0.15164,-0.149566,0.0513335,-0.0522685,0.00915292,-0.127394,0.0438007,-0.0371664,0.0524856,-0.126597,0.187275,0.0891057,-0.229951,0.138657,-0.146845,0.0245155,0.0622531,-0.22075,-0.0497431,-0.0837679,-0.092076,0.00150625,-0.158956,-0.00107306,-0.104141,-0.0596481,0.00658634,0.0868983,-0.0158821,-0.0623965,0.0369001,0.0743422,-0.218009,0.0531221,-0.033627,0.036802,-0.0232749,0.149437,0.0692087,0.0290572,-0.00513245,-0.0166902,-0.162802,-0.15936,0.0567595,0.101776,0.125398,-0.114981,-0.0962633,-0.110599,-0.0872082,0.0987341,-0.0343689,-0.0974114,-0.0465906,0.00473119,-0.133105,0.0337405,-0.0637639,-0.194511,-0.0586302,0.0310114,0.004405,-0.108879,-0.0131596,0.0469659]}\n'})})})}),"\n",(0,r.jsx)(n.p,{children:"\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u5c06\u6b64 JSONL \u6587\u4ef6\u5bfc\u5165\u5230 kumosearch \u4e2d\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"step-5-\u8fdb\u884c\u7d22\u5f15",children:"Step 5: \u8fdb\u884c\u7d22\u5f15"}),"\n",(0,r.jsx)(n.p,{children:"\u5bf9\u751f\u6210\u7684\u5d4c\u5165\u8fdb\u884c\u7d22\u5f15\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"export KUMOSEARCH_API_KEY=xyz\nexport KUMOSEARCH_URL='https://xyz.a1.kumosearch.net'\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u521b\u5efa\u4e00\u4e2a\u7d22\u5f15\u8868\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl "${KUMOSEARCH_URL}/collections" \\\n       -X POST \\\n       -H "Content-Type: application/json" \\\n       -H "X-KUMOSEARCH-API-KEY: ${KUMOSEARCH_API_KEY}" \\\n       -d \'{\n         "name": "products",\n         "fields": [\n           {"name": "name", "type": "string", "optional": true},\n           {"name": "description", "type": "string", "optional": true},\n           {"name": "price", "type": "float", "optional": true},\n           {"name": "categories", "type": "string[]", "optional": true},\n           {"name": "embedding", "type": "float[]", "num_dim": 100 }\n         ]\n       }\'\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\u6ce8\u610f\uff0c\u6211\u4eec\u8bbe\u7f6e\u4e86 ",(0,r.jsx)(n.code,{children:"num_dim: 100"}),"\uff0c\u8fd9\u4e0e\u8bad\u7ec3 Starspace \u6a21\u578b\u65f6\u8bbe\u7f6e\u7684 ",(0,r.jsx)(n.code,{children:"-dim 100"})," \u53c2\u6570\u4e00\u81f4\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u5c06\u5e26\u6709\u5d4c\u5165\u7684 JSONL \u6587\u4ef6\u5bfc\u5165\u7d22\u5f15\u8868\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -H "X-KUMOSEARCH-API-KEY: ${KUMOSEARCH_API_KEY}" \\\n      -X POST \\\n      -T products-with-embeddings.jsonl \\\n      "${KUMOSEARCHURL}/collections/products/documents/import?action=emplace"\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\u5728\u6b64\u5904\uff0c\u6211\u4eec\u53ea\u63d2\u5165\u4e86\u6bcf\u4e2a\u4ea7\u54c1\u7684\u5d4c\u5165\u3002\u60a8\u8fd8\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u7684 ",(0,r.jsx)(n.code,{children:"id"})," \u5b57\u6bb5\u5206\u522b\u5bfc\u5165\u5176\u4ed6\u503c\uff0c\u4f8b\u5982\u540d\u79f0\u3001\u63cf\u8ff0\u3001\u4ef7\u683c\u3001\u7c7b\u522b\u7b49\uff0c\u4ee5\u586b\u5145\u4ea7\u54c1\u8bb0\u5f55\u7684\u5176\u4ed6\u90e8\u5206\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"step-6-\u751f\u6210\u63a8\u8350",children:"Step 6: \u751f\u6210\u63a8\u8350"}),"\n",(0,r.jsx)(n.p,{children:"\u5047\u8bbe\u7528\u6237\u767b\u9646\u6211\u4eec\u7684\u7f51\u7ad9/\u5e94\u7528\u7a0b\u5e8f\u5e76\u4e0e\u4ee5\u4e0b\u4ea7\u54c1\u8fdb\u884c\u4e86\u4ea4\u4e92\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"mango broccoli milk\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u8981\u6839\u636e\u7528\u6237\u6570\u636e\u751f\u6210\u63a8\u8350\uff0c\u9996\u5148\u751f\u6210\u5d4c\u5165\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"export embedding=$(echo \"mango broccoli milk\" | ./embed_doc productsModel | tail -1 | tr ' ' ',')\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"echo ${embedding}\n-0.0862846,0.127956,0.0558543,0.0745331,0.02449,-0.131018,0.0886827,-0.0571893,-0.0398686,-0.0116799,-0.0164978,-0.173818,0.0478985,0.109211,-0.0826394,-0.177671,-0.219366,0.180478,-0.0140154,-0.0237589,-0.010896,0.115979,-0.044924,0.129452,-0.0111529,-0.0978542,-0.121468,-0.0700872,-0.0190036,0.116127,0.0617186,-0.0463324,-0.172141,0.0302211,0.0610366,-0.0831281,0.04558,-0.00370933,-0.107602,-0.0394414,0.0334175,0.0429023,0.133572,-0.124658,0.225743,-0.0156787,-0.284864,0.148183,-0.0508378,0.175489,-0.0417769,-0.0920536,-0.0443016,-0.0838343,-0.0694042,-0.0333535,-0.108574,-0.0894618,-0.022049,-0.0500605,-0.0234268,0.00732048,0.0817547,0.00764651,0.0285933,0.100818,-0.229398,0.0508415,0.117766,-0.0289333,-0.0493134,0.167664,0.0696889,0.115228,-0.0609508,-0.12562,-0.0450054,-0.0648439,0.0817176,0.169663,0.133255,-0.111001,-0.0467052,-0.0373238,0.005385,0.111311,-0.0171787,0.0311545,0.0474074,-0.0301008,-0.0555648,0.0776044,-0.0287841,-0.162136,-0.0511268,0.174767,-0.0169033,-0.0223623,-0.140496,0.154727\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u63a5\u7740\uff0c\u5c06\u4e3a\u7528\u6237\u6570\u636e\u751f\u6210\u7684\u5d4c\u5165\u4f5c\u4e3a ",(0,r.jsx)(n.code,{children:"\u67e5\u8be2\u5411\u91cf"})," \u53d1\u9001\u5230 kumosearch \u8fdb\u884c\u6700\u8fd1\u90bb\u641c\u7d22\uff0c\u5f97\u5230\u8981\u63a8\u8350\u7ed9\u7528\u6237\u7684\u4ea7\u54c1\u5217\u8868\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'curl "${KUMOSEARCH_URL}/multi_search" \\\n        -X POST \\\n        -H "Content-Type: application/json" \\\n        -H "X-KUMOSEARCH-API-KEY: ${KUMOSEARCH_API_KEY}" \\\n        -d \'{\n          "searches": [\n            {\n              "q": "*",\n              "collection": "products",\n              "vector_query": "embedding:([\'${embedding%?}\'], k:10, distance_threshold: 1)"\n            }\n          ]\n        }\' | jq \'.results[0].hits[] | .document.id\'\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u8fd9\u5c06\u8fd4\u56de\u4ee5\u4e0b\u7ed3\u679c\u3002\u5728\u8fc7\u6ee4\u6389\u7528\u6237\u5df2\u770b\u5230\u7684\u9879\u76ee\u540e\uff0c\u5728\u7528\u6237\u754c\u9762\u663e\u793a\u8fd9\u4e9b\u63a8\u8350\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'"broccoli"\n"mango"\n"banana"\n"apple"\n"orange"\n"tissue"\n"detergent"\n"cheese"\n"milk"\n"butter"\n'})}),"\n",(0,r.jsxs)(n.admonition,{type:"tip",children:[(0,r.jsx)(n.p,{children:"\u5728\u672c\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u4ea7\u54c1\u540d\u79f0\u662f\u4e3a\u4e86\u4fbf\u4e8e\u9605\u8bfb\u3002\u5728\u5b9e\u9645\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u5efa\u8bae\u4f7f\u7528\u4ea7\u54c1\u7684 ID \u6216 SKU\uff0c\u5e76\u751f\u6210\u76f8\u5e94\u7684\u5d4c\u5165\u3002"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"sku_1 sku_4 sku_5\nsku_5 sku_8 sku_1 sku_2 sku_10\nsku_5 sku_1 sku_4 sku_21 sku_22\n"})})]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},7227:(e,n,s)=>{s.d(n,{A:()=>l});s(96540);var r=s(34164);const t={tabItem:"tabItem_Ymn6"};var a=s(74848);function l(e){let{children:n,hidden:s,className:l}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,r.A)(t.tabItem,l),hidden:s,children:n})}},49489:(e,n,s)=>{s.d(n,{A:()=>k});var r=s(96540),t=s(34164),a=s(24245),l=s(56347),c=s(36494),o=s(62814),i=s(45167),d=s(81269);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:s}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:s,attributes:r,default:t}}=e;return{value:n,label:s,attributes:r,default:t}}))}(s);return function(e){const n=(0,i.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,s])}function p(e){let{value:n,tabValues:s}=e;return s.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:s}=e;const t=(0,l.W6)(),a=function(e){let{queryString:n=!1,groupId:s}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!s)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return s??null}({queryString:n,groupId:s});return[(0,o.aZ)(a),(0,r.useCallback)((e=>{if(!a)return;const n=new URLSearchParams(t.location.search);n.set(a,e),t.replace({...t.location,search:n.toString()})}),[a,t])]}function x(e){const{defaultValue:n,queryString:s=!1,groupId:t}=e,a=h(e),[l,o]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:s}=e;if(0===s.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:s}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${s.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=s.find((e=>e.default))??s[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:a}))),[i,u]=m({queryString:s,groupId:t}),[x,j]=function(e){let{groupId:n}=e;const s=function(e){return e?`docusaurus.tab.${e}`:null}(n),[t,a]=(0,d.Dv)(s);return[t,(0,r.useCallback)((e=>{s&&a.set(e)}),[s,a])]}({groupId:t}),b=(()=>{const e=i??x;return p({value:e,tabValues:a})?e:null})();(0,c.A)((()=>{b&&o(b)}),[b]);return{selectedValue:l,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),j(e)}),[u,j,a]),tabValues:a}}var j=s(11062);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=s(74848);function f(e){let{className:n,block:s,selectedValue:r,selectValue:l,tabValues:c}=e;const o=[],{blockElementScrollPositionUntilNextRender:i}=(0,a.a_)(),d=e=>{const n=e.currentTarget,s=o.indexOf(n),t=c[s].value;t!==r&&(i(n),l(t))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const s=o.indexOf(e.currentTarget)+1;n=o[s]??o[0];break}case"ArrowLeft":{const s=o.indexOf(e.currentTarget)-1;n=o[s]??o[o.length-1];break}}n?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":s},n),children:c.map((e=>{let{value:n,label:s,attributes:a}=e;return(0,g.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>o.push(e),onKeyDown:u,onClick:d,...a,className:(0,t.A)("tabs__item",b.tabItem,a?.className,{"tabs__item--active":r===n}),children:s??n},n)}))})}function v(e){let{lazy:n,children:s,selectedValue:a}=e;const l=(Array.isArray(s)?s:[s]).filter(Boolean);if(n){const e=l.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:(0,t.A)("margin-top--md",e.props.className)}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:l.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==a})))})}function _(e){const n=x(e);return(0,g.jsxs)("div",{className:(0,t.A)("tabs-container",b.tabList),children:[(0,g.jsx)(f,{...n,...e}),(0,g.jsx)(v,{...n,...e})]})}function k(e){const n=(0,j.A)();return(0,g.jsx)(_,{...e,children:u(e.children)},String(n))}},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>c});var r=s(96540);const t={},a=r.createContext(t);function l(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);