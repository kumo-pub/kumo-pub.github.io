<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-1.1.1 docs-doc-page docs-doc-id-cpp/kthread/dag" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">任务流 | Kumo AI</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://kumo-pub.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://kumo-pub.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://kumo-pub.github.io/docs/cpp/kthread/dag"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.1.1"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.1.1"><meta data-rh="true" name="docsearch:version" content="1.1.1"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.1.1"><meta data-rh="true" property="og:title" content="任务流 | Kumo AI"><meta data-rh="true" name="description" content="Taskflow 帮助您用现代 C++ 快速编写并行和异构任务程序。"><meta data-rh="true" property="og:description" content="Taskflow 帮助您用现代 C++ 快速编写并行和异构任务程序。"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://kumo-pub.github.io/docs/cpp/kthread/dag"><link data-rh="true" rel="alternate" href="https://kumo-pub.github.io/docs/cpp/kthread/dag" hreflang="en"><link data-rh="true" rel="alternate" href="https://kumo-pub.github.io/docs/cpp/kthread/dag" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Kumo AI RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Kumo AI Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Kumo AI JSON Feed">


<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-E5CR2Q1NRE"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-E5CR2Q1NRE",{})</script>


<link rel="alternate" type="application/rss+xml" href="/changelog/rss.xml" title="Docusaurus changelog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/changelog/atom.xml" title="Docusaurus changelog Atom Feed">
<link rel="alternate" type="application/json" href="/changelog/feed.json" title="Docusaurus changelog JSON Feed">



<link rel="icon" href="/img/docusaurus.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/docusaurus.png">
<link rel="mask-icon" href="/img/docusaurus.png" color="rgb(62, 204, 94)">
<meta name="msapplication-TileImage" content="/img/docusaurus.png">
<meta name="msapplication-TileColor" content="#000">



<link rel="alternate" type="application/rss+xml" href="/tests/blog/rss.xml" title="Docusaurus Tests Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/tests/blog/atom.xml" title="Docusaurus Tests Blog Atom Feed">
<link rel="alternate" type="application/json" href="/tests/blog/feed.json" title="Docusaurus Tests Blog JSON Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Kumo AI" href="/opensearch.xml">

<link rel="stylesheet" href="/katex/katex.min.css"><link rel="stylesheet" href="/assets/css/styles.21fbef88.css">
<script src="/assets/js/runtime~main.cf79a945.js" defer="defer"></script>
<script src="/assets/js/main.4244a726.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme-b4f")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss-b4f")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">🎉️ <b><a target="_blank" href="https://docusaurus.io/blog/releases/1.1">Kumo v1.1</a> is out!</b> 🥳️</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/kumo_logo.svg" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE" height="48" width="128"><img src="/img/kumo_logo_white.svg" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="48" width="128"></div><b class="navbar__title text--truncate">主页</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">文档</a><a class="navbar__item navbar__link" href="/docs/category/kmsearch">API</a><a class="navbar__item navbar__link" href="/blog">博客</a><a class="navbar__item navbar__link" href="/changelog">发布</a><a class="navbar__item navbar__link" href="/showcase">应用案例</a><a class="navbar__item navbar__link" href="/community/support">支持与资源</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/cpp/kthread/dag">1.1.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next">nightly 🚧</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/cpp/kthread/dag">1.1.1</a></li><li><hr class="dropdown-separator"></li><li class="dropdown-archived-versions"><b>Archived versions</b></li><li><a href="https://docusaurus-archive-october-2023.netlify.app/docs/2.3.1" target="_blank" rel="noopener noreferrer" class="dropdown__link">1.0.1<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://v1.docusaurus.io" target="_blank" rel="noopener noreferrer" class="dropdown__link">1.x.x<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><hr class="dropdown-separator"></li><li><a class="dropdown__link" href="/versions">All versions</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/cpp/kthread/dag" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><hr style="margin: 0.3rem 0;"></li><li><a href="https://github.com/facebook/docusaurus/issues/3526" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help Us Translate<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/kumo_logo.svg" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE" height="48" width="128"><img src="/img/kumo_logo_white.svg" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="48" width="128"><b>主页</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs">概述</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/基础准备">基础准备</a><button aria-label="Collapse sidebar category &#x27;基础准备&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/env_prepare_be">后端开发环境</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/env_prepare_fe">前端开发环境</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/持续集成----kmpkg">持续集成 -- kmpkg</a><button aria-label="Expand sidebar category &#x27;持续集成 -- kmpkg&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/c开发">c++开发</a><button aria-label="Collapse sidebar category &#x27;c++开发&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cpp/overview">概述</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/规范错误与错误返回值">规范错误与错误返回值</a><button aria-label="Expand sidebar category &#x27;规范错误与错误返回值&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/性能测试与单元测试">性能测试与单元测试</a><button aria-label="Expand sidebar category &#x27;性能测试与单元测试&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cpp/base/time">时间与日历</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/命令行与配置">命令行与配置</a><button aria-label="Expand sidebar category &#x27;命令行与配置&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/hash容器">hash容器</a><button aria-label="Expand sidebar category &#x27;hash容器&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/字符与字符串">字符与字符串</a><button aria-label="Expand sidebar category &#x27;字符与字符串&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/格式与解析">格式与解析</a><button aria-label="Expand sidebar category &#x27;格式与解析&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/文件和文件系统">文件和文件系统</a><button aria-label="Expand sidebar category &#x27;文件和文件系统&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/字符编码">字符编码</a><button aria-label="Expand sidebar category &#x27;字符编码&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/category/多核编程">多核编程</a><button aria-label="Collapse sidebar category &#x27;多核编程&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cpp/kthread/overview">概览</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cpp/kthread/execution_queue">执行队列</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cpp/kthread/kthread_or_not">线程模型选择</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/category/工作流">工作流</a><button aria-label="Collapse sidebar category &#x27;工作流&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/cpp/kthread/dag">任务流</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cpp/kthread/algo">算法索引</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/并行算法">并行算法</a><button aria-label="Expand sidebar category &#x27;并行算法&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/技术内幕">技术内幕</a><button aria-label="Expand sidebar category &#x27;技术内幕&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cpp/kthread/faq">FAQ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/log日志库">log日志库</a><button aria-label="Expand sidebar category &#x27;log日志库&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/监控与上报">监控与上报</a><button aria-label="Expand sidebar category &#x27;监控与上报&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/krpc教程">krpc教程</a><button aria-label="Expand sidebar category &#x27;krpc教程&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/搜素基础开发">搜素基础开发</a><button aria-label="Expand sidebar category &#x27;搜素基础开发&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/搜索应用开发">搜索应用开发</a><button aria-label="Expand sidebar category &#x27;搜索应用开发&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/向量数据库教程">向量数据库教程</a><button aria-label="Expand sidebar category &#x27;向量数据库教程&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/搜索统一执行引擎">搜索统一执行引擎</a><button aria-label="Expand sidebar category &#x27;搜索统一执行引擎&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/搜索-ui">搜索 UI</a><button aria-label="Expand sidebar category &#x27;搜索 UI&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/c开发"><span itemprop="name">c++开发</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/多核编程"><span itemprop="name">多核编程</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/工作流"><span itemprop="name">工作流</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">任务流</span><meta itemprop="position" content="4"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.1.1</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>任务流</h1></header>
<p>Taskflow 帮助您用现代 C++ 快速编写并行和异构任务程序。</p>
<p>任务流是构建在<code>pthread</code>或者<code>kthread</code>基础上的任务调度框架。底层线程基于<code>pthread</code>或者<code>kthread</code>。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="为什么使用任务流">为什么使用任务流?<a href="#为什么使用任务流" class="hash-link" aria-label="Direct link to 为什么使用任务流?" title="Direct link to 为什么使用任务流?">​</a></h2>
<p>在处理复杂的并行工作负载方面，Taskflow 比许多现有的任务编程框架更快、更具表现力，而且更容易实现嵌入式集成。</p>
<!-- -->
<img src="[object Object]">
<p>Taskflow 让您可以快速实施任务分解策略，该策略结合了常规和不规则的计算模式，并结合高效的 <em>工作窃取</em> 调度程序来优化您的多线程性能。</p>
<!-- -->
<table><thead><tr><th style="text-align:center"><a href="#start-your-first-taskflow-program">Static Tasking</a></th></tr></thead><tbody><tr><td style="text-align:center"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="208" viewBox="0 0 692 156"><g class="graph" transform="translate(4 152)"><title>Taskflow</title><path fill="#fff" stroke="transparent" d="M-4 4v-156h692V4z"></path><g class="node"><title>T</title><ellipse cx="657" cy="-65" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="657" y="-60.8" font-family="Times,serif" font-size="14" text-anchor="middle">T</text></g><g class="node"><title>Z</title><ellipse cx="567" cy="-65" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="567" y="-60.8" font-family="Times,serif" font-size="14" text-anchor="middle">Z</text></g><g class="edge"><title>Z-&gt;T</title><path fill="none" stroke="#000" d="M594.003-65h25.528"></path><path stroke="#000" d="m619.705-68.5 10 3.5-10 3.5z"></path></g><g class="node"><title>Y</title><ellipse cx="477" cy="-65" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="477" y="-60.8" font-family="Times,serif" font-size="14" text-anchor="middle">Y</text></g><g class="edge"><title>Y-&gt;Z</title><path fill="none" stroke="#000" d="M504.003-65h25.528"></path><path stroke="#000" d="m529.705-68.5 10 3.5-10 3.5z"></path></g><g class="node"><title>X</title><ellipse cx="387" cy="-65" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="387" y="-60.8" font-family="Times,serif" font-size="14" text-anchor="middle">X</text></g><g class="edge"><title>X-&gt;Y</title><path fill="none" stroke="#000" d="M414.003-65h25.528"></path><path stroke="#000" d="m439.705-68.5 10 3.5-10 3.5z"></path></g><g class="node"><title>S</title><ellipse cx="27" cy="-76" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="27" y="-71.8" font-family="Times,serif" font-size="14" text-anchor="middle">S</text></g><g class="node"><title>D</title><ellipse cx="117" cy="-130" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="117" y="-125.8" font-family="Times,serif" font-size="14" text-anchor="middle">D</text></g><g class="edge"><title>S-&gt;D</title><path fill="none" stroke="#000" d="m47.422-88.253 40.492-24.296"></path><path stroke="#000" d="m86.283-115.651 10.375-2.144-6.774 8.146z"></path></g><g class="node"><title>A</title><ellipse cx="117" cy="-76" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="117" y="-71.8" font-family="Times,serif" font-size="14" text-anchor="middle">A</text></g><g class="edge"><title>S-&gt;A</title><path fill="none" stroke="#000" d="M54.003-76h25.528"></path><path stroke="#000" d="m79.705-79.5 10 3.5-10 3.5z"></path></g><g class="node"><title>E</title><ellipse cx="207" cy="-30" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="207" y="-25.8" font-family="Times,serif" font-size="14" text-anchor="middle">E</text></g><g class="edge"><title>S-&gt;E</title><path fill="none" stroke="#000" d="M48.675-65.153C60.607-59.583 75.83-53.12 90-49c26.218 7.623 56.687 12.448 79.959 15.327"></path><path stroke="#000" d="m170.579-37.124 9.524 4.64-10.34 2.312z"></path></g><g class="edge"><title>D-&gt;T</title><path fill="none" stroke="#000" d="M144.14-130H477c56.032 0 116.356 28.208 151 47.46"></path><path stroke="#000" d="m630.107-85.368 6.958 7.989-10.422-1.906z"></path></g><g class="node"><title>B</title><ellipse cx="207" cy="-84" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="207" y="-79.8" font-family="Times,serif" font-size="14" text-anchor="middle">B</text></g><g class="edge"><title>D-&gt;B</title><path fill="none" stroke="#000" d="M138.787-118.865c11.275 5.764 25.23 12.896 37.573 19.204"></path><path stroke="#000" d="m178.103-102.7 7.311 7.667-10.497-1.434z"></path></g><g class="edge"><title>A-&gt;B</title><path fill="none" stroke="#000" d="m144.003-78.4 26.048-2.316"></path><path stroke="#000" d="m169.745-84.202 10.271 2.6-9.65 4.372z"></path></g><g class="edge"><title>E-&gt;T</title><path fill="none" stroke="#000" d="M232.118-23.117C266.708-14.26 331.083 0 387 0h90c56.032 0 116.356-28.208 151-47.46"></path><path stroke="#000" d="m626.643-50.715 10.422-1.906-6.958 7.99z"></path></g><g class="node"><title>C</title><ellipse cx="297" cy="-46" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="297" y="-41.8" font-family="Times,serif" font-size="14" text-anchor="middle">C</text></g><g class="edge"><title>E-&gt;C</title><path fill="none" stroke="#000" d="m233.516-34.714 27.187-4.833"></path><path stroke="#000" d="m260.215-43.015 10.458 1.695-9.233 5.197z"></path></g><g class="edge"><title>C-&gt;X</title><path fill="none" stroke="#000" d="M323.032-51.496c8.769-1.85 18.713-3.95 28.104-5.933"></path><path stroke="#000" d="m350.52-60.876 10.507 1.36-9.062 5.49z"></path></g><g class="edge"><title>B-&gt;X</title><path fill="none" stroke="#000" d="M233.978-81.715c23.73 2.07 59.198 5.31 90.022 8.715 8.492.938 17.616 2.041 26.21 3.124"></path><path stroke="#000" d="m350.879-73.32 9.475 4.741-10.364 2.203z"></path></g><g class="edge"><title>B-&gt;C</title><path fill="none" stroke="#000" d="M230.177-74.214 264.67-59.65"></path><path stroke="#000" d="m266.05-62.867 7.851 7.114-10.574-.665z"></path></g></g></svg></td></tr><tr><td style="text-align:center"><a href="#create-a-subflow-graph">Subflow Tasking</a></td></tr><tr><td style="text-align:center"><svg xmlns="http://www.w3.org/2000/svg" width="50%" height="216" viewBox="0 0 684 162" align="right"><g class="graph" transform="translate(4 158)"><title>Topology</title><path fill="#fff" stroke="transparent" d="M-4 4v-162h684V4z"></path><g class="cluster"><title>cluster_B</title><path fill="none" stroke="#00f" d="M8-69v-77h328v77z"></path><text x="172" y="-129.4" font-family="Times,serif" font-size="14" text-anchor="middle">Subflow_B</text></g><g class="node"><title>D</title><ellipse cx="389.5" cy="-41" fill="none" stroke="#000" rx="25.5" ry="18"></ellipse><text x="389.5" y="-36.8" font-family="Times,serif" font-size="14" text-anchor="middle">D</text></g><g class="node"><title>X</title><ellipse cx="476.5" cy="-49" fill="none" stroke="#000" rx="25.5" ry="18"></ellipse><text x="476.5" y="-44.8" font-family="Times,serif" font-size="14" text-anchor="middle">X</text></g><g class="edge"><title>D-&gt;X</title><path fill="none" stroke="#000" d="m415.132-43.357 25.713-2.364"></path><path stroke="#000" d="m440.772-49.23 10.279 2.57-9.638 4.401z"></path></g><g class="node"><title>C</title><ellipse cx="215.5" cy="-41" fill="none" stroke="#000" rx="25.5" ry="18"></ellipse><text x="215.5" y="-36.8" font-family="Times,serif" font-size="14" text-anchor="middle">C</text></g><g class="node"><title>B</title><ellipse cx="302.5" cy="-95" fill="none" stroke="#000" rx="25.5" ry="18"></ellipse><text x="302.5" y="-90.8" font-family="Times,serif" font-size="14" text-anchor="middle">B</text></g><g class="edge"><title>C-&gt;B</title><path fill="none" stroke="#000" d="m234.808-52.984 39.854-24.738"></path><path stroke="#000" d="m272.904-80.75 10.342-2.3-6.65 8.248z"></path></g><g class="edge"><title>B-&gt;D</title><path fill="none" stroke="#000" d="m321.808-83.016 39.854 24.738"></path><path stroke="#000" d="m363.595-61.198 6.65 8.247-10.341-2.3z"></path></g><g class="node"><title>E</title><ellipse cx="389.5" cy="-95" fill="none" stroke="#000" rx="25.5" ry="18"></ellipse><text x="389.5" y="-90.8" font-family="Times,serif" font-size="14" text-anchor="middle">E</text></g><g class="edge"><title>B-&gt;E</title><path fill="none" stroke="#000" d="M328.132-95h25.484"></path><path stroke="#000" d="m353.75-98.5 10 3.5-10 3.5z"></path></g><g class="node"><title>B3</title><ellipse cx="215.5" cy="-95" fill="none" stroke="#000" rx="25.5" ry="18"></ellipse><text x="215.5" y="-90.8" font-family="Times,serif" font-size="14" text-anchor="middle">B3</text></g><g class="edge"><title>B3-&gt;B</title><path fill="none" stroke="#000" d="M241.132-95h25.484"></path><path stroke="#000" d="m266.75-98.5 10 3.5-10 3.5z"></path></g><g class="node"><title>B2</title><ellipse cx="128.5" cy="-95" fill="none" stroke="#000" rx="25.5" ry="18"></ellipse><text x="128.5" y="-90.8" font-family="Times,serif" font-size="14" text-anchor="middle">B2</text></g><g class="edge"><title>B2-&gt;B3</title><path fill="none" stroke="#000" d="M154.132-95h25.484"></path><path stroke="#000" d="m179.75-98.5 10 3.5-10 3.5z"></path></g><g class="node"><title>B1</title><ellipse cx="41.5" cy="-95" fill="none" stroke="#000" rx="25.5" ry="18"></ellipse><text x="41.5" y="-90.8" font-family="Times,serif" font-size="14" text-anchor="middle">B1</text></g><g class="edge"><title>B1-&gt;B2</title><path fill="none" stroke="#000" d="M67.132-95h25.484"></path><path stroke="#000" d="m92.75-98.5 10 3.5-10 3.5z"></path></g><g class="node"><title>A</title><ellipse cx="128.5" cy="-18" fill="none" stroke="#000" rx="25.5" ry="18"></ellipse><text x="128.5" y="-13.8" font-family="Times,serif" font-size="14" text-anchor="middle">A</text></g><g class="edge"><title>A-&gt;D</title><path fill="none" stroke="#000" d="M153.915-15.975c11.076.786 24.215 1.59 36.085 1.975 22.655.736 28.425 2.036 51 0 39.57-3.568 84.36-12.381 114.306-18.974"></path><path stroke="#000" d="m354.723-36.43 10.523 1.228-8.993 5.602z"></path></g><g class="edge"><title>A-&gt;C</title><path fill="none" stroke="#000" d="m152.734-24.407 28.93-7.648"></path><path stroke="#000" d="m180.833-35.455 10.563.827-8.774 5.94z"></path></g><g class="edge"><title>E-&gt;X</title><path fill="none" stroke="#000" d="m410.118-84.099 37.012 19.57"></path><path stroke="#000" d="m448.826-67.591 7.204 7.768-10.476-1.58z"></path></g><g class="node"><title>Z</title><ellipse cx="650.5" cy="-72" fill="none" stroke="#000" rx="25.5" ry="18"></ellipse><text x="650.5" y="-67.8" font-family="Times,serif" font-size="14" text-anchor="middle">Z</text></g><g class="edge"><title>E-&gt;Z</title><path fill="none" stroke="#000" d="M415.001-92.753 614.85-75.142"></path><path stroke="#000" d="m615.241-78.62 9.654 4.364-10.268 2.608z"></path></g><g class="node"><title>Y</title><ellipse cx="563.5" cy="-49" fill="none" stroke="#000" rx="25.5" ry="18"></ellipse><text x="563.5" y="-44.8" font-family="Times,serif" font-size="14" text-anchor="middle">Y</text></g><g class="edge"><title>X-&gt;Y</title><path fill="none" stroke="#000" d="M502.132-49h25.484"></path><path stroke="#000" d="m527.75-52.5 10 3.5-10 3.5z"></path></g><g class="edge"><title>Y-&gt;Z</title><path fill="none" stroke="#000" d="m587.734-55.407 28.93-7.648"></path><path stroke="#000" d="m615.833-66.455 10.563.827-8.774 5.94z"></path></g></g></svg></td></tr></tbody></table>
<p>Taskflow 支持条件任务，让您能够跨相关任务快速做出控制流决策，从而实现使用现有工具难以实现的循环和条件。</p>
<!-- -->
<table><thead><tr><th style="text-align:center"><a href="#integrate-control-flow-to-a-task-graph">Conditional Tasking</a></th></tr></thead><tbody><tr><td style="text-align:center"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="272" viewBox="0 0 1187.88 204"><g class="graph" transform="translate(4 200)"><title>Taskflow</title><path fill="#fff" stroke="transparent" d="M-4 4v-204h1187.877V4z"></path><g class="cluster"><title>cluster_p0x7ffc2daeebe0</title><path fill="none" stroke="transparent" d="M8-8v-180h1163.877V-8z"></path></g><g class="node"><title>p0x1676c20</title><ellipse cx="493.625" cy="-34" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="493.625" y="-29.8" font-family="Times,serif" font-size="14" text-anchor="middle">H</text></g><g class="node"><title>I</title><ellipse cx="651.438" cy="-34" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="651.438" y="-29.8" font-family="Times,serif" font-size="14" text-anchor="middle">I</text></g><g class="edge"><title>p0x1676c20-&gt;I</title><path fill="none" stroke="#000" d="M520.755-34h93.586"></path><path stroke="#000" d="m614.4-37.5 10 3.5-10 3.5z"></path></g><g class="node"><title>p0x1676d50</title><ellipse cx="493.625" cy="-88" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="493.625" y="-83.8" font-family="Times,serif" font-size="14" text-anchor="middle">G</text></g><g class="node"><title>p0x1676e80</title><ellipse cx="172" cy="-79" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="172" y="-74.8" font-family="Times,serif" font-size="14" text-anchor="middle">F</text></g><g class="node"><title>p0x1677700</title><path fill="#7fffd4" stroke="#000" d="m329.813-97-55.626 18 55.626 18 55.626-18z"></path><text x="329.813" y="-74.8" font-family="Times,serif" font-size="14" text-anchor="middle">cond_2</text></g><g class="edge"><title>p0x1676e80-&gt;p0x1677700</title><path fill="none" stroke="#000" d="M199.129-79h64.57"></path><path stroke="#000" d="m263.98-82.5 10 3.5-10 3.5z"></path></g><g class="edge"><title>p0x1677700-&gt;p0x1676c20</title><path fill="none" stroke="#000" stroke-dasharray="5,2" d="m360.24-70.641 98.42 27.036"></path><path stroke="#000" d="m459.742-46.938 8.716 6.024-10.57.726z"></path><text x="426.125" y="-57.2" font-family="Times,serif" font-size="14" text-anchor="middle">1</text></g><g class="edge"><title>p0x1677700-&gt;p0x1676d50</title><path fill="none" stroke="#000" stroke-dasharray="5,2" d="m377.635-81.627 78.62-4.32"></path><path stroke="#000" d="m456.262-89.452 10.177 2.946-9.793 4.043z"></path><text x="426.125" y="-88.2" font-family="Times,serif" font-size="14" text-anchor="middle">0</text></g><g class="node"><title>p0x1676fc0</title><ellipse cx="844.064" cy="-139" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="844.064" y="-134.8" font-family="Times,serif" font-size="14" text-anchor="middle">E</text></g><g class="node"><title>K</title><ellipse cx="1007.877" cy="-139" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="1007.877" y="-134.8" font-family="Times,serif" font-size="14" text-anchor="middle">K</text></g><g class="edge"><title>p0x1676fc0-&gt;K</title><path fill="none" stroke="#000" d="M871.114-139h99.487"></path><path stroke="#000" d="m970.786-142.5 10 3.5-10 3.5z"></path></g><g class="node"><title>p0x16770d0</title><ellipse cx="493.625" cy="-162" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="493.625" y="-157.8" font-family="Times,serif" font-size="14" text-anchor="middle">D</text></g><g class="node"><title>p0x1677560</title><path fill="#7fffd4" stroke="#000" d="m651.438-157-55.626 18 55.626 18 55.626-18z"></path><text x="651.438" y="-134.8" font-family="Times,serif" font-size="14" text-anchor="middle">cond_1</text></g><g class="edge"><title>p0x16770d0-&gt;p0x1677560</title><path fill="none" stroke="#000" d="m520.04-158.15 82.63 12.042"></path><path stroke="#000" d="m603.413-149.536 9.39 4.905-10.4 2.022z"></path></g><g class="edge"><title>p0x1677560-&gt;p0x1676fc0</title><path fill="none" stroke="#000" stroke-dasharray="5,2" d="M707.154-139h99.391"></path><path stroke="#000" d="m806.804-142.5 10 3.5-10 3.5z"></path><text x="747.751" y="-143.2" font-family="Times,serif" font-size="14" text-anchor="middle">1</text></g><g class="node"><title>p0x1677340</title><ellipse cx="172" cy="-133" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="172" y="-128.8" font-family="Times,serif" font-size="14" text-anchor="middle">B</text></g><g class="edge"><title>p0x1677560-&gt;p0x1677340</title><path fill="none" stroke="#000" stroke-dasharray="5,2" d="M601.13-137.17c-24.317.81-53.925 1.688-80.504 2.17-113.27 2.056-247.271 2.175-311.138 2.09"></path><path stroke="#000" d="m209.12-129.41-9.995-3.517 10.006-3.484z"></path><text x="426.125" y="-137.2" font-family="Times,serif" font-size="14" text-anchor="middle">0</text></g><g class="node"><title>p0x1677230</title><ellipse cx="329.813" cy="-162" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="329.813" y="-157.8" font-family="Times,serif" font-size="14" text-anchor="middle">C</text></g><g class="edge"><title>p0x1677230-&gt;p0x16770d0</title><path fill="none" stroke="#000" d="M356.863-162h99.487"></path><path stroke="#000" d="m456.535-165.5 10 3.5-10 3.5z"></path></g><g class="edge"><title>p0x1677340-&gt;p0x1677230</title><path fill="none" stroke="#000" d="m198.06-137.789 95.46-17.542"></path><path stroke="#000" d="m293.247-158.839 10.467 1.635-9.202 5.25z"></path></g><g class="node"><title>p0x1677450</title><ellipse cx="43" cy="-105" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="43" y="-100.8" font-family="Times,serif" font-size="14" text-anchor="middle">A</text></g><g class="edge"><title>p0x1677450-&gt;p0x1676e80</title><path fill="none" stroke="#000" d="m69.105-99.738 66.87 13.477"></path><path stroke="#000" d="m136.822-89.66 9.112 5.406-10.495 1.456z"></path></g><g class="edge"><title>p0x1677450-&gt;p0x1677340</title><path fill="none" stroke="#000" d="m68.795-110.599 67.432-14.636"></path><path stroke="#000" d="m135.735-128.71 10.515 1.3-9.03 5.54z"></path></g><g class="node"><title>J</title><path fill="#7fffd4" stroke="#000" d="m844.064-52-55.626 18 55.626 18 55.626-18z"></path><text x="844.064" y="-29.8" font-family="Times,serif" font-size="14" text-anchor="middle">cond_3</text></g><g class="edge"><title>I-&gt;J</title><path fill="none" stroke="#000" d="M678.628-34h99.111"></path><path stroke="#000" d="m778.08-37.5 10 3.5-10 3.5z"></path></g><g class="edge"><title>J-&gt;J</title><path fill="none" stroke="#000" stroke-dasharray="5,2" d="M831.828-48.417C827.556-59.166 831.634-70 844.064-70c8.351 0 12.932 4.89 13.744 11.36"></path><path stroke="#000" d="m861.222-57.799-4.923 9.382-2.002-10.404z"></path><text x="844.064" y="-74.2" font-family="Times,serif" font-size="14" text-anchor="middle">0</text></g><g class="node"><title>L</title><ellipse cx="1007.877" cy="-34" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="1007.877" y="-29.8" font-family="Times,serif" font-size="14" text-anchor="middle">L</text></g><g class="edge"><title>J-&gt;L</title><path fill="none" stroke="#000" stroke-dasharray="5,2" d="M899.98-34h70.631"></path><path stroke="#000" d="m970.673-37.5 10 3.5-10 3.5z"></path><text x="940.377" y="-38.2" font-family="Times,serif" font-size="14" text-anchor="middle">1</text></g><g class="node"><title>M</title><ellipse cx="1136.877" cy="-34" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="1136.877" y="-29.8" font-family="Times,serif" font-size="14" text-anchor="middle">M</text></g><g class="edge"><title>L-&gt;M</title><path fill="none" stroke="#000" d="M1034.92-34h64.902"></path><path stroke="#000" d="m1099.87-37.5 10 3.5-10 3.5z"></path></g></g></svg></td></tr></tbody></table>
<p>Taskflow 是可组合的。您可以通过组合模块化和可重复使用的块来创建大型并行图，这些块更容易在单个范围内进行优化。</p>
<!-- -->
<table><thead><tr><th style="text-align:center"><a href="#compose-task-graphs">Taskflow Composition</a></th></tr></thead><tbody><tr><td style="text-align:center"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="173pt" viewBox="0 0 1054 172.8"><g class="graph" transform="translate(4 168.8)"><title>Taskflow</title><path fill="#fff" stroke="transparent" d="M-4 4v-172.8h1054V4z"></path><g class="cluster"><title>cluster_p0x7ffee0bae020</title><path fill="none" stroke="#000" d="M8-8v-148.8h168V-8z"></path><text x="92" y="-140.2" font-family="Times,serif" font-size="14" text-anchor="middle">Taskflow: F4</text></g><g class="cluster"><title>cluster_p0x7ffee0badd80</title><path fill="none" stroke="#000" d="M184-8v-148.8h312V-8z"></path><text x="340" y="-140.2" font-family="Times,serif" font-size="14" text-anchor="middle">Taskflow: F2</text></g><g class="cluster"><title>cluster_p0x7ffee0badce0</title><path fill="none" stroke="#000" d="M504-80v-76.8h286V-80z"></path><text x="647" y="-140.2" font-family="Times,serif" font-size="14" text-anchor="middle">Taskflow: F1</text></g><g class="cluster"><title>cluster_p0x7ffee0bade20</title><path fill="none" stroke="#000" d="M798-80v-76.8h240V-80z"></path><text x="918" y="-140.2" font-family="Times,serif" font-size="14" text-anchor="middle">Taskflow: F3</text></g><g class="node"><title>p0x7f9ec5801238</title><path fill="none" stroke="#00f" d="M168.36-124H19.64l-4 4v32h148.72l4-4zM164.36-120H15.64M164.36-120v32M164.36-120l4-4"></path><text x="92" y="-101.8" font-family="Times,serif" font-size="14" text-anchor="middle">module3 [Taskflow: F3]</text></g><g class="node"><title>p0x7f9ec5801338</title><path fill="none" stroke="#00f" d="M168.36-52H19.64l-4 4v32h148.72l4-4zM164.36-48H15.64M164.36-48v32M164.36-48l4-4"></path><text x="92" y="-29.8" font-family="Times,serif" font-size="14" text-anchor="middle">module2 [Taskflow: F2]</text></g><g class="edge"><title>p0x7f9ec5801238-&gt;p0x7f9ec5801338</title><path fill="none" stroke="#000" d="M92-87.831v25.414"></path><path stroke="#000" d="m95.5-62.413-3.5 10-3.5-10z"></path></g><g class="node"><title>p0x7f9ec5800a38</title><ellipse cx="461" cy="-106" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="461" y="-101.8" font-family="Times,serif" font-size="14" text-anchor="middle">f2A</text></g><g class="node"><title>p0x7f9ec5801038</title><ellipse cx="389" cy="-34" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="389" y="-29.8" font-family="Times,serif" font-size="14" text-anchor="middle">f2C</text></g><g class="edge"><title>p0x7f9ec5800a38-&gt;p0x7f9ec5801038</title><path fill="none" stroke="#000" d="m445.73-90.73-34.166 34.166"></path><path stroke="#000" d="m413.793-53.844-9.546 4.597 4.597-9.546z"></path></g><g class="node"><title>p0x7f9ec5801138</title><ellipse cx="389" cy="-106" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="389" y="-101.8" font-family="Times,serif" font-size="14" text-anchor="middle">f2B</text></g><g class="edge"><title>p0x7f9ec5801138-&gt;p0x7f9ec5801038</title><path fill="none" stroke="#000" d="M389-87.831v25.414"></path><path stroke="#000" d="m392.5-62.413-3.5 10-3.5-10z"></path></g><g class="node"><title>p0x7f9ec5800f38</title><path fill="none" stroke="#00f" d="M344.36-124H195.64l-4 4v32h148.72l4-4zM340.36-120H191.64M340.36-120v32M340.36-120l4-4"></path><text x="268" y="-101.8" font-family="Times,serif" font-size="14" text-anchor="middle">module1 [Taskflow: F1]</text></g><g class="edge"><title>p0x7f9ec5800f38-&gt;p0x7f9ec5801038</title><path fill="none" stroke="#000" d="m298.533-87.831 61.577 36.64"></path><path stroke="#000" d="m361.935-54.178 6.804 8.122-10.384-2.106z"></path></g><g class="node"><title>p0xa</title><ellipse cx="755" cy="-106" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="755" y="-101.8" font-family="Times,serif" font-size="14" text-anchor="middle">f1A</text></g><g class="node"><title>p0xb</title><ellipse cx="683" cy="-106" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="683" y="-101.8" font-family="Times,serif" font-size="14" text-anchor="middle">f1B</text></g><g class="node"><title>p0xc</title><ellipse cx="611" cy="-106" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="611" y="-101.8" font-family="Times,serif" font-size="14" text-anchor="middle">f1C</text></g><g class="node"><title>p0xd</title><ellipse cx="539" cy="-106" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="539" y="-101.8" font-family="Times,serif" font-size="14" text-anchor="middle">f1D</text></g><g class="node"><title>p0x7f9ec5800e38</title><path fill="none" stroke="#00f" d="M1030.36-124H881.64l-4 4v32h148.72l4-4zM1026.36-120H877.64M1026.36-120v32M1026.36-120l4-4"></path><text x="954" y="-101.8" font-family="Times,serif" font-size="14" text-anchor="middle">module2 [Taskflow: F2]</text></g><g class="node"><title>p0x7f9ec5800d38</title><ellipse cx="833" cy="-106" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="833" y="-101.8" font-family="Times,serif" font-size="14" text-anchor="middle">f3A</text></g></g></svg></td></tr></tbody></table>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="start-your-first-taskflow-program">启动您的第一个 Taskflow 程序<a href="#start-your-first-taskflow-program" class="hash-link" aria-label="Direct link to 启动您的第一个 Taskflow 程序" title="Direct link to 启动您的第一个 Taskflow 程序">​</a></h2>
<p>以下程序（<code>simple.cpp</code>）创建四个任务
<code>A</code>、<code>B</code>、<code>C</code> 和 <code>D</code>，其中 <code>A</code> 在 <code>B</code> 和 <code>C</code> 之前运行，而 <code>D</code> 在 <code>B</code> 和 <code>C</code> 之后运行。
当 <code>A</code> 完成时，<code>B</code> 和 <code>C</code> 可以并行运行。
在现场试用 <a href="https://godbolt.org/z/j8hx3xnnx" target="_blank" rel="noopener noreferrer">Compiler Explorer (godbolt)</a>!</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#005CC5">#</span><span class="token macro property directive keyword" style="color:#CF222E">include</span><span class="token macro property" style="color:#005CC5"> </span><span class="token macro property string" style="color:#C6105F">&lt;kthread/kthread.h&gt;</span><span class="token macro property" style="color:#005CC5">  </span><span class="token macro property comment" style="color:#6B6B6B;font-style:italic">// Taskflow is header-only</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#CF222E">int</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">TaskExecutor executor</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Taskflow taskflow</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">A</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> B</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> C</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> D</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> taskflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">emplace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// create four tasks</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;TaskA\n&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;TaskB\n&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;TaskC\n&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;TaskD\n&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                                  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  A</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">precede</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">B</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> C</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// A runs before B and C</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  D</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">succeed</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">B</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> C</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// D runs after  B and C</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">taskflow</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">wait</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h1>Visualize Your First Taskflow Program</h1>
<p>Taskflow comes with a built-in profiler,
for you to profile and visualize taskflow programs
in an easy-to-use web-based interface.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#6B6B6B;font-style:italic"># run the program with the environment variable TF_ENABLE_PROFILER enabled</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">~$ </span><span class="token assign-left variable" style="color:#E36209">KTHREAD_ENABLE_PROFILER</span><span class="token operator" style="color:#D73A49">=</span><span class="token plain">simple.json ./simple</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">~$ </span><span class="token function" style="color:#8250DF">cat</span><span class="token plain"> simple.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;executor&quot;</span><span class="token builtin class-name" style="color:#116329">:</span><span class="token string" style="color:#C6105F">&quot;0&quot;</span><span class="token plain">,</span><span class="token string" style="color:#C6105F">&quot;data&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;worker&quot;</span><span class="token plain">:0,</span><span class="token string" style="color:#C6105F">&quot;level&quot;</span><span class="token plain">:0,</span><span class="token string" style="color:#C6105F">&quot;data&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;span&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#005CC5">172,186</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">,</span><span class="token string" style="color:#C6105F">&quot;name&quot;</span><span class="token builtin class-name" style="color:#116329">:</span><span class="token string" style="color:#C6105F">&quot;0_0&quot;</span><span class="token plain">,</span><span class="token string" style="color:#C6105F">&quot;type&quot;</span><span class="token builtin class-name" style="color:#116329">:</span><span class="token string" style="color:#C6105F">&quot;static&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;span&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#005CC5">187,189</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">,</span><span class="token string" style="color:#C6105F">&quot;name&quot;</span><span class="token builtin class-name" style="color:#116329">:</span><span class="token string" style="color:#C6105F">&quot;0_1&quot;</span><span class="token plain">,</span><span class="token string" style="color:#C6105F">&quot;type&quot;</span><span class="token builtin class-name" style="color:#116329">:</span><span class="token string" style="color:#C6105F">&quot;static&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;worker&quot;</span><span class="token plain">:2,</span><span class="token string" style="color:#C6105F">&quot;level&quot;</span><span class="token plain">:0,</span><span class="token string" style="color:#C6105F">&quot;data&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;span&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#005CC5">93,164</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">,</span><span class="token string" style="color:#C6105F">&quot;name&quot;</span><span class="token builtin class-name" style="color:#116329">:</span><span class="token string" style="color:#C6105F">&quot;2_0&quot;</span><span class="token plain">,</span><span class="token string" style="color:#C6105F">&quot;type&quot;</span><span class="token builtin class-name" style="color:#116329">:</span><span class="token string" style="color:#C6105F">&quot;static&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#C6105F">&quot;span&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#005CC5">170,179</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">,</span><span class="token string" style="color:#C6105F">&quot;name&quot;</span><span class="token builtin class-name" style="color:#116329">:</span><span class="token string" style="color:#C6105F">&quot;2_1&quot;</span><span class="token plain">,</span><span class="token string" style="color:#C6105F">&quot;type&quot;</span><span class="token builtin class-name" style="color:#116329">:</span><span class="token string" style="color:#C6105F">&quot;static&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In addition to execution diagram, you can dump the graph to a DOT format
and visualize it using a number of free [GraphViz][GraphViz] tools.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// dump the taskflow graph to a DOT format through std::cout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">taskflow.dump(std::cout); </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->
<svg xmlns="http://www.w3.org/2000/svg" width="242pt" height="98pt" viewBox="0 0 242 98" align="center"><g class="graph" transform="translate(4 94)"><title>Taskflow</title><path fill="#fff" stroke="transparent" d="M-4 4v-98h242V4z"></path><g class="node"><title>A</title><ellipse cx="27" cy="-45" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="27" y="-40.8" font-family="Times,serif" font-size="14" text-anchor="middle">A</text></g><g class="node"><title>B</title><ellipse cx="117" cy="-72" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="117" y="-67.8" font-family="Times,serif" font-size="14" text-anchor="middle">B</text></g><g class="edge"><title>A-&gt;B</title><path fill="none" stroke="#000" d="m52.07-52.521 30.494-9.148"></path><path stroke="#000" d="m81.792-65.091 10.584.478-8.573 6.226z"></path></g><g class="node"><title>C</title><ellipse cx="117" cy="-18" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="117" y="-13.8" font-family="Times,serif" font-size="14" text-anchor="middle">C</text></g><g class="edge"><title>A-&gt;C</title><path fill="none" stroke="#000" d="m52.07-37.479 30.494 9.148"></path><path stroke="#000" d="m83.803-31.613 8.573 6.226-10.585.479z"></path></g><g class="node"><title>D</title><ellipse cx="207" cy="-45" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="207" y="-40.8" font-family="Times,serif" font-size="14" text-anchor="middle">D</text></g><g class="edge"><title>B-&gt;D</title><path fill="none" stroke="#000" d="m142.07-64.479 30.494 9.148"></path><path stroke="#000" d="m173.803-58.613 8.572 6.226-10.583.479z"></path></g><g class="edge"><title>C-&gt;D</title><path fill="none" stroke="#000" d="m142.07-25.521 30.494-9.148"></path><path stroke="#000" d="m171.792-38.091 10.583.478-8.572 6.226z"></path></g></g></svg>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="express-task-graph-parallelism">Express 任务图并行性<a href="#express-task-graph-parallelism" class="hash-link" aria-label="Direct link to Express 任务图并行性" title="Direct link to Express 任务图并行性">​</a></h2>
<p>Taskflow 为用户提供了静态和动态任务图构造，以在嵌入图内控制流的任务图中表达端到端并行性。</p>
<ol>
<li><a href="#create-a-subflow-graph">创建子流图</a></li>
<li><a href="#integrate-control-flow-to-a-task-graph">将控制流集成到任务图</a></li>
<li><a href="#compose-task-graphs">编写任务图</a></li>
<li><a href="#launch-asynchronous-tasks">启动异步任务</a></li>
<li><a href="#execute-a-taskflow">执行任务流</a></li>
<li><a href="#leverage-standard-parallel-algorithms">利用标准并行算法</a></li>
</ol>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="create-a-subflow-graph">创建子流图<a href="#create-a-subflow-graph" class="hash-link" aria-label="Direct link to 创建子流图" title="Direct link to 创建子流图">​</a></h3>
<p>Taskflow 支持<em>动态任务</em>，让您从任务执行中创建子流程图
以执行动态并行。
以下程序生成以任务“B”为父级的任务依赖关系图。</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Task A </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> taskflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">emplace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;A&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Task C </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> taskflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">emplace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;C&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Task D </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> taskflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">emplace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;D&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Task B </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> taskflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">emplace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Subflow</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain"> subflow</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Task B1 </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> subflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">emplace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;B1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Task B2 </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> subflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">emplace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;B2&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Task B3 </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> subflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">emplace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;B3&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  B3</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">succeed</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">B1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> B2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// B3 runs after B1 and B2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;B&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">A</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">precede</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">B</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> C</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// A runs before B and C</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">D</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">succeed</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">B</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> C</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// D runs after  B and C</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->
<svg xmlns="http://www.w3.org/2000/svg" width="464" height="256" viewBox="0 0 348 192" align="center"><g class="graph" transform="translate(4 188)"><title>Taskflow</title><path fill="#fff" stroke="transparent" d="M-4 4v-192h348V4z"></path><g class="cluster"><title>cluster_p0x7f9866c01b70</title><path fill="none" stroke="#00f" d="M8-45v-131h250v131z"></path><text x="133" y="-159.4" font-family="Times,serif" font-size="14" text-anchor="middle">Subflow: B</text></g><g class="node"><title>p0x7f9866c01820</title><ellipse cx="133" cy="-18" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="133" y="-13.8" font-family="Times,serif" font-size="14" text-anchor="middle">A</text></g><g class="node"><title>p0x7f9866c01b70</title><ellipse cx="223" cy="-72" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="223" y="-67.8" font-family="Times,serif" font-size="14" text-anchor="middle">B</text></g><g class="edge"><title>p0x7f9866c01820-&gt;p0x7f9866c01b70</title><path fill="none" stroke="#000" d="m153.422-30.253 40.492-24.296"></path><path stroke="#000" d="m192.283-57.651 10.375-2.144-6.774 8.146z"></path></g><g class="node"><title>p0x7f9866c01930</title><ellipse cx="223" cy="-18" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="223" y="-13.8" font-family="Times,serif" font-size="14" text-anchor="middle">C</text></g><g class="edge"><title>p0x7f9866c01820-&gt;p0x7f9866c01930</title><path fill="none" stroke="#000" d="M160.003-18h25.528"></path><path stroke="#000" d="m185.705-21.5 10 3.5-10 3.5z"></path></g><g class="node"><title>p0x7f9866c01a40</title><ellipse cx="313" cy="-45" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="313" y="-40.8" font-family="Times,serif" font-size="14" text-anchor="middle">D</text></g><g class="edge"><title>p0x7f9866c01b70-&gt;p0x7f9866c01a40</title><path fill="none" stroke="#000" d="m248.07-64.479 30.494 9.148"></path><path stroke="#000" d="m279.803-58.613 8.572 6.226-10.584.479z"></path></g><g class="edge"><title>p0x7f9866c01930-&gt;p0x7f9866c01a40</title><path fill="none" stroke="#000" d="m248.07-25.521 30.494-9.148"></path><path stroke="#000" d="m277.792-38.091 10.584.478-8.573 6.226z"></path></g><g class="node"><title>p0x7f9866d01880</title><ellipse cx="43" cy="-125" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="43" y="-120.8" font-family="Times,serif" font-size="14" text-anchor="middle">B1</text></g><g class="node"><title>p0x7f9866d01ac0</title><ellipse cx="133" cy="-72" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="133" y="-67.8" font-family="Times,serif" font-size="14" text-anchor="middle">B3</text></g><g class="edge"><title>p0x7f9866d01880-&gt;p0x7f9866d01ac0</title><path fill="none" stroke="#000" d="m63.422-112.973 40.492 23.845"></path><path stroke="#000" d="m105.818-92.07 6.84 8.091-10.392-2.058z"></path></g><g class="edge"><title>p0x7f9866d01ac0-&gt;p0x7f9866c01b70</title><path fill="none" stroke="#000" d="M160.003-72h25.528"></path><path stroke="#000" d="m185.705-75.5 10 3.5-10 3.5z"></path></g><g class="node"><title>p0x7f9866d019a0</title><ellipse cx="43" cy="-71" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="43" y="-66.8" font-family="Times,serif" font-size="14" text-anchor="middle">B2</text></g><g class="edge"><title>p0x7f9866d019a0-&gt;p0x7f9866d01ac0</title><path fill="none" stroke="#000" d="m70.003-71.3 25.528-.284"></path><path stroke="#000" d="m95.667-75.085 10.038 3.388-9.96 3.611z"></path></g></g></svg>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="integrate-control-flow-to-a-task-graph">将控制流集成到任务图<a href="#integrate-control-flow-to-a-task-graph" class="hash-link" aria-label="Direct link to 将控制流集成到任务图" title="Direct link to 将控制流集成到任务图">​</a></h3>
<p>Taskflow 支持<em>条件任务</em>，让您能够  跨相关任务快速做出控制流决策，从而在<em>端到端</em>任务图中实现循环和条件。</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Task init </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> taskflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">emplace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;init&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Task stop </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> taskflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">emplace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;stop&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// creates a condition task that returns a random binary</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Task cond </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> taskflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">emplace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token function" style="color:#8250DF">rand</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">%</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;cond&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">init</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">precede</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cond</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// creates a feedback loop {0: cond, 1: stop}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cond</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">precede</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cond</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> stop</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->
<svg xmlns="http://www.w3.org/2000/svg" width="281pt" height="79pt" viewBox="0 0 280.58 78.8" align="center"><g class="graph" transform="translate(4 74.8)"><title>Taskflow</title><path fill="#fff" stroke="transparent" d="M-4 4v-78.8h280.577V4z"></path><g class="node"><title>cond</title><path fill="#7fffd4" stroke="#000" d="M133.156-36 90.844-18l42.312 18 42.312-18z"></path><text x="133.156" y="-13.8" font-family="Times,serif" font-size="14" text-anchor="middle">cond</text></g><g class="edge"><title>cond-&gt;cond</title><path fill="none" stroke="#000" stroke-dasharray="5,2" d="M123.359-32.042C119.695-42.912 122.96-54 133.156-54c7.01 0 10.743 5.24 11.202 12.048"></path><path stroke="#000" d="m147.822-41.451-4.87 9.41-2.06-10.393z"></path><text x="133.156" y="-58.2" font-family="Times,serif" font-size="14" text-anchor="middle">0</text></g><g class="node"><title>stop</title><ellipse cx="245.444" cy="-18" fill="none" stroke="#000" rx="27.266" ry="18"></ellipse><text x="245.444" y="-13.8" font-family="Times,serif" font-size="14" text-anchor="middle">stop</text></g><g class="edge"><title>cond-&gt;stop</title><path fill="none" stroke="#000" stroke-dasharray="5,2" d="M175.607-18h32.572"></path><path stroke="#000" d="m208.224-21.5 10 3.5-10 3.5z"></path><text x="196.812" y="-22.2" font-family="Times,serif" font-size="14" text-anchor="middle">1</text></g><g class="node"><title>init</title><ellipse cx="27" cy="-18" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="27" y="-13.8" font-family="Times,serif" font-size="14" text-anchor="middle">init</text></g><g class="edge"><title>init-&gt;cond</title><path fill="none" stroke="#000" d="M54.062-18h26.806"></path><path stroke="#000" d="m80.873-21.5 10 3.5-10 3.5z"></path></g></g></svg>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="compose-task-graphs">编写任务图<a href="#compose-task-graphs" class="hash-link" aria-label="Direct link to 编写任务图" title="Direct link to 编写任务图">​</a></h3>
<p>Taskflow 是可组合的。
您可以通过组合模块化和可重复使用的块来创建大型并行图，这些块更容易在单个范围内进行优化。</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Taskflow f1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> f2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// create taskflow f1 of two tasks</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Task f1A </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> f1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">emplace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;Task f1A\n&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;f1A&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Task f1B </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> f1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">emplace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;Task f1B\n&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;f1B&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// create taskflow f2 with one module task composed of f1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Task f2A </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> f2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">emplace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;Task f2A\n&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;f2A&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Task f2B </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> f2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">emplace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;Task f2B\n&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;f2B&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Task f2C </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> f2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">emplace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;Task f2C\n&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;f2C&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Task f1_module_task </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> f2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">composed_of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">f1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;module&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">f1_module_task</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">succeed</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">f2A</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> f2B</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">precede</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">f2C</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->
<svg xmlns="http://www.w3.org/2000/svg" width="332pt" height="245pt" viewBox="0 0 332 244.8" align="center"><g class="graph" transform="translate(4 240.8)"><title>Taskflow</title><path fill="#fff" stroke="transparent" d="M-4 4v-244.8h332V4z"></path><g class="cluster"><title>cluster_p0x7ffeeb8ff970</title><path fill="none" stroke="#000" d="M8-8v-220.8h158V-8z"></path><text x="87" y="-212.2" font-family="Times,serif" font-size="14" text-anchor="middle">Taskflow: f2</text></g><g class="cluster"><title>cluster_p0x7ffeeb8ff8d0</title><path fill="none" stroke="#000" d="M174-152v-76.8h142v76.8z"></path><text x="245" y="-212.2" font-family="Times,serif" font-size="14" text-anchor="middle">Taskflow: f1</text></g><g class="node"><title>p0x7ffb03813838</title><ellipse cx="87" cy="-34" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="87" y="-29.8" font-family="Times,serif" font-size="14" text-anchor="middle">f2C</text></g><g class="node"><title>p0x7ffb03813938</title><ellipse cx="123" cy="-178" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="123" y="-173.8" font-family="Times,serif" font-size="14" text-anchor="middle">f2B</text></g><g class="node"><title>p0x7ffb03813b38</title><path fill="none" stroke="#00f" d="M158.238-124H19.762l-4 4v32h138.476l4-4zM154.238-120H15.762M154.238-120v32M154.238-120l4-4"></path><text x="87" y="-101.8" font-family="Times,serif" font-size="14" text-anchor="middle">module [Taskflow: f1]</text></g><g class="edge"><title>p0x7ffb03813938-&gt;p0x7ffb03813b38</title><path fill="none" stroke="#000" d="m114.285-160.57-13.694 27.388"></path><path stroke="#000" d="m103.613-131.4-7.603 7.38 1.342-10.51z"></path></g><g class="edge"><title>p0x7ffb03813b38-&gt;p0x7ffb03813838</title><path fill="none" stroke="#000" d="M87-87.831v25.414"></path><path stroke="#000" d="m90.5-62.413-3.5 10-3.5-10z"></path></g><g class="node"><title>p0x7ffb03813a38</title><ellipse cx="51" cy="-178" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="51" y="-173.8" font-family="Times,serif" font-size="14" text-anchor="middle">f2A</text></g><g class="edge"><title>p0x7ffb03813a38-&gt;p0x7ffb03813b38</title><path fill="none" stroke="#000" d="m59.715-160.57 13.694 27.388"></path><path stroke="#000" d="m76.648-134.53 1.342 10.51-7.603-7.38z"></path></g><g class="node"><title>p0x7ffb03813638</title><ellipse cx="281" cy="-178" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="281" y="-173.8" font-family="Times,serif" font-size="14" text-anchor="middle">f1B</text></g><g class="node"><title>p0x7ffb03813738</title><ellipse cx="209" cy="-178" fill="none" stroke="#000" rx="27" ry="18"></ellipse><text x="209" y="-173.8" font-family="Times,serif" font-size="14" text-anchor="middle">f1A</text></g></g></svg>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="launch-asynchronous-tasks">启动异步任务<a href="#launch-asynchronous-tasks" class="hash-link" aria-label="Direct link to 启动异步任务" title="Direct link to 启动异步任务">​</a></h3>
<p>Taskflow 支持<em>异步</em>任务。
您可以异步启动任务以动态探索任务图并行性。</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">TaskExecutor executor</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// create asynchronous tasks directly from an executor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">future</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token keyword" style="color:#CF222E">int</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> future </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">async</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;async task returns 1\n&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">silent_async</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#D73A49">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#C6105F">&quot;async task does not return\n&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// create asynchronous tasks with dynamic dependencies</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AsyncTask A </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">silent_dependent_async</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;A\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AsyncTask B </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">silent_dependent_async</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;B\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> A</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AsyncTask C </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">silent_dependent_async</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;C\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> A</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">AsyncTask D </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">silent_dependent_async</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;D\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> B</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> C</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">wait_for_all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="execute-a-taskflow">执行任务流<a href="#execute-a-taskflow" class="hash-link" aria-label="Direct link to 执行任务流" title="Direct link to 执行任务流">​</a></h3>
<p>执行器提供了几种<em>线程安全</em>方法来运行任务流。
您可以运行任务流一次、多次或直到满足停止条件。
这些方法是非阻塞的，并返回<code>kthread::TaskFuture&lt;void&gt;</code>，
以便您查询执行状态。</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#6B6B6B;font-style:italic">// runs the taskflow once</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">TaskFuture</span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token keyword" style="color:#CF222E">void</span><span class="token operator" style="color:#D73A49">&gt;</span><span class="token plain"> run_once </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">taskflow</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// wait on this run to finish</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">run_once</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// run the taskflow four times</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">run_n</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">taskflow</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">4</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// runs the taskflow five times</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">run_until</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">taskflow</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">counter</span><span class="token operator" style="color:#D73A49">=</span><span class="token number" style="color:#005CC5">5</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">--</span><span class="token plain">counter </span><span class="token operator" style="color:#D73A49">==</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// block the executor until all submitted taskflows complete</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">wait_for_all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="leverage-standard-parallel-algorithms">利用标准并行算法<a href="#leverage-standard-parallel-algorithms" class="hash-link" aria-label="Direct link to 利用标准并行算法" title="Direct link to 利用标准并行算法">​</a></h3>
<p>Taskflow 为您定义算法，以便您使用标准 C++ 语法快速表达常见的并行
模式，
例如并行迭代、并行缩减和并行排序。</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#6B6B6B;font-style:italic">// standard parallel CPU algorithms</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Task task1 </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> taskflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">for_each</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// assign each element to 100 in parallel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  first</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> last</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> i </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">100</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Task task2 </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> taskflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">   </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// reduce a range of items in parallel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  first</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> last</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> init</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> a </span><span class="token operator" style="color:#D73A49">+</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Task task3 </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> taskflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">sort</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">     </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// sort a range of items in parallel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  first</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> last</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> a </span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#6B6B6B;font-style:italic">// standard parallel GPU algorithms</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cudaTask cuda1 </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> cudaflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">for_each</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// assign each element to 100 on GPU</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  dfirst</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dlast</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">__device__</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> i </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">100</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cudaTask cuda2 </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> cudaflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">   </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// reduce a range of items on GPU</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  dfirst</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dlast</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> init</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">__device__</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> a </span><span class="token operator" style="color:#D73A49">+</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">cudaTask cuda3 </span><span class="token operator" style="color:#D73A49">=</span><span class="token plain"> cudaflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">sort</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">     </span><span class="token comment" style="color:#6B6B6B;font-style:italic">// sort a range of items on GPU</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  dfirst</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dlast</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token function" style="color:#8250DF">__device__</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">auto</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#CF222E">return</span><span class="token plain"> a </span><span class="token operator" style="color:#D73A49">&lt;</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>此外，Taskflow 还提供可组合的图形构建块，以便您高效地实现常见的并行算法，例如并行管道。</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#6B6B6B;font-style:italic">// create a pipeline to propagate five tokens through three serial stages</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Pipeline </span><span class="token function" style="color:#8250DF">pl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">num_parallel_lines</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Pipe</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">PipeType</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SERIAL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Pipeflow</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain"> pf</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#CF222E">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">token</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#D73A49">==</span><span class="token plain"> </span><span class="token number" style="color:#005CC5">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      pf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">stop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Pipe</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">PipeType</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SERIAL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Pipeflow</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain"> pf</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#8250DF">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;stage 2: input buffer[%zu] = %d\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">line</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> buffer</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">pf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">line</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Pipe</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">PipeType</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">SERIAL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">kthread</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">Pipeflow</span><span class="token operator" style="color:#D73A49">&amp;</span><span class="token plain"> pf</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#8250DF">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#C6105F">&quot;stage 3: input buffer[%zu] = %d\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">line</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> buffer</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">pf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">line</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">taskflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">composed_of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pl</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">executor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">taskflow</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#8250DF">wait</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="支持的编译器">支持的编译器<a href="#支持的编译器" class="hash-link" aria-label="Direct link to 支持的编译器" title="Direct link to 支持的编译器">​</a></h2>
<p>要使用 Taskflow，您只需要一个支持 C++17 的编译器：</p>
<ul>
<li>GNU C++ 编译器至少 v8.4 且带有 -std=c++17</li>
<li>Clang C++ 编译器至少 v6.0 且带有 -std=c++17</li>
<li>Microsoft Visual Studio 至少 v19.27 且带有 /std<!-- -->:c<!-- -->++17</li>
<li>AppleClang Xcode 版本至少 v12.0 且带有 -std=c++17</li>
<li>Nvidia CUDA 工具包和编译器 (nvcc) 至少 v11.1 且带有 -std=c++17</li>
<li>Intel C++ 编译器至少 v19.0.1 且带有 -std=c++17</li>
<li>Intel DPC++ Clang 编译器至少 v13.0.0 且带有 -std=c++17 和 SYCL20</li>
</ul>
<p>Taskflow 适用于 Linux、Windows 和 Mac OS X。</p>
<p>尽管 %Taskflow 主要支持 C++17，但您可以启用通过 <code>-std=c++20</code> 进行 C++20 编译，以利用新的 C++20 特性实现更好的性能。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-05-24T10:16:12.000Z" itemprop="dateModified">May 24, 2025</time></b> by <b>Jeff lothar</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/category/工作流"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">工作流</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/cpp/kthread/algo"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">算法索引</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#为什么使用任务流" class="table-of-contents__link toc-highlight">为什么使用任务流?</a></li><li><a href="#start-your-first-taskflow-program" class="table-of-contents__link toc-highlight">启动您的第一个 Taskflow 程序</a></li><li><a href="#express-task-graph-parallelism" class="table-of-contents__link toc-highlight">Express 任务图并行性</a><ul><li><a href="#create-a-subflow-graph" class="table-of-contents__link toc-highlight">创建子流图</a></li><li><a href="#integrate-control-flow-to-a-task-graph" class="table-of-contents__link toc-highlight">将控制流集成到任务图</a></li><li><a href="#compose-task-graphs" class="table-of-contents__link toc-highlight">编写任务图</a></li><li><a href="#launch-asynchronous-tasks" class="table-of-contents__link toc-highlight">启动异步任务</a></li><li><a href="#execute-a-taskflow" class="table-of-contents__link toc-highlight">执行任务流</a></li><li><a href="#leverage-standard-parallel-algorithms" class="table-of-contents__link toc-highlight">利用标准并行算法</a></li></ul></li><li><a href="#支持的编译器" class="table-of-contents__link toc-highlight">支持的编译器</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">阅读</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">文档</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/installation">安装</a></li></ul></div><div class="col footer__col"><div class="footer__title">支持与资源</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/feature-requests">Feature Requests</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/community/support">Help</a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">博客</a></li><li class="footer__item"><a class="footer__link-item" href="/changelog">更新</a></li><li class="footer__item"><a href="https://gitee.com/kumo-pub" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitee<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://kumo-ai.tech" target="_blank" rel="noopener noreferrer" class="footer__link-item">网站<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/cookie-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cookie Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">版权 © 2025 北京科米智创科技有限公司</div></div></div></footer></div>
</body>
</html>