(self.webpackChunkkumo_website=self.webpackChunkkumo_website||[]).push([[74063],{77945:(e,r,s)=>{e.exports={src:{srcSet:s.p+"assets/ideal-img/vars_4.5cee805.640.png 640w,"+s.p+"assets/ideal-img/vars_4.114f139.812.png 812w",images:[{path:s.p+"assets/ideal-img/vars_4.5cee805.640.png",width:640,height:186},{path:s.p+"assets/ideal-img/vars_4.114f139.812.png",width:812,height:236}],src:s.p+"assets/ideal-img/vars_4.5cee805.640.png",toString:function(){return s.p+"assets/ideal-img/vars_4.5cee805.640.png"},placeholder:void 0,width:640,height:186},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAADCAYAAACqPZ51AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAXElEQVR4nE2KMQ6DMBDA8v8fdiiFDkWEO8QdJLlMrlBVicGyB6fPPJPziogQEfTeifjx78tJr6EVelRaPajFbxi17Jy2kGwXTCd8e+PbhOmI6wvXAZcntj5wHfkCq3VygYw81r0AAAAASUVORK5CYII="}},62192:(e,r,s)=>{e.exports={src:{srcSet:s.p+"assets/ideal-img/vars_5.1c1fa6f.640.png 640w,"+s.p+"assets/ideal-img/vars_5.adf9665.810.png 810w",images:[{path:s.p+"assets/ideal-img/vars_5.1c1fa6f.640.png",width:640,height:189},{path:s.p+"assets/ideal-img/vars_5.adf9665.810.png",width:810,height:239}],src:s.p+"assets/ideal-img/vars_5.1c1fa6f.640.png",toString:function(){return s.p+"assets/ideal-img/vars_5.1c1fa6f.640.png"},placeholder:void 0,width:640,height:189},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAADCAYAAACqPZ51AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAXElEQVR4nB3HSw7DIAwAUe5/txyh6jKEWnxsYyVspgqLp9GknDOllE1EeL+KEO5MN6YZdwSptcZaa3vePjdaC6P+kOvLdR6M/iG5KTY62ts2deDaUVViGtMrEYM/Zt5yW4FvOIoAAAAASUVORK5CYII="}},27595:(e,r,s)=>{e.exports={src:{srcSet:s.p+"assets/ideal-img/vars_6.399b917.640.png 640w,"+s.p+"assets/ideal-img/vars_6.4e3007e.836.png 836w",images:[{path:s.p+"assets/ideal-img/vars_6.399b917.640.png",width:640,height:277},{path:s.p+"assets/ideal-img/vars_6.4e3007e.836.png",width:836,height:362}],src:s.p+"assets/ideal-img/vars_6.399b917.640.png",toString:function(){return s.p+"assets/ideal-img/vars_6.399b917.640.png"},placeholder:void 0,width:640,height:277},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAECAYAAAC3OK7NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAY0lEQVR4nH2NMQ7AIAwD+f8TC6FJ6AQDAwxICLkibdda8mKdzk6TggLBew8WATNbc85Ya+GLU1UQvSALWBghEPY+xvgBWUAUbSulYM5pZieqZvDHBp/beJ5I6UKtFa019N5xA2DwlB9UvKoWAAAAAElFTkSuQmCC"}},63938:(e,r,s)=>{e.exports={src:{srcSet:s.p+"assets/ideal-img/vars_7.57358a1.300.png 300w",images:[{path:s.p+"assets/ideal-img/vars_7.57358a1.300.png",width:300,height:216}],src:s.p+"assets/ideal-img/vars_7.57358a1.300.png",toString:function(){return s.p+"assets/ideal-img/vars_7.57358a1.300.png"},placeholder:void 0,width:300,height:216},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAHCAYAAAAxrNxjAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAqElEQVR4nGWO0W6EIBRE/f/vK90qu8AFFIWYmPhiVDxNTZ92ZzJvJzPT5Gki9j25ZLwP5FzY9513NdYY1OOB+laICOM0fUA3mIYBK4J1lj5GQghcf77ewBgi+vVCa42zlhAi27Z9Nnrx/LQd+qnx4rBOEO9ZloXzPKm13mmGISE+YO+2gBOhlEJKiZRGxjSyriuNMYZOP+nali+lmOeZ4zjuuatWrv+zv4fQCINmHaz8AAAAAElFTkSuQmCC"}},15586:(e,r,s)=>{"use strict";s.r(r),s.d(r,{assets:()=>_,contentTitle:()=>x,default:()=>u,frontMatter:()=>k,metadata:()=>j,toc:()=>m});var n=s(74848),a=s(28453),c=s(85971),i=s(91724),t=s(23941),d=s(77945),p=s.n(d),l=s(62192),A=s.n(l),h=s(27595),o=s.n(h),v=s(63938),g=s.n(v);const k={},x="\u591a\u5199\u53d8\u91cf",j={id:"cpp/krpc/vars",title:"\u591a\u5199\u53d8\u91cf",description:"kvar\u662f\u591a\u7ebf\u7a0b\u73af\u5883\u4e0b\u7684\u8ba1\u6570\u5668\u7c7b\u5e93\uff0c\u652f\u6301\u5355\u7ef4\u5ea6kvar\u548c\u591a\u7ef4\u5ea6mkvar\uff0c\u65b9\u4fbf\u8bb0\u5f55\u548c\u67e5\u770b\u7528\u6237\u7a0b\u5e8f\u4e2d\u7684\u5404\u7c7b\u6570\u503c\uff0c",source:"@site/versioned_docs/version-1.1.1/cpp/krpc/vars.mdx",sourceDirName:"cpp/krpc",slug:"/cpp/krpc/vars",permalink:"/docs/cpp/krpc/vars",draft:!1,unlisted:!1,tags:[],version:"1.1.1",frontMatter:{}},_={},m=[{value:"\u67e5\u8be2\u65b9\u6cd5",id:"\u67e5\u8be2\u65b9\u6cd5",level:2},{value:"\u67e5\u770b\u5386\u53f2\u8d8b\u52bf",id:"\u67e5\u770b\u5386\u53f2\u8d8b\u52bf",level:2},{value:"\u7edf\u8ba1\u548c\u67e5\u770b\u5206\u4f4d\u503c",id:"\u7edf\u8ba1\u548c\u67e5\u770b\u5206\u4f4d\u503c",level:2},{value:"\u975ekrpc server",id:"\u975ekrpc-server",level:2}];function f(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.header,{children:(0,n.jsx)(r.h1,{id:"\u591a\u5199\u53d8\u91cf",children:"\u591a\u5199\u53d8\u91cf"})}),"\n",(0,n.jsxs)(r.p,{children:["kvar\u662f\u591a\u7ebf\u7a0b\u73af\u5883\u4e0b\u7684\u8ba1\u6570\u5668\u7c7b\u5e93\uff0c\u652f\u6301",(0,n.jsx)(r.a,{href:"/docs/cpp/krpc/kvar_c++",children:"\u5355\u7ef4\u5ea6kvar"}),"\u548c",(0,n.jsx)(r.a,{href:"/docs/cpp/krpc/mkvar_c++",children:"\u591a\u7ef4\u5ea6mkvar"}),"\uff0c\u65b9\u4fbf\u8bb0\u5f55\u548c\u67e5\u770b\u7528\u6237\u7a0b\u5e8f\u4e2d\u7684\u5404\u7c7b\u6570\u503c\uff0c\n\u5b83\u5229\u7528\u4e86thread local\u5b58\u50a8\u51cf\u5c11\u4e86cache bouncing\uff0c\u76f8\u6bd4UbMonitor(\u767e\u5ea6\u5185\u7684\u8001\u8ba1\u6570\u5668\u5e93)\u51e0\u4e4e\u4e0d\u4f1a\u7ed9\u7a0b\u5e8f\u589e\u52a0\u6027\u80fd\u5f00\u9500\uff0c\u4e5f\u5feb\u4e8e\u7ade\u4e89\u9891\u7e41\u7684\u539f\u5b50\u64cd\u4f5c\u3002\nkrpc\u96c6\u6210\u4e86kvar\uff0c",(0,n.jsx)(r.a,{href:"/docs/cpp/krpc/vars",children:"/vars"}),"\u53ef\u67e5\u770b\u6240\u6709\u66dd\u5149\u7684kvar\uff0c",(0,n.jsx)(r.a,{href:"/docs/cpp/krpc/vars",children:"/vars/VARNAME"}),"\u53ef\u67e5\u9605\u67d0\u4e2akvar\uff0c\u589e\u52a0\u8ba1\u6570\u5668\u7684\u65b9\u6cd5\u8bf7\u67e5\u770b",(0,n.jsx)(r.a,{href:"/docs/cpp/krpc/kvar_c++",children:"\u5355\u7ef4\u5ea6kvar"}),"\n\u548c",(0,n.jsx)(r.a,{href:"/docs/cpp/krpc/mkvar_c++",children:"\u591a\u7ef4\u5ea6mkvar"}),"\u3002krpc\u5927\u91cf\u4f7f\u7528\u4e86kvar\u63d0\u4f9b\u7edf\u8ba1\u6570\u503c\uff0c\u5f53\u4f60\u9700\u8981\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e2d\u8ba1\u6570\u5e76\u5c55\u73b0\u65f6\uff0c\u5e94\u8be5\u7b2c\u4e00\u65f6\u95f4\u60f3\u5230kvar\u3002\u4f46kvar\u4e0d\u80fd\u4ee3\u66ff\u6240\u6709\u7684\u8ba1\u6570\u5668\uff0c\n\u5b83\u7684\u672c\u8d28\u662f\u628a\u5199\u65f6\u7684\u7ade\u4e89\u8f6c\u79fb\u5230\u4e86\u8bfb\uff1a\u8bfb\u5f97\u5408\u5e76\u6240\u6709\u5199\u8fc7\u7684\u7ebf\u7a0b\u4e2d\u7684\u6570\u636e\uff0c\u800c\u4e0d\u53ef\u907f\u514d\u5730\u53d8\u6162\u4e86\u3002\u5f53\u4f60\u8bfb\u5199\u90fd\u5f88\u9891\u7e41\u6216\u5f97\u57fa\u4e8e\u6700\u65b0\u503c\u505a\u4e00\u4e9b\u903b\u8f91\u5224\u65ad\u65f6\uff0c\u4f60\u4e0d\u5e94\u8be5\u7528kvar\u3002"]}),"\n",(0,n.jsx)(r.h2,{id:"\u67e5\u8be2\u65b9\u6cd5",children:"\u67e5\u8be2\u65b9\u6cd5"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"/docs/cpp/krpc/vars",children:(0,n.jsx)(r.code,{children:"/vars"})}),": \u5217\u51fa\u6240\u6709\u66dd\u5149\u7684kvar"]}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"/docs/cpp/krpc/vars",children:(0,n.jsx)(r.code,{children:"/vars/NAME"})}),": \u67e5\u8be2\u540d\u5b57\u4e3aNAME\u7684kvar"]}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"/docs/cpp/krpc/vars",children:(0,n.jsx)(r.code,{children:"/vars/NAME1,NAME2,NAME3"})}),": \u67e5\u8be2\u540d\u5b57\u4e3aNAME1\u6216NAME2\u6216NAME3\u7684kvar"]}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"/docs/cpp/krpc/vars",children:(0,n.jsx)(r.code,{children:"/vars/foo*,b$r"})}),": \u67e5\u8be2\u540d\u5b57\u4e0e\u67d0\u4e00\u7edf\u914d\u7b26\u5339\u914d\u7684 ",(0,n.jsx)(r.code,{children:"kvar"}),"\uff0c\u6ce8\u610f\u7528",(0,n.jsx)(r.code,{children:"$"}),"\u4ee3\u66ff",(0,n.jsx)(r.code,{children:"?"}),"\u5339\u914d\u5355\u4e2a\u5b57\u7b26\uff0c\u56e0\u4e3a",(0,n.jsx)(r.code,{children:"?"}),"\u662f",(0,n.jsx)(r.code,{children:"URL"}),"\u7684\u4fdd\u7559\u5b57\u7b26\u3002"]}),"\n",(0,n.jsx)(r.p,{children:"\u4ee5\u4e0b\u52a8\u753b\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528\u8fc7\u6ee4\u529f\u80fd\u3002\u4f60\u53ef\u4ee5\u628a\u5305\u542b\u8fc7\u6ee4\u8868\u8fbe\u5f0f\u7684url\u590d\u5236\u7c98\u8d34\u7ed9\u4ed6\u4eba\uff0c\u4ed6\u4eec\u70b9\u5f00\u540e\u5c06\u770b\u5230\u76f8\u540c\u7684\u8ba1\u6570\u5668\u6761\u76ee\u3002(\u6570\u503c\u53ef\u80fd\u968f\u8fd0\u884c\u53d8\u5316)"}),"\n","\n",(0,n.jsx)("img",{src:c.A}),"\n",(0,n.jsx)(r.p,{children:"/vars\u5de6\u4e0a\u89d2\u6709\u4e00\u4e2a\u641c\u7d22\u6846\u80fd\u52a0\u5feb\u5bfb\u627e\u7279\u5b9akvar\u7684\u901f\u5ea6\uff0c\u5728\u8fd9\u4e2a\u641c\u7d22\u6846\u4f60\u53ea\u9700\u952e\u5165kvar\u540d\u79f0\u7684\u4e00\u90e8\u5206\uff0c\u6846\u67b6\u5c06\u8865\u4e0a*\u8fdb\u884c\u6a21\u7cca\u67e5\u627e\u3002\u4e0d\u540c\u7684\u540d\u79f0\u95f4\u53ef\u4ee5\u9017\u53f7\u3001\u5206\u53f7\u6216\u7a7a\u683c\u5206\u9694\u3002"}),"\n","\n",(0,n.jsx)("img",{src:i.A}),"\n",(0,n.jsx)(r.p,{children:"\u4f60\u4e5f\u53ef\u4ee5\u5728\u547d\u4ee4\u884c\u4e2d\u8bbf\u95eevars\uff1a"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{children:'$ curl krpc.baidu.com:8765/vars/kthread*\nkthread_creation_count : 125134\nkthread_creation_latency : 3\nkthread_creation_latency_50 : 3\nkthread_creation_latency_90 : 5\nkthread_creation_latency_99 : 7\nkthread_creation_latency_999 : 12\nkthread_creation_latency_9999 : 12\nkthread_creation_latency_cdf : "click to view"\nkthread_creation_latency_percentiles : "[3,5,7,12]"\nkthread_creation_max_latency : 7\nkthread_creation_qps : 100\nkthread_group_status : "0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 "\nkthread_num_workers : 24\nkthread_worker_usage : 1.01056\n'})}),"\n",(0,n.jsx)(r.h2,{id:"\u67e5\u770b\u5386\u53f2\u8d8b\u52bf",children:"\u67e5\u770b\u5386\u53f2\u8d8b\u52bf"}),"\n",(0,n.jsx)(r.p,{children:"\u70b9\u51fb\u5927\u90e8\u5206\u6570\u503c\u578b\u7684kvar\u4f1a\u663e\u793a\u5176\u5386\u53f2\u8d8b\u52bf\u3002\u6bcf\u4e2a\u53ef\u70b9\u51fb\u7684kvar\u8bb0\u5f55\u4e86\u8fc7\u53bb60\u79d2\uff0c60\u5206\u949f\uff0c24\u5c0f\u65f6\uff0c30\u5929\u603b\u8ba1174\u4e2a\u503c\u3002\u5f53\u67091000\u4e2a\u53ef\u70b9\u51fbkvar\u65f6\u5927\u7ea6\u4f1a\u53601M\u5185\u5b58\u3002"}),"\n","\n",(0,n.jsx)("img",{src:t.A}),"\n",(0,n.jsx)(r.h2,{id:"\u7edf\u8ba1\u548c\u67e5\u770b\u5206\u4f4d\u503c",children:"\u7edf\u8ba1\u548c\u67e5\u770b\u5206\u4f4d\u503c"}),"\n",(0,n.jsx)(r.p,{children:"x%\u5206\u4f4d\u503c\uff08percentile\uff09\u662f\u6307\u628a\u4e00\u6bb5\u65f6\u95f4\u5185\u7684N\u4e2a\u7edf\u8ba1\u503c\u6392\u5e8f\uff0c\u6392\u5728\u7b2cN * x%\u4f4d\u7684\u503c\u3002\u6bd4\u5982\u4e00\u6bb5\u65f6\u95f4\u5185\u67091000\u4e2a\u503c\uff0c\u5148\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\uff0c\u6392\u5728\u7b2c500\u4f4d(1000 * 50%)\u7684\u503c\u662f50%\u5206\u4f4d\u503c\uff08\u5373\u4e2d\u4f4d\u6570\uff09\uff0c\u6392\u5728\u7b2c990\u4f4d\u7684\u662f99%\u5206\u4f4d\u503c(1000 * 99%)\uff0c\u6392\u5728\u7b2c999\u4f4d\u7684\u662f99.9%\u5206\u4f4d\u503c\u3002\u5206\u4f4d\u503c\u80fd\u6bd4\u5e73\u5747\u503c\u66f4\u51c6\u786e\u7684\u523b\u753b\u6570\u503c\u7684\u5206\u5e03\uff0c\u5bf9\u7406\u89e3\u7cfb\u7edf\u884c\u4e3a\u6709\u91cd\u8981\u610f\u4e49\u3002\u5de5\u4e1a\u7ea7\u5e94\u7528\u7684SLA\u4e00\u822c\u572899.97%\u4ee5\u4e0a(\u6b64\u4e3a\u767e\u5ea6\u5bf9\u4e8c\u7ea7\u7cfb\u7edf\u7684\u8981\u6c42\uff0c\u4e00\u7ea7\u662f99.99%\u4ee5\u4e0a)\uff0c\u4e00\u4e9b\u7cfb\u7edf\u5373\u4f7f\u5e73\u5747\u503c\u4e0d\u9519\uff0c\u4f46\u4e0d\u4f73\u7684\u957f\u5c3e\u533a\u57df\u4e5f\u4f1a\u660e\u663e\u62c9\u4f4e\u548c\u6253\u7834SLA\u3002\u5206\u4f4d\u503c\u80fd\u5e2e\u52a9\u5206\u6790\u957f\u5c3e\u533a\u57df\u3002"}),"\n",(0,n.jsx)(r.p,{children:"\u5206\u4f4d\u503c\u53ef\u4ee5\u7ed8\u5236\u4e3aCDF\u66f2\u7ebf\u548c\u6309\u65f6\u95f4\u53d8\u5316\u7684\u66f2\u7ebf\u3002"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"\u4e0b\u56fe\u662f\u5206\u4f4d\u503c\u7684CDF"}),'\uff0c\u6a2a\u8f74\u662f\u6bd4\u4f8b(\u6392\u5e8f\u4f4d\u7f6e/\u603b\u6570)\uff0c\u7eb5\u8f74\u662f\u5bf9\u5e94\u7684\u5206\u4f4d\u503c\u3002\u6bd4\u5982\u6a2a\u8f74=50%\u5904\u5bf9\u5e94\u7684\u7eb5\u8f74\u503c\u4fbf\u662f50%\u5206\u4f4d\u503c\u3002\u5982\u679c\u7cfb\u7edf\u8981\u6c42\u7684\u6027\u80fd\u6307\u6807\u662f"99.9%\u7684\u8bf7\u6c42\u5728xx\u6beb\u79d2\u5185\u5b8c\u6210\u201c\uff0c\u90a3\u4e48\u4f60\u5c31\u5f97\u770b\u4e0b99.9%\u90a3\u513f\u7684\u503c\u3002']}),"\n","\n",(0,n.jsx)("img",{src:p()}),"\n",(0,n.jsxs)(r.p,{children:["\u4e3a\u4ec0\u4e48\u53eb\u5b83",(0,n.jsx)(r.a,{href:"https://en.wikipedia.org/wiki/Cumulative_distribution_function",children:"CDF"}),'? \u5f53\u9009\u5b9a\u4e00\u4e2a\u7eb5\u8f74\u503cy\u65f6\uff0c\u5bf9\u5e94\u6a2a\u8f74\u7684\u542b\u4e49\u662f"\u6570\u503c ',(0,n.jsx)(r.code,{children:"<="})," y\u7684\u6bd4\u4f8b\u201d\uff0c\u7531\u4e8e\u6570\u503c\u4e00\u822c\u6765\u81ea\u968f\u673a\u91c7\u6837\uff0c\u6a2a\u8f74\u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3a\u201c\u6570\u503c ",(0,n.jsx)(r.code,{children:"<="})," y\u7684\u6982\u7387\u201d\uff0c\u6216P(\u6570\u503c ",(0,n.jsx)(r.code,{children:"<="})," y)\uff0c\u8fd9\u5c31\u662fCDF\u7684\u5b9a\u4e49\u3002"]}),"\n",(0,n.jsxs)(r.p,{children:["CDF\u7684\u5bfc\u6570\u662f",(0,n.jsx)(r.a,{href:"https://en.wikipedia.org/wiki/Probability_density_function",children:"\u6982\u7387\u5bc6\u5ea6\u51fd\u6570"}),"\u3002\u5982\u679c\u628aCDF\u7684\u7eb5\u8f74\u5206\u4e3a\u5f88\u591a\u5c0f\u6bb5\uff0c\u5bf9\u6bcf\u4e2a\u5c0f\u6bb5\u8ba1\u7b97\u4e24\u7aef\u5bf9\u5e94\u7684\u6a2a\u8f74\u503c\u4e4b\u5dee\uff0c\u5e76\u628a\u8fd9\u4e2a\u5dee\u4f5c\u4e3a\u65b0\u7684\u6a2a\u8f74\uff0c\u90a3\u4e48\u6211\u4eec\u4fbf\u7ed8\u5236\u4e86PDF\u66f2\u7ebf\uff0c\u5c31\u50cf\u987a\u65f6\u9488\u65cb\u8f6c\u4e8690\u5ea6\u7684\u6b63\u6001\u5206\u5e03\u90a3\u6837\u3002\u4f46\u4e2d\u4f4d\u6570\u7684\u5bc6\u5ea6\u5f80\u5f80\u5f88\u9ad8\uff0c\u5728PDF\u4e2d\u5f88\u9192\u76ee\uff0c\u8fd9\u4f7f\u5f97\u8fb9\u4e0a\u7684\u957f\u5c3e\u5f88\u6241\u800c\u4e0d\u6613\u67e5\u770b\uff0c\u6240\u4ee5\u5927\u90e8\u5206\u7cfb\u7edf\u6d4b\u91cf\u7ed3\u679c\u9009\u62e9CDF\u66f2\u7ebf\u800c\u4e0d\u662fPDF\u66f2\u7ebf\u3002"]}),"\n",(0,n.jsx)(r.p,{children:"\u53ef\u7528\u4e00\u4e9b\u7b80\u5355\u89c4\u5219\u8861\u91cfCDF\u66f2\u7ebf\u597d\u574f\uff1a"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:"\u8d8a\u5e73\u8d8a\u597d\u3002\u4e00\u6761\u6c34\u5e73\u7ebf\u662f\u6700\u7406\u60f3\u7684\uff0c\u8fd9\u610f\u5473\u7740\u6240\u6709\u7684\u6570\u503c\u90fd\u76f8\u7b49\uff0c\u6ca1\u6709\u4efb\u4f55\u7b49\u5f85\uff0c\u62e5\u585e\uff0c\u505c\u987f\u3002\u5f53\u7136\u8fd9\u662f\u4e0d\u53ef\u80fd\u7684\u3002"}),"\n",(0,n.jsx)(r.li,{children:"99%\u548c100%\u95f4\u7684\u9762\u79ef\u8d8a\u5c0f\u8d8a\u597d\uff1a99%\u4e4b\u540e\u662f\u957f\u5c3e\u7684\u805a\u96c6\u5730\uff0c\u5bf9\u5927\u90e8\u5206\u7cfb\u7edf\u7684SLA\u6709\u91cd\u8981\u5f71\u54cd\u3002"}),"\n"]}),"\n",(0,n.jsx)(r.p,{children:"\u4e00\u6761\u7f13\u6162\u4e0a\u5347\u4e14\u957f\u5c3e\u533a\u57df\u9762\u79ef\u4e0d\u5927\u7684CDF\u4fbf\u662f\u4e0d\u9519\u7684\u66f2\u7ebf\u3002"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"\u4e0b\u56fe\u662f\u6309\u5206\u4f4d\u503c\u6309\u65f6\u95f4\u53d8\u5316\u7684\u66f2\u7ebf"}),"\uff0c\u5305\u542b\u4e864\u6761\u66f2\u7ebf\uff0c\u6a2a\u8f74\u662f\u65f6\u95f4\uff0c\u7eb5\u8f74\u4ece\u4e0a\u5230\u4e0b\u5206\u522b\u5bf9\u5e9499.9%\uff0c99%\uff0c90%\uff0c50%\u5206\u4f4d\u503c\u3002\u989c\u8272\u4ece\u4e0a\u5230\u4e0b\u4e5f\u8d8a\u6765\u8d8a\u6d45\uff08\u4ece\u6a58\u7ea2\u5230\u571f\u9ec4\uff09\u3002"]}),"\n","\n",(0,n.jsx)("img",{src:A()}),"\n",(0,n.jsxs)(r.p,{children:["\u6ed1\u52a8\u9f20\u6807\u53ef\u4ee5\u9605\u8bfb\u5bf9\u5e94\u6570\u636e\u70b9\u7684\u503c\uff0c\u4e0a\u56fe\u4e2d\u663e\u793a\u7684\u662f\u201d39\u79d2\u79cd\u524d\u768499%\u5206\u4f4d\u503c\u662f330",(0,n.jsx)(r.strong,{children:"\u5fae\u79d2"}),'\u201d\u3002\u8fd9\u5e45\u56fe\u4e2d\u4e0d\u5305\u542b99.99%\u7684\u66f2\u7ebf\uff0c\u56e0\u4e3a99.99%\u5206\u4f4d\u503c\u5e38\u660e\u663e\u5927\u4e8e99.9%\u53ca\u4ee5\u4e0b\u7684\u5206\u4f4d\u503c\uff0c\u753b\u5728\u4e00\u8d77\u7684\u8bdd\u4f1a\u4f7f\u5f97\u5176\u4ed6\u66f2\u7ebf\u53d8\u5f97\u5f88\u201d\u77ee\u201c\uff0c\u96be\u4ee5\u8fa8\u8ba4\u3002\u4f60\u53ef\u4ee5\u70b9\u51fb\u4ee5"_latency_9999"\u7ed3\u5c3e\u7684kvar\u72ec\u7acb\u67e5\u770b99.99%\u66f2\u7ebf\u3002\u6309\u65f6\u95f4\u53d8\u5316\u66f2\u7ebf\u53ef\u4ee5\u770b\u5230\u5206\u4f4d\u503c\u7684\u53d8\u5316\u8d8b\u52bf\uff0c\u5bf9\u5206\u6790\u7cfb\u7edf\u7684\u6027\u80fd\u53d8\u5316\u5f88\u5b9e\u7528\u3002']}),"\n",(0,n.jsx)(r.p,{children:"krpc\u7684\u670d\u52a1\u90fd\u4f1a\u81ea\u52a8\u7edf\u8ba1\u5ef6\u65f6\u5206\u5e03\uff0c\u7528\u6237\u4e0d\u7528\u81ea\u5df1\u52a0\u4e86\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a"}),"\n","\n",(0,n.jsx)("img",{src:o()}),"\n",(0,n.jsxs)(r.p,{children:["\u4f60\u53ef\u4ee5\u7528kvar::LatencyRecorder\u7edf\u8ba1\u4efb\u4f55\u4ee3\u7801\u7684\u5ef6\u65f6\uff0c\u8fd9\u4e48\u505a(\u66f4\u5177\u4f53\u7684\u4f7f\u7528\u65b9\u6cd5\u8bf7\u67e5\u770b",(0,n.jsx)(r.a,{href:"/docs/cpp/krpc/kvar_c++",children:"kvar-c++"}),"):"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-c++",children:'#include <kvar/kvar.h>\n\n...\nkvar::LatencyRecorder g_latency_recorder("client");  // expose this recorder\n... \nvoid foo() {\n    ...\n    g_latency_recorder << my_latency;\n    ...\n}\n'})}),"\n",(0,n.jsx)(r.p,{children:"\u5982\u679c\u8fd9\u4e2a\u7a0b\u5e8f\u4f7f\u7528\u4e86krpc server\uff0c\u90a3\u4e48\u4f60\u5e94\u8be5\u5df2\u7ecf\u53ef\u4ee5\u5728/vars\u770b\u5230client_latency, client_latency_cdf\u7b49\u53d8\u91cf\uff0c\u70b9\u51fb\u4fbf\u53ef\u67e5\u770b\u52a8\u6001\u66f2\u7ebf\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a"}),"\n","\n",(0,n.jsx)("img",{src:g()}),"\n",(0,n.jsx)(r.h2,{id:"\u975ekrpc-server",children:"\u975ekrpc server"}),"\n",(0,n.jsxs)(r.p,{children:["\u5982\u679c\u4f60\u7684\u7a0b\u5e8f\u53ea\u662f\u4e00\u4e2akrpc client\u6216\u6839\u672c\u6ca1\u6709\u4f7f\u7528krpc\uff0c\u5e76\u4e14\u4f60\u4e5f\u60f3\u770b\u5230\u52a8\u6001\u66f2\u7ebf\uff0c\u770b",(0,n.jsx)(r.a,{href:"/docs/cpp/krpc/dummy_server",children:"\u8fd9\u91cc"}),"\u3002"]})]})}function u(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(f,{...e})}):f(e)}},85971:(e,r,s)=>{"use strict";s.d(r,{A:()=>n});const n=s.p+"assets/images/vars_1-f11bf5c72d8567f8540fe21f14f7c9da.gif"},91724:(e,r,s)=>{"use strict";s.d(r,{A:()=>n});const n=s.p+"assets/images/vars_2-8af4b40b5e1258aae7d9f012b0d1c9f1.gif"},23941:(e,r,s)=>{"use strict";s.d(r,{A:()=>n});const n=s.p+"assets/images/vars_3-5c4f6408c2d11951013671c6d399e600.gif"},28453:(e,r,s)=>{"use strict";s.d(r,{R:()=>i,x:()=>t});var n=s(96540);const a={},c=n.createContext(a);function i(e){const r=n.useContext(c);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),n.createElement(c.Provider,{value:r},e.children)}}}]);